(()=>{"use strict";var e,t=function(){function e(){}return e.strToMethod=function(e,t){void 0===t&&(t="");for(var r=e.match(/[a-zA-Z]+/g),n=0;n<r.length;n++)r[n]=this.ucfirst(r[n]);return r.join(t)},e.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.replaceKeyValueRegex=function(e,t){for(var r in e){var n=new RegExp(r,"g");t=t.replace(n,e[r])}return t},e.generateControllerName=function(e,t){return e.indexOf(".")&&(e=e.replace(".","_")),(e=t?t+"_"+e:e)+"Controller"},e.getRawWidgetTemp=function(e,t){var r=new RegExp("{"+e+"}([\\s\\S]*?){/"+e+"}","g").exec(t);return r?{outter:r[0],inner:r[1]}:null},e}(),r=function(){function e(){}return e.prototype.getRawTemp=function(e){var r=this.getRawTempKey();return t.getRawWidgetTemp(r,e)},e.prototype.generateControllerName=function(e){var t=e.name;return(t=e.groupName?e.groupName+"_"+t:t)+"Controller"},e.prototype.generateWidgetName=function(e){var r=e.name;return r=e.groupName?e.groupName+"_"+r:r,"gen"+t.strToMethod(r)+"Widget"},e}(),n=(e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),a=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return n(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp),r=(e.outter,e.inner),n={"{formElControllerName}":this.generateControllerName(this.parameter),"{formElWidgetName}":this.generateWidgetName(this.parameter),"{formElCaption}":this.parameter.description?this.parameter.description:this.parameter.name};return r=t.replaceKeyValueRegex(n,r),r=this.parseValidator(r),this.parseNumberOnly(r)},r.prototype.parseValidator=function(e){var t=/{formElValidator}([\s\S]*?){\/formElValidator}/g.exec(e),r=t[1],n=t[0];return this.parameter.required?e.replace(n,r):e.replace(n,"")},r.prototype.parseNumberOnly=function(e){var r=t.getRawWidgetTemp("formElNumberOnly",e),n=r.outter,a=r.inner;return"integer"==this.parameter.dataType?e.replace(n,a):e.replace(n,"")},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formInput",r}(r),i=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return i(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp),r=(e.outter,e.inner),n=this.generateControllerName(this.parameter),a={"{formElControllerName}":n,"{formElWidgetName}":this.generateWidgetName(this.parameter),"{fileBytes}":n+"Bytes","{fileName}":n,"{fileDesc}":this.parameter.description?this.parameter.description:this.parameter.name};return t.replaceKeyValueRegex(a,r)},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formElFile",r}(r),s=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return s(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp).inner,r={"{formElControllerName}":this.generateControllerName(this.parameter),"{formElWidgetName}":this.generateWidgetName(this.parameter),"{formElCaption}":this.parameter.description?this.parameter.description:this.parameter.name,"{formElRequired}":this.parameter.required?"true":"false"};return t.replaceKeyValueRegex(r,e)},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formElMultiFile",r}(r),p=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return p(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp),r=(e.outter,e.inner),n=this.generateControllerName(this.parameter),a={"{formElControllerName}":n,"{formElWidgetName}":this.generateWidgetName(this.parameter),"{formElCaption}":this.parameter.description?this.parameter.description:this.parameter.name,"{selectedIds}":n};return t.replaceKeyValueRegex(a,r)},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formElSelect",r}(r),d=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.getRawTempKey=function(){return t.widgetKey},t.widgetKey="formElMultiSelect",t}(u),h=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return h(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp),r=(e.outter,e.inner),n={"{formElControllerName}":this.generateControllerName(this.parameter),"{formElWidgetName}":this.generateWidgetName(this.parameter),"{hintText}":this.parameter.description?this.parameter.description:this.parameter.name};return t.replaceKeyValueRegex(n,r)},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formDate",r}(r),f=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.getRawTempKey=function(){return t.widgetKey},t.widgetKey="formDatetime",t}(m),y=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),v=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return y(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp),r=(e.outter,e.inner),n={"{formElControllerName}":this.generateControllerName(this.parameter),"{formElWidgetName}":this.generateWidgetName(this.parameter),"{formElCaption}":this.parameter.description?this.parameter.description:this.parameter.name,"{initialText}":""};return t.replaceKeyValueRegex(n,r)},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formRichtext",r}(r),w=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(e){function r(t,r){var n=e.call(this)||this;return n.parameter=t,n.dartTemp=r,n}return w(r,e),r.prototype.generate=function(){var e=this.getRawTemp(this.dartTemp),r=(e.outter,e.inner),n={"{formElControllerName}":this.generateControllerName(this.parameter),"{formElWidgetName}":this.generateWidgetName(this.parameter),"{formElCaption}":this.parameter.description?this.parameter.description:this.parameter.name};return t.replaceKeyValueRegex(n,r)},r.prototype.getRawTempKey=function(){return r.widgetKey},r.widgetKey="formCheck",r}(r),C=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.getRawTempKey=function(){return t.widgetKey},t.widgetKey="formTextarea",t}(a),E=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.getRawTempKey=function(){return t.widgetKey},t.widgetKey="formTime",t}(m),S=function(){function e(e,t){this.parameter=e,this.dartTemp=t}return e.prototype.generateWidget=function(){return this.getWidget().generate()},e.prototype.getWidget=function(){switch(this.parameter.type){case"select":return this.generateSelect();case"multi_select":return this.generateMutiSelect();case"check":return this.generateCheck();case"richtext":return this.generateRichtext();case"date":return this.generateDate();case"datetime":return this.generateDatetime();case"time":return this.generateTime();case"file":return this.generateFile();case"multi_file":return this.generateMultiFile();case"textarea":return this.generateTextarea();default:return this.generateInput()}},e.prototype.generateInput=function(){return new a(this.parameter,this.dartTemp)},e.prototype.generateTextarea=function(){return new b(this.parameter,this.dartTemp)},e.prototype.generateFile=function(){return new o(this.parameter,this.dartTemp)},e.prototype.generateMultiFile=function(){return new l(this.parameter,this.dartTemp)},e.prototype.generateMutiSelect=function(){return new c(this.parameter,this.dartTemp)},e.prototype.generateSelect=function(){return new u(this.parameter,this.dartTemp)},e.prototype.generateDatetime=function(){return new g(this.parameter,this.dartTemp)},e.prototype.generateTime=function(){return new N(this.parameter,this.dartTemp)},e.prototype.generateDate=function(){return new m(this.parameter,this.dartTemp)},e.prototype.generateRichtext=function(){return new v(this.parameter,this.dartTemp)},e.prototype.generateCheck=function(){return new T(this.parameter,this.dartTemp)},e}(),x=function(){function e(e,t,r,n,a,i){var o;this.dart=e,this.parameters=t,this.inBodyParameters=r,this.method=n,this.consumes=a,this.path=i,this.consume=this.consumes&&this.consumes.length&&this.consumes[0],this.consume=null!==(o=this.consume)&&void 0!==o?o:"application/json"}return e.prototype.parse=function(){return this.prepareParameterType(),-1!=this.consume.indexOf("multipart")?this.postFile():this.postNormal(),this.dart},e.prototype.prepareParameterType=function(){for(var e=0;e<this.parameters.length;e++)this.parameters[e].type&&(this.parameters[e].type=this.parameters[e].type.split(":")[0])},e.prototype.postFile=function(){for(var e,r=this.parameters,n=[],a=[],i={},o=0;o<r.length;o++){var s=r[o].in;i[s]||(i[s]=[]),i[s].push(r[o])}e=this.addHeaders(i,!0);var l=i.formData;if(this.inBodyParameters&&(l=this.inBodyParameters),l)for(o=0;o<l.length;o++){var p=l[o].name;if("file"==l[o].type){var u="file"+t.strToMethod(t.generateControllerName(p))+"Bytes",d="file"+t.strToMethod(t.generateControllerName(p))+"Name";a.push("\n                        if("+u+" != null) {\n                            MediaType mimeType = Utils.getMime( "+d+"!);\n                            request.files.add(new http.MultipartFile.fromBytes('"+p+"', "+u+" as List<int>, filename:  "+d+" , contentType:mimeType ));\n                        }\n                        ")}else n.push("request.fields['"+p+"'] = "+this.getValue(p,"",l[o].dataType)+";")}this.dart=this.dart.replace("{buildRequest}",this.makeHttpRequestFile(a)),this.dart=this.dart.replace("{prepareDataForUpdate}",this.prepareDataForUpdate(n)),this.dart=this.dart.replace("{prepareHeaderForUpdate}",this.prepareHeaderForUpdate(e))},e.prototype.makeHttpRequestFile=function(e){return'\n        Uri  uri = Uri.parse(getSaveUrl()); \n        var request = new http.MultipartRequest("'+this.method+'", uri);\n        '+(e.length?e.join("\n"):"")+"\n        \n            request.send().then((response) async {\n                \n                if (response.statusCode == 200) {\n                \n                    String body = await response.stream.bytesToString();\n                    saveCallback(jsonDecode(body), response.statusCode);\n                    Navigator.pop(context);\n                    Utils.showSnackText(context, body);\n                } else {\n                    Navigator.pop(context);\n                    Utils.showSnackText(context, response.statusCode.toString());\n                }\n            }).catchError((onError) {\n                Navigator.pop(context);\n                \n                Utils.showSnackText(context, onError.message);\n            });\n        "},e.prototype.postNormal=function(){for(var e,t=this.parameters,r=[],n={},a=0;a<t.length;a++){var i=t[a].in;n[i]||(n[i]=[]),n[i].push(t[a])}e=this.addHeaders(n,!1);var o="get"==this.method?n.query:n.formData;if(this.inBodyParameters.length>0&&(o=this.inBodyParameters),o){var s={};for(r.push("var formDatas = <String, dynamic>{};"),a=0;a<o.length;a++){var l=o[a].name,p=o[a].groupName;p?(s[p]||(s[p]=[]),s[p].push('"'+l+'": '+this.getValue(l,p,o[a].dataType))):r.push("formDatas['"+o[a].name+"'] = "+this.getValue(l,"",o[a].dataType)+";")}for(var u in s)r.push("formDatas['"+u+"'] = {"+s[u].join(",")+"};")}this.dart=this.dart.replace("{buildRequest}",this.makeHttpRequest(e,r)),this.dart=this.dart.replace("{prepareDataForUpdate}",this.prepareDataForUpdate(r)),this.dart=this.dart.replace("{prepareHeaderForUpdate}",this.prepareHeaderForUpdate(e))},e.prototype.makeHttpRequest=function(e,t){var r="formDatas";this.inBodyParameters&&(r="json.encode(formDatas)");var n="\n           response = await http.{method}(\n                uri,\n                "+(e.length?"headers: headers,":"")+"\n                "+(t.length&&!["get","delete"].includes(this.method)?"body: "+r+",":"")+"\n            );",a="get"==this.method?n.replace("{method}","get").replace(" body: json.encode(formDatas),",""):"if (getMethod() == 'put') {\n                "+n.replace("{method}","put")+"\n            }\n            else {\n                "+n.replace("{method}","post")+"\n            }";return"        \n        Uri  uri = Uri.parse(getSaveUrl())"+("get"==this.method?".replace(queryParameters: formDatas)":"")+"; \n        http.Response ? response;\n       "+a+"\n        if(getMethod() == 'put' ) {\n          if(response.statusCode == 200)\n            Navigator.of(context).pop();\n        }\n        else {\n          Navigator.of(context).pop();\n        }\n        saveCallback(jsonDecode(response.body), response.statusCode);\n        \n        Utils.showSnackText(context, response.body);  \n        "},e.prototype.prepareDataForUpdate=function(e){var t="var formDatas = <String, dynamic>{};";return e.length&&(t=e.join("\n")),(t+="\n")+"return formDatas;"},e.prototype.prepareHeaderForUpdate=function(e){var t="var headers = <String, dynamic>{};";return e.length&&(t=e.join("\n")),(t+="\n")+"return headers;"},e.prototype.addHeaders=function(e,t){var r=[];if(r.push("var headers = <String, String>{};"),r.push("headers['Content-Type'] = '"+this.consume+";charset=utf-8';"),e.header){var n=e.header;r.push("const storage = FlutterSecureStorage();");for(var a=0;a<n.length;a++)r.push("String? "+n[a].name+"Str = await storage.read(key: '"+n[a].name+"');"),r.push((t?"request.":"")+"headers['"+n[a].name+"'] = "+n[a].name+"Str ?? '';")}return r},e.prototype.getValue=function(e,r,n){var a=n&&["integer","number"].includes(n);n||(n="string");var i=e;r&&(i+="_"+r);var o=this.getParamTypes()[i],s=t.generateControllerName(r?r+"_"+e:e),l=a?"Utils.strToInt("+s+") : 0":s+' : ""',p=s+" != null ? "+l;if("multi_file"==o)p=s;else if("multi_select"==o)p=s+" != null ? "+s+" : []";else if("select"==o){var u=s+"![0].toString()";p=s+" != null ? "+(l=a?"Utils.strToInt("+u+") : 0":u+' : ""')}else"richtext"==o?p="await "+s+".getText()":"input"==o?p=a?"Utils.strToInt("+s+".text)":s+".text":"textarea"==o?p=s+".text":"check"==o?p=s+" != null ? ("+s+"! ? true : false) : false":"file"==o&&(p=s+"Src != null ? "+s+'Src : ""');return p},e.prototype.getParamTypes=function(){for(var e={},t=this.inBodyParameters.length>0?this.inBodyParameters:this.parameters,r=0;r<t.length;r++){var n=t[r].name;t[r].groupName&&(n+="_"+t[r].groupName),e[n]=t[r].type}return e},e}(),_=function(){function e(e,t,r){this.dart=e,this.ppp=t,this.method=r}return e.prototype.parse=function(){for(var e=this.ppp?Object.keys(this.ppp):[],r=t.getRawWidgetTemp("prepareDataForSelect",this.dart),n=[],a=[],i=r.inner,o=[],s=0;s<e.length;s++){var l=e[s],p=this.ppp[l];if(-1!=p.indexOf("select")){var u="bodyTable";p.split(":").length>1?(u="bodyConfig",a.push(l)):n.push(l),o.push(this.assign(l,u))}}return o.length>0?(i=i.replace("{assign}",o.join("\n")),this.dart=this.dart.replace(r.outter,i),this.dart=t.replaceKeyValueRegex({"{configFields}":a.length>0?'"'+a.join('", "')+'"':"","{tableFields}":n.length>0?'"'+n.join('", "')+'"':""},this.dart)):"put"==this.method?(i=i.replace("{assign}",""),this.dart=this.dart.replace(r.outter,i),this.dart=t.replaceKeyValueRegex({"{configFields}":"","{tableFields}":""},this.dart)):this.dart=this.dart.replace(r.outter,"bool loadedSelectData = true;"),this.dart},e.prototype.assign=function(e,r){var n=[],a=t.generateControllerName(e);return n.push("list"+a+" = jsonArrayToList("+r+'["data"]["'+e+'"]);'),n.join("\n")},e}(),F=function(){function e(e,t,r,n,a){this.rawControllerWidgetTemp={},this.bodyParameters=[],this.groupNameTitles={},this.assignPutFormData=[],this.dartTemp=e,this.dart=this.dartTemp,this.data=n,this.path=t,this.method=r,this.parameters=n.parameters,this.definitions=a}return e.prototype.generate=function(){return this.generateMain(),this.process3pParams(),this.generateWidgets(),this.parseFormElementMethods(),this.prepareDataForSelect(),this.assignPutForm(),this.dart=new x(this.dart,this.parameters,this.bodyParameters,this.method,this.data.consumes,this.path).parse(),this.replaceBuild(),this.dart=this.dart.replace("{saveLabelText}",this.getSaveLabelText()),this.dart},e.prototype.generateMain=function(){var e={"{className}":"Base"+t.strToMethod(this.path+":"+this.method)+"Page","{routeName}":this.path,"{pageTitle}":this.data.summary,"{method}":this.method};this.dart=t.replaceKeyValueRegex(e,this.dart)},e.prototype.replaceBuild=function(){var e=t.getRawWidgetTemp("buildListTable",this.dart);if(this.dart=this.dart.replace(e.outter,""),"post"==this.method||this.method,["post","put"].includes(this.method))"post"==this.method?(r=t.getRawWidgetTemp("buildPostForm",this.dart),this.dart=this.dart.replace(r.outter,r.inner),r=t.getRawWidgetTemp("buildPutForm",this.dart),this.dart=this.dart.replace(r.outter,"")):(r=t.getRawWidgetTemp("buildPutForm",this.dart),this.dart=this.dart.replace(r.outter,r.inner),r=t.getRawWidgetTemp("buildPostForm",this.dart),this.dart=this.dart.replace(r.outter,""));else{var r=t.getRawWidgetTemp("buildPostForm",this.dart);this.dart=this.dart.replace(r.outter,""),r=t.getRawWidgetTemp("buildPutForm",this.dart),this.dart=this.dart.replace(r.outter,"")}},e.prototype.generateWidgets=function(){for(var e=this.parameters,t=0;t<e.length;t++){var r=e[t].in,n=e[t].name;if("body"==r&&"body"==n){this.processBodyInBody(e[t].schema),(e=e.concat(this.bodyParameters)).splice(t,1);break}}var a={};for(t=0;t<e.length;t++){r=e[t].in;var i=e[t].name;if("header"!=r&&"path"!=r&&("body"!=i||"body"!=r)){if(this.ppp)if(Object.keys(this.ppp).includes(i))e[t].type=this.ppp[i].split(":")[0];else for(var o in this.ppp)if(-1!=o.indexOf(".")){var s=o.split(".");if(s.length>1){var l=s[1],p=s[0];if(i==l&&e[t].groupName==p){e[t].type=this.ppp[o].split(":")[0];break}}}else e[t].type="input";else"file"!=e[t].type&&(e[t].type="input");var u=e[t].type;a[u]||(a[u]=[]),a[u].push(this.generateWidget(e[t],u))}}for(var d in a)this.dart=this.dart.replace(this.rawControllerWidgetTemp[d].outter,a[d].join("\n"));this.clearUnUseWidget()},e.prototype.isTest=function(){return"put"==this.method&&"/owner-contracts/{id}"==this.path},e.prototype.processBodyInBody=function(e){if(e.allOf)for(var t=e.allOf,r=0;r<t.length;r++)t[r].$ref?this.processDefinition(t[r].$ref):t[r].required&&(this.requiredParams=t[r].required);else e.$ref&&this.processDefinition(e.$ref);for(r=0;r<this.bodyParameters.length;r++)this.requiredParams&&this.requiredParams.includes(this.bodyParameters[r].name)&&(this.bodyParameters[r].required=!0)},e.prototype.processDefinition=function(e,t){e=e.replace("#/definitions/","");var r=this.definitions[e],n=r.allOf;if(n){for(var a=0;a<n.length;a++)if(n[a].$ref){var i=n[a].$ref;this.processDefinition(i)}else if(r.properties){var o=r.properties;for(var s in o)this.bodyParameters.push({name:s,in:"body",groupName:t,type:o[s].type,dataType:o[s].type,description:o[s].description})}}else if(r.properties)for(var s in o=r.properties)if(o[s].$ref)i=o[s].$ref,this.processDefinition(i,s),this.groupNameTitles[s]=o[s].description?o[s].description:s;else if(o[s].properties){var l=o[s].properties;for(var p in this.groupNameTitles[s]=o[s].description?o[s].description:s,l)this.bodyParameters.push({name:p,in:"body",groupName:s,type:l[p].type,dataType:l[p].type,description:l[p].description})}else this.bodyParameters.push({name:s,in:"body",groupName:t,type:o[s].type,dataType:o[s].type,description:o[s].description})},e.prototype.clearUnUseWidget=function(){for(var e=[a.widgetKey,u.widgetKey,c.widgetKey,m.widgetKey,g.widgetKey,T.widgetKey,v.widgetKey,o.widgetKey,l.widgetKey,b.widgetKey,N.widgetKey],r=0;r<e.length;r++){var n=t.getRawWidgetTemp(e[r],this.dart);n&&(this.dart=this.dart.replace(n.outter,""))}},e.prototype.process3pParams=function(){var e=this.parameters,t=[];for(var r in e){var n=e[r];if("3p"==n.name)for(var a in this.ppp=n.default,this.ppp)this.ppp[a]="richtext"==this.ppp[a]?"textarea":this.ppp[a],this.ppp[a]="image"==this.ppp[a]?"file":this.ppp[a];else t.push(n)}this.parameters=t},e.prototype.generateWidget=function(e,t){var r=new S(e,this.dartTemp);return this.rawControllerWidgetTemp[t]=r.getWidget().getRawTemp(this.dart),r.generateWidget()},e.prototype.parseFormElementMethods=function(){for(var e=0,r=this.bodyParameters.length>0?this.bodyParameters:this.parameters,n=[],a={},i="",o=0;o<r.length;o++)if(!["header","path"].includes(r[o].in)){var s=r[o].groupName,l=r[o].name;if(this.assignDataForPutForm(r[o]),s&&(l=s+"_"+l),s)i!=s&&(n.push("group:"+s),i=s,a[s]=[]),a[s].push("gen"+t.strToMethod(l)+"Widget()");else if("get"==this.method){var p="true";this.getInvisibleFormFields().includes(l)&&(p="false",e++),n.push("Visibility( child: SizedBox( width: 240, child: gen"+t.strToMethod(l)+"Widget()), visible: "+p+")")}else n.push("gen"+t.strToMethod(l)+"Widget()")}if(a)for(o=0;o<n.length;o++)if("group:"==n[o].substring(0,"group:".length)){var u=n[o].split(":")[1];n[o]="\n      TitledContainer(\n        titleText: '{title}',\n        child: Column(\n          children: [{list}]))\n      ".replace("{list}",a[u].join(",")),n[o]=n[o].replace("{title}",this.groupNameTitles[u])}this.dart=this.dart.replace("{invisibleSearchFormField}",e+""),this.dart=this.dart.replace("{formElementMethods}",n.join(", "))},e.prototype.getInvisibleFormFields=function(){return[]},e.prototype.prepareDataForSelect=function(){this.dart=new _(this.dart,this.ppp,this.method).parse()},e.prototype.assignPutForm=function(){this.dart=this.dart.replace("{assignDataForPutForm}",this.assignPutFormData?this.assignPutFormData.join("\n"):"")},e.prototype.assignDataForPutForm=function(e){if("put"==this.method){var t=e.name,r=e.groupName;this.assignPutFormData.push(this.setValue(e).replace(/{value}/g,'json["data"]'+(r?'["'+r+'"]':"")+'["'+t+'"]'))}},e.prototype.setValue=function(e){var r=e.name,n=e.groupName,a=e.dataType,i=e.type,o=a&&["integer","number"].includes(a);a||(a="string");var s=t.generateControllerName(n?n+"_"+r:r),l=o?s+" = Utils.strToInt({value})":s+" = {value}";return["multi_select","select"].includes(i)?l=s+" = "+("multi_select"==i?"{value}":"{value} != null ? [{value}] : {value}"):"richtext"==i?l=s+".setText({value})":"input"==i||"textarea"==i?l=s+".text = "+(o?"Utils.formatNumberText({value})":"Utils.strNullToEmpty({value}.toString())"):"check"==i?l=s+" = {value}":"file"==i&&(l="assign"+s+"ForPutForm({value})"),l+";"},e.prototype.getSaveLabelText=function(){return"Save"},e}(),W=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.columns=[],t.inQueryColSpecs=null,t.colsHasSearch=[],t}return W(r,e),r.prototype.replaceBuild=function(){var e=t.getRawWidgetTemp("buildPostForm",this.dart);this.dart=this.dart.replace(e.outter,""),e=t.getRawWidgetTemp("buildPutForm",this.dart),this.dart=this.dart.replace(e.outter,""),e=t.getRawWidgetTemp("buildListTable",this.dart),this.dart=this.dart.replace(e.outter,e.inner)},r.prototype.generateMain=function(){e.prototype.generateMain.call(this),this.assignColumnNames();var r={"{genColList}":this.columns.length>0?"{"+this.columns.join(",")+"}":"{}","{path}":this.path};this.dart=t.replaceKeyValueRegex(r,this.dart)},r.prototype.assignColumnNames=function(){var e=this;try{var r=this.getResponseProps();Object.keys(r).forEach((function(n,a){var i=r[n].description,o="",s=t.strToMethod(n),l=t.generateControllerName(n);e.getColumnsHasSearch().includes(n)&&(o=",searchWidget: gen"+s+"Widget(),\n          searchController: "+l);var p="",u=e.getInQueryColSpecs();u[n]&&(p=', colType: "'+u[n]+'"'),e.columns.push("'"+n+"': ColSpecs(name: '"+(i||n)+"'"+("id"==n?",width: 100, alignment: Alignment.center":"")+p+o+")")}))}catch(e){console.error(e)}},r.prototype.getInQueryColSpecs=function(){if(!this.inQueryColSpecs&&(this.inQueryColSpecs={},this.parameters))for(var e=0;e<this.parameters.length;e++)"3p"==this.parameters[e].name&&(this.inQueryColSpecs=this.parameters[e].default);return this.inQueryColSpecs},r.prototype.getColumnsHasSearch=function(){if(0==this.colsHasSearch.length&&this.parameters)for(var e=0;e<this.parameters.length;e++)"query"==this.parameters[e].in&&this.colsHasSearch.push(this.parameters[e]);return this.colsHasSearch.length>0?this.colsHasSearch.map((function(e){return e.name})):[]},r.prototype.getInvisibleFormFields=function(){return Object.keys(this.getResponseProps())},r.prototype.getResponseProps=function(){if(!this.data.responses[200].schema)return{};var e=this.data.responses[200].schema.items,t={};if(e)if(e.properties)t=e.properties;else if(e.$ref){var r=e.$ref.replace("#/definitions/","");t=this.definitions[r].properties}return t},r.prototype.getSaveLabelText=function(){return"Search"},r}(F),D=new(function(){function e(){this.flutterWidgets=[],this.baseFilename="package:backend_flutter/backend_generator/base_backend.dart"}return e.prototype.init=function(e){return t=this,r=void 0,a=function(){var t;return function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(r){switch(r.label){case 0:return this.swaggerJsonUrl=e,[4,fetch(e)];case 1:return[4,r.sent().json()];case 2:return t=r.sent(),this.swaggerJson=t,this.dartTemp="\nclass {className} extends StatefulWidget {\n    static const String routeName = '{routeName}';\n    const {className}({Key? key}) : super(key: key);\n    @override\n    State<{className}> createState() => {className}State();\n}\n\nclass {className}State extends State<{className}> {\n    final _formKey = GlobalKey<FormState>();\n    String getMethod() {\n        return '{method}';\n    }\n    {buildPostForm} \n    @override\n    Widget build(BuildContext context) {\n        return Layout(\n            title: '{pageTitle}',\n            page: SingleChildScrollView(\n                child: Row(children: [\n                colLeftRight(),\n                Expanded(flex: 3, child:  genForm() ),\n                colLeftRight(),\n            ])));\n    }\n    Widget colLeftRight() {\n        return Expanded(\n            flex: Utils.isSmallScreen(context) ? 0 : 1,\n            child: const SizedBox(),\n        );\n    }\n    \n    {/buildPostForm}\n\n    {buildPutForm} \n    \n    @override\n    Widget build(BuildContext context) { \n        if(getMethod() == 'put') { \n            return FutureBuilder<dynamic>(\n                future: assignDataForPutForm(),\n                builder: (context, snapshot) {\n                if (snapshot.hasError) {\n                    print(snapshot.error);\n                    return Text('There was an error :(');\n                } else if (snapshot.hasData) {\n                    return genForm();\n                } else {\n                    return Column(children: [SizedBox(child: CircularProgressIndicator(), width: 50, height: 50)]);\n                }\n            });\n        } \n        return Layout(\n            title: '{pageTitle}',\n            page:   SingleChildScrollView(\n                    child: Row(children: [\n                    colLeftRight(),\n                    Expanded(flex: 5, child: genForm()),\n                    colLeftRight(),\n                ]))\n            ); \n    }\n\n    Widget colLeftRight() {\n        return Expanded(\n            flex: Utils.isSmallScreen(context) ? 0 : 1,\n            child: const SizedBox(),\n        );\n    }\n    void save () async {\n        Template.showLoading(context);\n        var formDatas = prepareDataForUpdate();\n        var headers = prepareHeaderForUpdate();\n        {buildRequest} \n    }\n    Widget genForm() {\n        List<Widget> elements = [];\n        elements.addAll(formElements());\n        elements.add(formButton());\n\n        return Form(\n            key: _formKey,\n            child: Padding(\n                padding: const EdgeInsets.all(16),\n                child:  Column(\n                    crossAxisAlignment: CrossAxisAlignment.start, \n                    children: elements\n                )\n                 \n            )\n        );\n    }\n    \n    Widget formButton() {\n        return Center(\n            child: EButton(\n                text: \"{saveLabelText}\",\n                onPress: () {\n                    if (_formKey.currentState!.validate()) {\n                        save(); \n                    }\n                }\n            )\n        );\n    }\n\n    {/buildPutForm}\n    \n    {buildListTable}\n    @override\n    Widget build(BuildContext context) {\n        return Layout(\n            title: '{pageTitle}',\n            hasSearch: formElements().isNotEmpty && invisibleSearchFormField != formElements().length,\n            searchForm:  genForm(),\n            exportWidget: exportWidget(),\n            hasCreateButton: true,\n            createRouteName: getCreatePageRouteName(),\n            page:  getTableGrid()\n        );\n    }  \n    exportWidget() {\n        return null;\n    }\n\n    \n    Widget getTableGrid() {\n        return loadedSelectData\n        ? TableGrid(\n            listCol: getListCol(),\n            listUrl: '$apiBasePath{path}',\n            deleteUrl: '$apiBasePath{path}',\n            onDelete: (id) {\n                Utils.showSnackText(context, 'Deleted id $id');\n            },\n            onEdit: (id) {\n                onEditRow(id);\n            },\n            queryParameters: prepareDataForUpdate(),\n            refesh: () => refresh()\n            \n        )\n        : SizedBox();\n    }\n    \n\n    Map<String, ColSpecs> getListCol() {\n        return {genColList};\n    }\n    void onEditRow(dynamic id) {}\n   \n    refresh() {\n         \n        setState(() {});\n    } \n    String ? getCreatePageRouteName() {\n        return null;\n    }\n\n    void save () async {\n        refresh();\n    }\n\n    Widget genForm() {\n        List<Widget> elements = [];\n        elements.addAll(formElements()); \n        return Form(key: _formKey, child: Row(children: elements));\n    }\n    \n    Widget formButton() {\n        return SizedBox(\n            width: 120,\n            child: EButton(\n                icon: const Icon(Icons.search),\n                text: \"Search\",\n                onPress: () {\n                    if (_formKey.currentState!.validate()) {\n                    save();\n                    }\n                }));\n    }\n    {/buildListTable}\n\n   \n    {prepareDataForSelect} \n    bool loadedSelectData = false;\n    @override\n    void initState() {\n        super.initState();  \n        Future process = prepareDataForSelect();\n         \n        Utils.callbackAffterBuilded(() {\n            process.then(\n                (value) {\n                    loadedSelectData = true; \n                    setState(() {}); \n                },\n            );\n           \n        });\n    }\n\n    Map<String, dynamic>? jsonFormData;\n    Future assignDataForPutForm() async {\n       \n        if (jsonFormData != null) {\n            return jsonFormData;\n          }\n        String token = await Utils.getToken();\n        String res = await Utils.httpGet(\n        url: getSaveUrl(),\n            headers: {\"token\": token},\n        );\n        Map<String, dynamic> json = jsonDecode(res);\n        {assignDataForPutForm}\n        jsonFormData = json;\n        return json;\n    }\n\n    late Map<String, dynamic> bodyConfig;\n    late Map<String, dynamic> bodyTable;\n\n    Future prepareDataForSelect () async {\n        try {\n            String token = await Utils.getToken();\n \n            List configFields = [{configFields}];//[\"phone\", \"email\"];\n            List tableFields = [{tableFields}];\n            if (configFields.length > 0) {\n                String resConfigData = await Utils.httpGet(\n                    url: apiSystemConfigPath,\n                    headers: {\"token\": token},\n                    params: {\"fields\": configFields.join(\",\")});\n                bodyConfig = jsonDecode(resConfigData);\n            }\n            if(tableFields.length > 0) {\n                String resTableData = await Utils.httpGet(\n                url: apiTableDataPath,\n                headers: {\"token\": token},\n                params: {\"fields\": tableFields.join(\",\")});\n                bodyTable = jsonDecode(resTableData);\n            }\n            {assign}\n        } catch (e) {}\n    }\n    \n    List<ButtonSelectDialogItem> jsonArrayToList(jas) {\n        List<ButtonSelectDialogItem> list = [];\n\n        if (jas != null) {\n            for (int i = 0; i < jas.length; i++) {\n                if (jas[i]['disabled'] != true)\n                    list.add(ButtonSelectDialogItem(\n                        id:  jas[i]['id'] != null ? jas[i]['id'] : jas[i]['code'] , \n                        name: jas[i]['name'] != null ? jas[i]['name'] : (jas[i]['fullname'] ?? jas[i]['username'] ?? ''),\n                        data: jas[i],\n                    ));\n            }\n        }\n        return list;\n    }\n    {/prepareDataForSelect}\n  \n    prepareDataForUpdate()  {\n        {prepareDataForUpdate} \n    }\n\n    prepareHeaderForUpdate() {\n        {prepareHeaderForUpdate} \n    }\n    \n    saveCallback(body, statusCode) {}\n\n    String getSaveUrl() {\n        return '$apiBasePath{routeName}';\n    }\n\n    int invisibleSearchFormField = {invisibleSearchFormField};\n    List<Widget> formElements() {\n        return [{formElementMethods}];\n    }\n\n    \n    {formInput}\n    final TextEditingController {formElControllerName} = TextEditingController();\n    String {formElControllerName}Value = '';\n    \n    Widget {formElWidgetName}() {\n        return Template.genTextFormFieldWidget(\n            controller: {formElControllerName},\n            label: '{formElCaption}',\n            onChange:  () => onWidgetChange(widgetMethod: '{formElWidgetName}', widgetController: {formElControllerName}),\n            onClear:  () => onWidgetChange(delay: false),\n            {formElNumberOnly}\n            keyboardType: TextInputType.number,\n            {/formElNumberOnly}\n            {formElValidator}\n            validator: (value) {\n                if (value == null || value.isEmpty) {\n                    return '{formElCaption} không được bỏ trống';\n                }\n                return null;\n            }\n            {/formElValidator}\n        );\n    }\n\n    {/formInput}\n    \n    Timer? debounce;\n    onWidgetChange({delay = true, String widgetMethod = '', widgetController}) {\n        if (getMethod() == 'get') {\n          if (!delay) {\n            save();\n          } else {\n            if (debounce?.isActive ?? false) debounce!.cancel();\n            debounce = Timer(const Duration(milliseconds: 500), () {\n              save();\n            });\n          }\n        } else {\n          setState(() {});\n        }\n    }    \n\n\n    {formTextarea}\n    final TextEditingController {formElControllerName} = TextEditingController();\n    Widget {formElWidgetName}() {\n        return Template.genTextFormFieldWidget(\n            controller: {formElControllerName},\n            maxLines: 3,\n            label: '{formElCaption}',\n            onChange:  () => onWidgetChange(widgetMethod: '{formElWidgetName}', widgetController: {formElControllerName}),\n            onClear:  () => onWidgetChange(delay: false),\n            {formElNumberOnly}\n            keyboardType: TextInputType.number,\n            {/formElNumberOnly}\n            {formElValidator}\n            validator: (value) {\n                if (value == null || value.isEmpty) {\n                    return '{formElCaption} không được bỏ trống';\n                }\n                return null;\n            }\n            {/formElValidator}\n        );\n    }\n    {/formTextarea}\n\n    {formCheck}\n    bool ? {formElControllerName};\n    Widget {formElWidgetName}() {\n        return Padding(\n            padding: getWidgetPadding(),\n            child: CheckWidget(\n                text: '{formElCaption}',\n                checked: {formElControllerName},\n                onChange: (val) {\n                    {formElControllerName}Change(val);\n                },\n            )\n        );\n    }\n\n    {formElControllerName}Change(bool ? val) {\n        {formElControllerName} = val;\n    }\n\n    {/formCheck}\n\n    {formDate}\n    String ?   {formElControllerName};\n    Widget {formElWidgetName}() {\n        return Padding(\n            padding: getWidgetPadding(),\n            child: DateWidget(\n                hintText: '{hintText}',\n                withTime: false,\n                initValue: {formElControllerName},\n                onChange: (value) {\n                    {formElControllerName}Change(value); \n                    if (getMethod() == 'get') {\n                        save();\n                    } \n                },\n              )\n        );\n    }\n\n    {formElControllerName}Change(String ? value) {\n        {formElControllerName} = value;\n        print(value);\n    }\n    {/formDate}\n\n    {formDatetime}\n    String ?   {formElControllerName};\n    Widget {formElWidgetName}() {\n        return Padding(\n            padding: getWidgetPadding(),\n            child: DateWidget(\n                hintText: '{hintText}',\n                withTime: true,\n                initValue: {formElControllerName},\n                onChange: (value) {\n                    {formElControllerName}Change(value);\n                    if (getMethod() == 'get') {\n                        save();\n                    } \n                },\n              )\n        );\n    }\n    {formElControllerName}Change(String ? value) {\n        {formElControllerName} = value;\n        print(value);\n    }\n    {/formDatetime}\n\n    {formTime}\n    String ?   {formElControllerName};\n    Widget {formElWidgetName}() {\n        return Padding(\n            padding: getWidgetPadding(),\n            child: TimeWidget(\n                hintText: '{hintText}', \n                initValue: {formElControllerName},\n                onChange: (value) {\n                    {formElControllerName}Change(value);\n                    if (getMethod() == 'get') {\n                        save();\n                    } \n                },\n              )\n        );\n    }\n    {formElControllerName}Change(String ? value) {\n        {formElControllerName} = value;\n        print(value);\n    }\n    {/formTime}\n\n    {formRichtext}\n    final HtmlEditorController {formElControllerName} = HtmlEditorController();\n    Widget {formElWidgetName}() {\n        return Padding(\n            padding: getWidgetPadding(),\n            child: Container(\n            decoration: BoxDecoration(\n                border: Border.all(\n                width: 1,\n                color: borderColor,\n                ),\n                borderRadius: BorderRadius.circular(5),\n            ),\n            child: HtmlEditor(\n                controller: {formElControllerName},\n                htmlEditorOptions: const HtmlEditorOptions(\n                    hint: 'Nhập {formElCaption} ...',\n                    shouldEnsureVisible: true,\n                    initialText: \"{initialText}\",\n                ),\n                otherOptions:\n                    OtherOptions(height: 250),\n            ),\n            ));\n    }\n    {/formRichtext}\n\n    \n    {formElFile}\n    String ? {fileName};\n    String ? {fileName}Src;\n    Key {fileName}Key = Key('{fileName}');\n    Widget {formElWidgetName}() {\n        return Padding(\n            padding: getWidgetPadding(),\n            child: ImageUploadFile(\n                key: {fileName}Key,\n                label: '{fileDesc}',\n                initialValue: {fileName}Src,\n                onChange: (src) => {fileName}Src = src.toString().replaceAll('undefined', '')\n            ),\n        );\n    }\n    \n    assign{fileName}ForPutForm(dynamic val) {\n        if(val != null) {\n            {fileName}Src = val;\n            {fileName} = val.toString().split(\"/\").last;\n        }\n        else {\n            {fileName}Src = null;\n            {fileName} = null;\n        }\n    }\n    {/formElFile} \n\n    {formElMultiFile}\n    List<dynamic> ? {formElControllerName};\n    Widget {formElWidgetName}() {\n        return MultipleUpload(\n            initialValue: {formElControllerName} != null\n            ? ({formElControllerName} as List)\n                .map((item) => item as String)\n                .toList()\n            : null,\n            label: '{formElCaption}',\n            required: {formElRequired},\n            onChange: (srcs) {\n                {formElControllerName} = srcs;\n            },\n        );\n    } \n    {/formElMultiFile} \n \n    {formElSelect}\n    List<dynamic> ? {formElControllerName};\n    List<ButtonSelectDialogItem>  ? list{formElControllerName};\n    Widget {formElWidgetName}() {\n            \n        return Padding(\n            padding: getWidgetPadding(),\n            child: ButtonSelectDialog(\n            multiple: false,\n            hintText: '{formElCaption}',\n            dialogTitle: '{formElCaption}',\n            selectedIds: {selectedIds},\n            data: list{formElControllerName} != null ? list{formElControllerName}! : [],\n            onChange: (List<dynamic>? selectedIds) {\n                {formElControllerName}Change(selectedIds);\n                if (getMethod() == 'get') {\n                    save();\n                } \n            },\n        )); \n    }\n    {formElControllerName}Change(List<dynamic>? selectedIds) {\n        this.{formElControllerName} = selectedIds;\n        print(selectedIds.toString());\n    }\n    {/formElSelect}\n\n    {formElMultiSelect}\n    List<dynamic> ? {formElControllerName};\n    List<ButtonSelectDialogItem>  ? list{formElControllerName};\n    Widget {formElWidgetName}() {\n            \n        return Padding(\n            padding: getWidgetPadding(),\n            child: ButtonSelectDialog(\n            multiple: true,\n            hintText: '{formElCaption}',\n            dialogTitle: 'Danh sách {formElCaption}',\n            selectedIds: {selectedIds},\n            data: list{formElControllerName} != null ? list{formElControllerName}! : [],\n            onChange: (List<dynamic>? selectedIds) {\n                {formElControllerName}Change(selectedIds);\n                if (getMethod() == 'get') {\n                    save();\n                } \n            },\n        )); \n    }\n    \n    {formElControllerName}Change(List<dynamic>? selectedIds) {\n        this.{formElControllerName} = selectedIds;\n        print(selectedIds.toString());\n    }\n\n    {/formElMultiSelect} \n\n    getWidgetPadding() {\n        return const EdgeInsets.all(10);\n    }\n}",[2]}}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,s)}l((a=a.apply(t,r||[])).next())}));var t,r,n,a},e.prototype.execute=function(){var e=this.swaggerJson.paths;for(var t in this.flutterWidgets.push("<p>"+this.baseFilename+"</p>"),this.flutterWidgets.push("<textarea>"),this.flutterWidgets.push("import 'dart:convert';\nimport 'dart:async';\nimport 'package:flutter/material.dart';\nimport 'package:backend_flutter/views/layout/layout.dart';\nimport 'package:http/http.dart' as http;\nimport 'package:backend_flutter/utils/Template.dart';\nimport 'package:backend_flutter/views/widgets/EButton.dart';\nimport 'package:backend_flutter/utils/Utils.dart';\nimport 'package:backend_flutter/consts/consts.dart';\nimport 'package:backend_flutter/views/widgets/ButtonSelectDialog.dart';\nimport 'package:backend_flutter/views/widgets/Check.dart';\nimport 'package:backend_flutter/views/widgets/TitleContainer.dart';\nimport 'package:backend_flutter/views/widgets/Time.dart';\nimport 'package:backend_flutter/views/widgets/Date.dart';\nimport 'package:backend_flutter/views/widgets/ImageUploadFile.dart';\nimport '../views/widgets/TableGrid.dart';\nimport '../views/widgets/MultipleUpload.dart';\n"),e){var r=e[t];for(var n in r)this.addBaseClass(t,n,r)}this.flutterWidgets.push("</textarea>")},e.prototype.addBaseClass=function(e,t,r){var n=r[t];this.generateDartCode(e,t,n)},e.prototype.generateDartCode=function(e,t,r){if("delete"!=t.toLowerCase())if("get"==t){var n=new P(this.dartTemp,e,t,r,this.swaggerJson.definitions);this.flutterWidgets.push(n.generate())}else"put"==t&&(n=new F(this.dartTemp,e,t,r,this.swaggerJson.definitions),this.flutterWidgets.push(n.generate()))},e.prototype.getFlutterWidgets=function(){return this.flutterWidgets},e}());D.init("http://localhost:8800/api-docs").then((function(e){D.execute(),document.getElementById("flutter_widget").innerHTML=D.getFlutterWidgets().join("\n")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQzNGLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9XaWRnZXQudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9JbnB1dC50cyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvd2lkZ2V0L0ZpbGUudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9NdWx0aUZpbGUudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9TZWxlY3QudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9NdWx0aVNlbGVjdC50cyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvd2lkZ2V0L0RhdGUudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9EYXRldGltZS50cyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvd2lkZ2V0L1JpY2h0ZXh0LnRzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy93aWRnZXQvQ2hlY2sudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9UZXh0YXJlYS50cyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvd2lkZ2V0L1RpbWUudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3dpZGdldC9XaWRnZXRGYWN0b3J5LnRzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9CdWlsZFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL1ByZXBhcmVTZWxlY3REYXRhLnRzIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9HZW5Gb3JtQ2xhenoudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0dlbkxpc3RDbGF6ei50cyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL2ZsdXR0ZXIudHMiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL2RhcnRfdGVtcGxhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFV0aWxzIHtcbiAgc3RhdGljIHN0clRvTWV0aG9kKHN0cjogc3RyaW5nLCBzcGVyYXRvcjogc3RyaW5nID0gXCJcIik6IHN0cmluZyB7XG4gICAgdmFyIHNzID0gc3RyLm1hdGNoKC9bYS16QS1aXSsvZyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3NbaV0gPSB0aGlzLnVjZmlyc3Qoc3NbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gc3Muam9pbihzcGVyYXRvcik7XG4gIH1cblxuICBzdGF0aWMgdWNmaXJzdChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbiAgfVxuXG4gIHN0YXRpYyByZXBsYWNlS2V5VmFsdWVSZWdleChrdiA6IGFueSwgcyA6IHN0cmluZykgOiBzdHJpbmcgIHtcbiAgICBmb3IgKHZhciBrIGluIGt2KSB7XG4gICAgICAgIHZhciBmaW5kID0gbmV3IFJlZ0V4cChrLCBcImdcIik7XG4gICAgICAgIHMgPSBzLnJlcGxhY2UoZmluZCwga3Zba10pO1xuICAgIH1cbiAgICByZXR1cm4gcztcbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZUNvbnRyb2xsZXJOYW1lKG5hbWUgOiBzdHJpbmcsIGdyb3VwTmFtZSA/OiBzdHJpbmcpIDogc3RyaW5nIHtcbiAgICBcbiAgICBpZihuYW1lLmluZGV4T2YoJy4nKSkge1xuICAgICAgXG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKCcuJywnXycpO1xuICAgIH1cbiAgICBuYW1lID0gZ3JvdXBOYW1lID8gZ3JvdXBOYW1lKydfJytuYW1lIDogbmFtZTtcbiAgICByZXR1cm4gbmFtZSsnQ29udHJvbGxlcic7XG4gIH1cblxuICBzdGF0aWMgZ2V0UmF3V2lkZ2V0VGVtcCh0YWdOYW1lIDogc3RyaW5nLCBkYXJ0VGVtcCA6IHN0cmluZykge1xuICAgIHZhciBkeW5hbWljUGFydCA9IFwie1wiK3RhZ05hbWUrXCJ9KFtcXFxcc1xcXFxTXSo/KXsvXCIrdGFnTmFtZStcIn1cIjsgXG4gICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKGR5bmFtaWNQYXJ0LCAnZycpOyBcbiAgICAgIFxuICAgICAgdmFyIG1hdGNoID0gcmVnZXguZXhlYyhkYXJ0VGVtcCk7ICBcbiAgICAgIGlmKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiB7IG91dHRlcjogbWF0Y2hbMF0sIGlubmVyOiBtYXRjaFsxXSB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbiBcbn1cbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL1V0aWxzXCI7XHJcblxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFdpZGdldCB7XHJcbiAgXHJcbiAgcHVibGljIGFic3RyYWN0IGdlbmVyYXRlKCkgOiBzdHJpbmc7XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRSYXdUZW1wS2V5KCkgOiBzdHJpbmc7XHJcblxyXG4gIHB1YmxpYyBnZXRSYXdUZW1wKGRhcnRUZW1wIDogc3RyaW5nKSA6IGFueSB7XHJcbiAgICAgIHZhciB0YWdOYW1lID0gdGhpcy5nZXRSYXdUZW1wS2V5KCk7XHJcbiAgICAgIHJldHVybiBVdGlscy5nZXRSYXdXaWRnZXRUZW1wKHRhZ05hbWUsIGRhcnRUZW1wKTsgIFxyXG4gIH07XHJcblxyXG4gIHByb3RlY3RlZCBnZW5lcmF0ZUNvbnRyb2xsZXJOYW1lKHBhcmFtZXRlciA6IGFueSkgOiBzdHJpbmcge1xyXG4gICAgdmFyIHdpZGV0TmFtZSA9IHBhcmFtZXRlci5uYW1lO1xyXG4gICAgd2lkZXROYW1lID0gcGFyYW1ldGVyLmdyb3VwTmFtZSA/IHBhcmFtZXRlci5ncm91cE5hbWUrJ18nK3dpZGV0TmFtZSA6IHdpZGV0TmFtZTtcclxuICAgIHJldHVybiB3aWRldE5hbWUrJ0NvbnRyb2xsZXInO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdlbmVyYXRlV2lkZ2V0TmFtZShwYXJhbWV0ZXI6IGFueSkgOiBzdHJpbmcge1xyXG4gICAgdmFyIHdpZGV0TmFtZSA9IHBhcmFtZXRlci5uYW1lO1xyXG4gICAgd2lkZXROYW1lID0gcGFyYW1ldGVyLmdyb3VwTmFtZSA/IHBhcmFtZXRlci5ncm91cE5hbWUrJ18nK3dpZGV0TmFtZSA6IHdpZGV0TmFtZTtcclxuICAgIHJldHVybiAnZ2VuJytVdGlscy5zdHJUb01ldGhvZCh3aWRldE5hbWUpKydXaWRnZXQnO1xyXG4gIH1cclxuIFxyXG59IiwiaW1wb3J0IHsgaXNCdWZmZXIgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL1V0aWxzXCI7XHJcbmltcG9ydCB7IFdpZGdldCB9IGZyb20gXCIuL1dpZGdldFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0IGV4dGVuZHMgV2lkZ2V0IHtcclxuICBwcml2YXRlIHBhcmFtZXRlcjogYW55O1xyXG4gIHByaXZhdGUgZGFydFRlbXA6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IocGFyYW1ldGVyOiBhbnksIGRhcnRUZW1wOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnBhcmFtZXRlciA9IHBhcmFtZXRlcjtcclxuICAgIHRoaXMuZGFydFRlbXAgPSBkYXJ0VGVtcDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlKCk6IHN0cmluZyB7IFxyXG4gICAgdmFyIG1hdGNoID0gdGhpcy5nZXRSYXdUZW1wKHRoaXMuZGFydFRlbXApO1xyXG4gICAgdmFyIG91dHRlciA9IG1hdGNoLm91dHRlcjtcclxuICAgIHZhciBpbm5lciA9IG1hdGNoLmlubmVyO1xyXG4gICAgIFxyXG4gICAgbGV0IGNvbmZpZzogYW55ID0ge1xyXG4gICAgICBcIntmb3JtRWxDb250cm9sbGVyTmFtZX1cIjogdGhpcy5nZW5lcmF0ZUNvbnRyb2xsZXJOYW1lKHRoaXMucGFyYW1ldGVyKSxcclxuICAgICAgXCJ7Zm9ybUVsV2lkZ2V0TmFtZX1cIjogdGhpcy5nZW5lcmF0ZVdpZGdldE5hbWUodGhpcy5wYXJhbWV0ZXIpLFxyXG4gICAgICBcIntmb3JtRWxDYXB0aW9ufVwiOiB0aGlzLnBhcmFtZXRlci5kZXNjcmlwdGlvblxyXG4gICAgICAgID8gdGhpcy5wYXJhbWV0ZXIuZGVzY3JpcHRpb25cclxuICAgICAgICA6IHRoaXMucGFyYW1ldGVyLm5hbWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGlubmVyID0gVXRpbHMucmVwbGFjZUtleVZhbHVlUmVnZXgoY29uZmlnLCBpbm5lcik7XHJcbiAgICBpbm5lciA9IHRoaXMucGFyc2VWYWxpZGF0b3IoaW5uZXIpO1xyXG4gICAgIFxyXG4gICAgaW5uZXIgPSB0aGlzLnBhcnNlTnVtYmVyT25seShpbm5lcik7XHJcbiAgICByZXR1cm4gaW5uZXI7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBhcnNlVmFsaWRhdG9yKGlubmVyOiBzdHJpbmcpIHtcclxuICAgIHZhciByZWdleFZhbGlkYXRvciA9IC97Zm9ybUVsVmFsaWRhdG9yfShbXFxzXFxTXSo/KXtcXC9mb3JtRWxWYWxpZGF0b3J9L2c7XHJcbiAgICB2YXIgbWF0Y2ggPSByZWdleFZhbGlkYXRvci5leGVjKGlubmVyKTtcclxuICAgIHZhciBvdXR0ZXJWYWxpZCA9IG1hdGNoWzFdO1xyXG4gICAgdmFyIGlubmVyVmFsaWQgPSBtYXRjaFswXTtcclxuXHJcbiAgICBpZiAodGhpcy5wYXJhbWV0ZXIucmVxdWlyZWQpIHtcclxuICAgICAgaW5uZXIgPSBpbm5lci5yZXBsYWNlKGlubmVyVmFsaWQsIG91dHRlclZhbGlkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlubmVyID0gaW5uZXIucmVwbGFjZShpbm5lclZhbGlkLCBcIlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbm5lcjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGFyc2VOdW1iZXJPbmx5KGlubmVyOiBzdHJpbmcpIHtcclxuICAgIHZhciBtYXRjaCA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAoJ2Zvcm1FbE51bWJlck9ubHknLCBpbm5lcik7XHJcbiAgICAgXHJcbiAgICB2YXIgb3V0dGVyVmFsaWQgPSBtYXRjaC5vdXR0ZXI7XHJcbiAgICB2YXIgaW5uZXJWYWxpZCA9IG1hdGNoLmlubmVyO1xyXG5cclxuICAgIGlmICh0aGlzLnBhcmFtZXRlci5kYXRhVHlwZSA9PSAnaW50ZWdlcicpIHtcclxuICAgICAgaW5uZXIgPSBpbm5lci5yZXBsYWNlKG91dHRlclZhbGlkLCBpbm5lclZhbGlkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlubmVyID0gaW5uZXIucmVwbGFjZShvdXR0ZXJWYWxpZCwgXCJcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5uZXI7XHJcbiAgfVxyXG4gXHJcbiAgcHVibGljIHN0YXRpYyB3aWRnZXRLZXkgPSAnZm9ybUlucHV0JztcclxuICBwdWJsaWMgZ2V0UmF3VGVtcEtleSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIElucHV0LndpZGdldEtleTtcclxuICB9ICBcclxuIFxyXG59XHJcbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL1V0aWxzXCI7XHJcbmltcG9ydCB7IFdpZGdldCB9IGZyb20gXCIuL1dpZGdldFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGUgZXh0ZW5kcyBXaWRnZXQge1xyXG4gIHByaXZhdGUgcGFyYW1ldGVyOiBhbnk7XHJcbiAgcHJpdmF0ZSBkYXJ0VGVtcDogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXI6IGFueSwgZGFydFRlbXA6IHN0cmluZykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMucGFyYW1ldGVyID0gcGFyYW1ldGVyO1xyXG4gICAgdGhpcy5kYXJ0VGVtcCA9IGRhcnRUZW1wO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGUoKTogc3RyaW5nIHtcclxuICAgIHZhciBtYXRjaCA9IHRoaXMuZ2V0UmF3VGVtcCh0aGlzLmRhcnRUZW1wKTtcclxuICAgIHZhciBvdXR0ZXIgPSBtYXRjaC5vdXR0ZXI7XHJcbiAgICB2YXIgaW5uZXIgPSBtYXRjaC5pbm5lcjtcclxuICAgIHZhciBjb250cm9sbGVyTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZSh0aGlzLnBhcmFtZXRlcik7IFxyXG4gICAgbGV0IGNvbmZpZzogYW55ID0ge1xyXG4gICAgICBcIntmb3JtRWxDb250cm9sbGVyTmFtZX1cIjogY29udHJvbGxlck5hbWUsXHJcbiAgICAgIFwie2Zvcm1FbFdpZGdldE5hbWV9XCI6IHRoaXMuZ2VuZXJhdGVXaWRnZXROYW1lKHRoaXMucGFyYW1ldGVyKSxcclxuICAgICAgXHJcbiAgICAgIFwie2ZpbGVCeXRlc31cIjogY29udHJvbGxlck5hbWUgKyBcIkJ5dGVzXCIsXHJcbiAgICAgIFwie2ZpbGVOYW1lfVwiOiBjb250cm9sbGVyTmFtZSxcclxuICAgICAgXCJ7ZmlsZURlc2N9XCI6IHRoaXMucGFyYW1ldGVyLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgPyB0aGlzLnBhcmFtZXRlci5kZXNjcmlwdGlvblxyXG4gICAgICAgIDogdGhpcy5wYXJhbWV0ZXIubmFtZSxcclxuICAgIH07XHJcblxyXG4gICAgaW5uZXIgPSBVdGlscy5yZXBsYWNlS2V5VmFsdWVSZWdleChjb25maWcsIGlubmVyKTtcclxuICAgIHJldHVybiBpbm5lcjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB3aWRnZXRLZXkgPSAnZm9ybUVsRmlsZSc7XHJcbiAgcHVibGljIGdldFJhd1RlbXBLZXkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBGaWxlLndpZGdldEtleTtcclxuICB9ICBcclxufVxyXG4iLCJpbXBvcnQgeyBpc0J1ZmZlciB9IGZyb20gXCJsb2Rhc2hcIjtcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi4vVXRpbHNcIjtcclxuaW1wb3J0IHsgV2lkZ2V0IH0gZnJvbSBcIi4vV2lkZ2V0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTXVsdGlGaWxlIGV4dGVuZHMgV2lkZ2V0IHtcclxuICBwcml2YXRlIHBhcmFtZXRlcjogYW55O1xyXG4gIHByaXZhdGUgZGFydFRlbXA6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IocGFyYW1ldGVyOiBhbnksIGRhcnRUZW1wOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnBhcmFtZXRlciA9IHBhcmFtZXRlcjtcclxuICAgIHRoaXMuZGFydFRlbXAgPSBkYXJ0VGVtcDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlKCk6IHN0cmluZyB7IFxyXG4gICAgdmFyIG1hdGNoID0gdGhpcy5nZXRSYXdUZW1wKHRoaXMuZGFydFRlbXApOyBcclxuICAgIHZhciBpbm5lciA9IG1hdGNoLmlubmVyO1xyXG4gICAgIFxyXG4gICAgbGV0IGNvbmZpZzogYW55ID0ge1xyXG4gICAgICBcIntmb3JtRWxDb250cm9sbGVyTmFtZX1cIjogdGhpcy5nZW5lcmF0ZUNvbnRyb2xsZXJOYW1lKHRoaXMucGFyYW1ldGVyKSxcclxuICAgICAgXCJ7Zm9ybUVsV2lkZ2V0TmFtZX1cIjogdGhpcy5nZW5lcmF0ZVdpZGdldE5hbWUodGhpcy5wYXJhbWV0ZXIpLFxyXG4gICAgICBcIntmb3JtRWxDYXB0aW9ufVwiOiB0aGlzLnBhcmFtZXRlci5kZXNjcmlwdGlvblxyXG4gICAgICAgID8gdGhpcy5wYXJhbWV0ZXIuZGVzY3JpcHRpb25cclxuICAgICAgICA6IHRoaXMucGFyYW1ldGVyLm5hbWUsXHJcbiAgICAgIFwie2Zvcm1FbFJlcXVpcmVkfVwiOiB0aGlzLnBhcmFtZXRlci5yZXF1aXJlZCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiXHJcbiAgICB9O1xyXG5cclxuICAgIGlubmVyID0gVXRpbHMucmVwbGFjZUtleVZhbHVlUmVnZXgoY29uZmlnLCBpbm5lcik7IFxyXG4gICAgICBcclxuICAgIHJldHVybiBpbm5lcjtcclxuICB9XHJcbiBcclxuICBwdWJsaWMgc3RhdGljIHdpZGdldEtleSA9ICdmb3JtRWxNdWx0aUZpbGUnO1xyXG4gIHB1YmxpYyBnZXRSYXdUZW1wS2V5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gTXVsdGlGaWxlLndpZGdldEtleTtcclxuICB9ICBcclxuIFxyXG59XHJcbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL1V0aWxzXCI7XHJcbmltcG9ydCB7IFdpZGdldCB9IGZyb20gXCIuL1dpZGdldFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbGVjdCBleHRlbmRzIFdpZGdldCB7XHJcbiAgcHJpdmF0ZSBwYXJhbWV0ZXI6IGFueTtcclxuICBwcml2YXRlIGRhcnRUZW1wOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcjogYW55LCBkYXJ0VGVtcDogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5wYXJhbWV0ZXIgPSBwYXJhbWV0ZXI7XHJcbiAgICB0aGlzLmRhcnRUZW1wID0gZGFydFRlbXA7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZSgpOiBzdHJpbmcge1xyXG4gICAgdmFyIG1hdGNoID0gdGhpcy5nZXRSYXdUZW1wKHRoaXMuZGFydFRlbXApO1xyXG4gICAgdmFyIG91dHRlciA9IG1hdGNoLm91dHRlcjtcclxuICAgIHZhciBpbm5lciA9IG1hdGNoLmlubmVyOyBcclxuICAgIHZhciBjdHJsTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZSh0aGlzLnBhcmFtZXRlcik7XHJcbiAgICBsZXQgY29uZmlnOiBhbnkgPSB7XHJcbiAgICAgIFwie2Zvcm1FbENvbnRyb2xsZXJOYW1lfVwiOiBjdHJsTmFtZSxcclxuICAgICAgXCJ7Zm9ybUVsV2lkZ2V0TmFtZX1cIjogdGhpcy5nZW5lcmF0ZVdpZGdldE5hbWUodGhpcy5wYXJhbWV0ZXIpLFxyXG4gICAgICBcIntmb3JtRWxDYXB0aW9ufVwiOiB0aGlzLnBhcmFtZXRlci5kZXNjcmlwdGlvblxyXG4gICAgICAgID8gdGhpcy5wYXJhbWV0ZXIuZGVzY3JpcHRpb25cclxuICAgICAgICA6IHRoaXMucGFyYW1ldGVyLm5hbWUsIFxyXG4gICAgICAgIFwie3NlbGVjdGVkSWRzfVwiIDogY3RybE5hbWVcclxuICAgIH07XHJcblxyXG4gICAgaW5uZXIgPSBVdGlscy5yZXBsYWNlS2V5VmFsdWVSZWdleChjb25maWcsIGlubmVyKTsgXHJcbiAgICByZXR1cm4gaW5uZXI7XHJcbiAgfVxyXG4gICBcclxuICBcclxuICBzdGF0aWMgd2lkZ2V0S2V5ID0gJ2Zvcm1FbFNlbGVjdCc7XHJcbiAgcHVibGljIGdldFJhd1RlbXBLZXkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBTZWxlY3Qud2lkZ2V0S2V5O1xyXG4gIH0gICBcclxuICBcclxufVxyXG4iLCJpbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuLi9VdGlsc1wiO1xyXG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tIFwiLi9TZWxlY3RcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNdWx0aVNlbGVjdCBleHRlbmRzIFNlbGVjdCB7IFxyXG5cclxuICBzdGF0aWMgd2lkZ2V0S2V5ID0gJ2Zvcm1FbE11bHRpU2VsZWN0JztcclxuICBwdWJsaWMgZ2V0UmF3VGVtcEtleSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIE11bHRpU2VsZWN0LndpZGdldEtleTtcclxuICB9ICAgXHJcbn1cclxuIiwiaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi4vVXRpbHNcIjtcclxuaW1wb3J0IHsgV2lkZ2V0IH0gZnJvbSBcIi4vV2lkZ2V0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRGF0ZSBleHRlbmRzIFdpZGdldCB7XHJcbiAgcHJpdmF0ZSBwYXJhbWV0ZXI6IGFueTtcclxuICBwcml2YXRlIGRhcnRUZW1wOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcjogYW55LCBkYXJ0VGVtcDogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5wYXJhbWV0ZXIgPSBwYXJhbWV0ZXI7XHJcbiAgICB0aGlzLmRhcnRUZW1wID0gZGFydFRlbXA7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZSgpOiBzdHJpbmcge1xyXG4gICAgIFxyXG4gICAgdmFyIG1hdGNoID0gdGhpcy5nZXRSYXdUZW1wKHRoaXMuZGFydFRlbXApO1xyXG4gICAgdmFyIG91dHRlciA9IG1hdGNoLm91dHRlcjtcclxuICAgIHZhciBpbm5lciA9IG1hdGNoLmlubmVyO1xyXG5cclxuICAgIGxldCBjb25maWc6IGFueSA9IHtcclxuICAgICAgXCJ7Zm9ybUVsQ29udHJvbGxlck5hbWV9XCI6IHRoaXMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZSh0aGlzLnBhcmFtZXRlciksXHJcbiAgICAgIFwie2Zvcm1FbFdpZGdldE5hbWV9XCI6IHRoaXMuZ2VuZXJhdGVXaWRnZXROYW1lKHRoaXMucGFyYW1ldGVyKSxcclxuICAgICAgXCJ7aGludFRleHR9XCI6IHRoaXMucGFyYW1ldGVyLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgPyB0aGlzLnBhcmFtZXRlci5kZXNjcmlwdGlvblxyXG4gICAgICAgIDogdGhpcy5wYXJhbWV0ZXIubmFtZSxcclxuICAgIH07XHJcblxyXG4gICAgaW5uZXIgPSBVdGlscy5yZXBsYWNlS2V5VmFsdWVSZWdleChjb25maWcsIGlubmVyKTsgXHJcbiAgICByZXR1cm4gaW5uZXI7XHJcbiAgfVxyXG4gIFxyXG4gIHN0YXRpYyB3aWRnZXRLZXkgPSAnZm9ybURhdGUnO1xyXG4gIHB1YmxpYyBnZXRSYXdUZW1wS2V5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gRGF0ZS53aWRnZXRLZXk7XHJcbiAgfSBcclxuICBcclxufVxyXG4iLCIgXHJcbmltcG9ydCB7IERhdGUgfSBmcm9tIFwiLi9EYXRlXCI7IFxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGV0aW1lIGV4dGVuZHMgRGF0ZSB7XHJcbiAgXHJcbiAgc3RhdGljIHdpZGdldEtleSA9ICdmb3JtRGF0ZXRpbWUnO1xyXG4gIHB1YmxpYyBnZXRSYXdUZW1wS2V5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gRGF0ZXRpbWUud2lkZ2V0S2V5O1xyXG4gIH0gXHJcbiBcclxufVxyXG4iLCJpbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuLi9VdGlsc1wiO1xyXG5pbXBvcnQgeyBXaWRnZXQgfSBmcm9tIFwiLi9XaWRnZXRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSaWNodGV4dCBleHRlbmRzIFdpZGdldCB7XHJcbiAgcHJpdmF0ZSBwYXJhbWV0ZXI6IGFueTtcclxuICBwcml2YXRlIGRhcnRUZW1wOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcjogYW55LCBkYXJ0VGVtcDogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5wYXJhbWV0ZXIgPSBwYXJhbWV0ZXI7XHJcbiAgICB0aGlzLmRhcnRUZW1wID0gZGFydFRlbXA7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZSgpOiBzdHJpbmcge1xyXG4gICAgIFxyXG4gICAgdmFyIG1hdGNoID0gdGhpcy5nZXRSYXdUZW1wKHRoaXMuZGFydFRlbXApO1xyXG4gICAgdmFyIG91dHRlciA9IG1hdGNoLm91dHRlcjtcclxuICAgIHZhciBpbm5lciA9IG1hdGNoLmlubmVyO1xyXG5cclxuICAgIGxldCBjb25maWc6IGFueSA9IHtcclxuICAgICAgXCJ7Zm9ybUVsQ29udHJvbGxlck5hbWV9XCI6IHRoaXMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZSh0aGlzLnBhcmFtZXRlciksXHJcbiAgICAgIFwie2Zvcm1FbFdpZGdldE5hbWV9XCI6IHRoaXMuZ2VuZXJhdGVXaWRnZXROYW1lKHRoaXMucGFyYW1ldGVyKSxcclxuICAgICAgXCJ7Zm9ybUVsQ2FwdGlvbn1cIjogdGhpcy5wYXJhbWV0ZXIuZGVzY3JpcHRpb25cclxuICAgICAgICA/IHRoaXMucGFyYW1ldGVyLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgOiB0aGlzLnBhcmFtZXRlci5uYW1lLFxyXG4gICAgICBcIntpbml0aWFsVGV4dH1cIiA6IFwiXCJcclxuICAgIH07XHJcblxyXG4gICAgaW5uZXIgPSBVdGlscy5yZXBsYWNlS2V5VmFsdWVSZWdleChjb25maWcsIGlubmVyKTsgXHJcbiAgICByZXR1cm4gaW5uZXI7XHJcbiAgfVxyXG4gXHJcbiAgc3RhdGljIHdpZGdldEtleSA9ICdmb3JtUmljaHRleHQnO1xyXG4gIHB1YmxpYyBnZXRSYXdUZW1wS2V5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gUmljaHRleHQud2lkZ2V0S2V5O1xyXG4gIH0gICBcclxuIFxyXG59XHJcbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL1V0aWxzXCI7XHJcbmltcG9ydCB7IFdpZGdldCB9IGZyb20gXCIuL1dpZGdldFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoZWNrIGV4dGVuZHMgV2lkZ2V0IHtcclxuICBwcml2YXRlIHBhcmFtZXRlcjogYW55O1xyXG4gIHByaXZhdGUgZGFydFRlbXA6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IocGFyYW1ldGVyOiBhbnksIGRhcnRUZW1wOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnBhcmFtZXRlciA9IHBhcmFtZXRlcjtcclxuICAgIHRoaXMuZGFydFRlbXAgPSBkYXJ0VGVtcDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlKCk6IHN0cmluZyB7XHJcbiAgICAgXHJcbiAgICB2YXIgbWF0Y2ggPSB0aGlzLmdldFJhd1RlbXAodGhpcy5kYXJ0VGVtcCk7XHJcbiAgICB2YXIgb3V0dGVyID0gbWF0Y2gub3V0dGVyO1xyXG4gICAgdmFyIGlubmVyID0gbWF0Y2guaW5uZXI7XHJcblxyXG4gICAgbGV0IGNvbmZpZzogYW55ID0ge1xyXG4gICAgICBcIntmb3JtRWxDb250cm9sbGVyTmFtZX1cIjogdGhpcy5nZW5lcmF0ZUNvbnRyb2xsZXJOYW1lKHRoaXMucGFyYW1ldGVyKSxcclxuICAgICAgXCJ7Zm9ybUVsV2lkZ2V0TmFtZX1cIjogdGhpcy5nZW5lcmF0ZVdpZGdldE5hbWUodGhpcy5wYXJhbWV0ZXIpLFxyXG4gICAgICBcIntmb3JtRWxDYXB0aW9ufVwiOiB0aGlzLnBhcmFtZXRlci5kZXNjcmlwdGlvblxyXG4gICAgICAgID8gdGhpcy5wYXJhbWV0ZXIuZGVzY3JpcHRpb25cclxuICAgICAgICA6IHRoaXMucGFyYW1ldGVyLm5hbWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGlubmVyID0gVXRpbHMucmVwbGFjZUtleVZhbHVlUmVnZXgoY29uZmlnLCBpbm5lcik7IFxyXG4gICAgcmV0dXJuIGlubmVyO1xyXG4gIH1cclxuIFxyXG4gIHN0YXRpYyB3aWRnZXRLZXkgPSAnZm9ybUNoZWNrJztcclxuICBwdWJsaWMgZ2V0UmF3VGVtcEtleSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIENoZWNrLndpZGdldEtleTtcclxuICB9IFxyXG59XHJcbiIsIiBcclxuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi9JbnB1dFwiOyBcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0YXJlYSBleHRlbmRzIElucHV0IHtcclxuICBzdGF0aWMgd2lkZ2V0S2V5ID0gJ2Zvcm1UZXh0YXJlYSc7XHJcbiAgcHVibGljIGdldFJhd1RlbXBLZXkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBUZXh0YXJlYS53aWRnZXRLZXk7XHJcbiAgfVxyXG59XHJcbiIsIiBcclxuaW1wb3J0IHsgRGF0ZSB9IGZyb20gXCIuL0RhdGVcIjsgXHJcblxyXG5leHBvcnQgY2xhc3MgVGltZVdpZGdldCBleHRlbmRzIERhdGUge1xyXG4gIFxyXG4gIHN0YXRpYyB3aWRnZXRLZXkgPSAnZm9ybVRpbWUnO1xyXG4gIHB1YmxpYyBnZXRSYXdUZW1wS2V5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gVGltZVdpZGdldC53aWRnZXRLZXk7XHJcbiAgfSBcclxuIFxyXG59XHJcbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL1V0aWxzXCI7XHJcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIi4vSW5wdXRcIjtcclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gXCIuL0ZpbGVcIjtcclxuaW1wb3J0IHsgTXVsdGlGaWxlIH0gZnJvbSBcIi4vTXVsdGlGaWxlXCI7XHJcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gXCIuL1NlbGVjdFwiO1xyXG5pbXBvcnQgeyBNdWx0aVNlbGVjdCB9IGZyb20gXCIuL011bHRpU2VsZWN0XCI7XHJcbmltcG9ydCB7IFdpZGdldCB9IGZyb20gXCIuL1dpZGdldFwiO1xyXG5pbXBvcnQgeyBEYXRldGltZSB9IGZyb20gXCIuL0RhdGV0aW1lXCI7XHJcbmltcG9ydCB7IERhdGUgfSBmcm9tIFwiLi9EYXRlXCI7XHJcbmltcG9ydCB7IFJpY2h0ZXh0IH0gZnJvbSBcIi4vUmljaHRleHRcIjtcclxuaW1wb3J0IHsgQ2hlY2sgfSBmcm9tIFwiLi9DaGVja1wiO1xyXG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gXCIuL1RleHRhcmVhXCI7XHJcbmltcG9ydCB7IFRpbWVXaWRnZXQgfSBmcm9tIFwiLi9UaW1lXCI7XHJcbmV4cG9ydCBjbGFzcyBXaWRnZXRGYWN0b3J5IHtcclxuICBwcml2YXRlIHBhcmFtZXRlcjogYW55O1xyXG4gIHByaXZhdGUgZGFydFRlbXA6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IocGFyYW1ldGVyOiBhbnksIGRhcnRUZW1wOiBzdHJpbmcpIHtcclxuICAgIHRoaXMucGFyYW1ldGVyID0gcGFyYW1ldGVyO1xyXG4gICAgdGhpcy5kYXJ0VGVtcCA9IGRhcnRUZW1wO1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZVdpZGdldCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0V2lkZ2V0KCkuZ2VuZXJhdGUoKTtcclxuICB9XHJcblxyXG4gIGdldFdpZGdldCgpOiBXaWRnZXQge1xyXG4gICAgc3dpdGNoICh0aGlzLnBhcmFtZXRlci50eXBlKSB7XHJcbiAgICAgIGNhc2UgXCJzZWxlY3RcIjpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVNlbGVjdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibXVsdGlfc2VsZWN0XCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVNdXRpU2VsZWN0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJjaGVja1wiOlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQ2hlY2soKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInJpY2h0ZXh0XCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVSaWNodGV4dCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiZGF0ZVwiOlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlRGF0ZSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiZGF0ZXRpbWVcIjpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZURhdGV0aW1lKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRpbWVcIjpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlVGltZSgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJmaWxlXCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVGaWxlKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJtdWx0aV9maWxlXCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVNdWx0aUZpbGUoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInRleHRhcmVhXCI6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVRleHRhcmVhKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUlucHV0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUlucHV0KCk6IFdpZGdldCB7XHJcbiAgICByZXR1cm4gbmV3IElucHV0KHRoaXMucGFyYW1ldGVyLCB0aGlzLmRhcnRUZW1wKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlVGV4dGFyZWEoKTogV2lkZ2V0IHtcclxuICAgIHJldHVybiBuZXcgVGV4dGFyZWEodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVGaWxlKCk6IFdpZGdldCB7XHJcbiAgICByZXR1cm4gbmV3IEZpbGUodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuICBnZW5lcmF0ZU11bHRpRmlsZSgpOiBXaWRnZXQge1xyXG4gICAgcmV0dXJuIG5ldyBNdWx0aUZpbGUodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuICBnZW5lcmF0ZU11dGlTZWxlY3QoKTogV2lkZ2V0IHtcclxuICAgIHJldHVybiBuZXcgTXVsdGlTZWxlY3QodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuICBnZW5lcmF0ZVNlbGVjdCgpOiBXaWRnZXQge1xyXG4gICAgcmV0dXJuIG5ldyBTZWxlY3QodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH0gXHJcblxyXG4gIGdlbmVyYXRlRGF0ZXRpbWUoKTogV2lkZ2V0IHtcclxuICAgIHJldHVybiBuZXcgRGF0ZXRpbWUodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVUaW1lKCk6IFdpZGdldCB7XHJcbiAgICByZXR1cm4gbmV3IFRpbWVXaWRnZXQodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVEYXRlKCk6IFdpZGdldCB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUodGhpcy5wYXJhbWV0ZXIsIHRoaXMuZGFydFRlbXApO1xyXG4gIH1cclxuICBnZW5lcmF0ZVJpY2h0ZXh0KCk6IFdpZGdldCB7XHJcbiAgICByZXR1cm4gbmV3IFJpY2h0ZXh0KHRoaXMucGFyYW1ldGVyLCB0aGlzLmRhcnRUZW1wKTtcclxuICB9XHJcbiAgZ2VuZXJhdGVDaGVjaygpOiBXaWRnZXQge1xyXG4gICAgcmV0dXJuIG5ldyBDaGVjayh0aGlzLnBhcmFtZXRlciwgdGhpcy5kYXJ0VGVtcCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsZFJlcXVlc3Qge1xyXG4gIHByaXZhdGUgZGFydDogc3RyaW5nO1xyXG4gIHByaXZhdGUgcGFyYW1ldGVyczogYW55O1xyXG4gIHByaXZhdGUgbWV0aG9kOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBjb25zdW1lczogQXJyYXk8c3RyaW5nPjtcclxuICBwcml2YXRlIHBhdGg6IHN0cmluZztcclxuICBwcml2YXRlIGNvbnN1bWU6IHN0cmluZztcclxuICBwcml2YXRlIGluQm9keVBhcmFtZXRlcnM6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXJ0OiBzdHJpbmcsXHJcbiAgICBwYXJhbWV0ZXJzOiBhbnksXHJcbiAgICBpbkJvZHlQYXJhbWV0ZXJzOiBhbnksXHJcbiAgICBtZXRob2Q6IHN0cmluZyxcclxuICAgIGNvbnN1bWVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgcGF0aDogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICB0aGlzLmRhcnQgPSBkYXJ0O1xyXG4gICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcclxuICAgIHRoaXMuaW5Cb2R5UGFyYW1ldGVycyA9IGluQm9keVBhcmFtZXRlcnM7XHJcbiAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgIHRoaXMuY29uc3VtZXMgPSBjb25zdW1lcztcclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICB0aGlzLmNvbnN1bWUgPSB0aGlzLmNvbnN1bWVzICYmIHRoaXMuY29uc3VtZXMubGVuZ3RoICYmIHRoaXMuY29uc3VtZXNbMF07XHJcbiAgICB0aGlzLmNvbnN1bWUgPSB0aGlzLmNvbnN1bWUgPz8gXCJhcHBsaWNhdGlvbi9qc29uXCI7XHJcbiAgfVxyXG5cclxuICBwYXJzZSgpIHtcclxuICAgIHRoaXMucHJlcGFyZVBhcmFtZXRlclR5cGUoKTtcclxuICAgIGlmICh0aGlzLmNvbnN1bWUuaW5kZXhPZihcIm11bHRpcGFydFwiKSAhPSAtMSkge1xyXG4gICAgICB0aGlzLnBvc3RGaWxlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBvc3ROb3JtYWwoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmRhcnQ7XHJcbiAgfVxyXG5cclxuICBwcmVwYXJlUGFyYW1ldGVyVHlwZSgpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbWV0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhcmFtZXRlcnNbaV1bXCJ0eXBlXCJdKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzW2ldW1widHlwZVwiXSA9IHRoaXMucGFyYW1ldGVyc1tpXVtcInR5cGVcIl0uc3BsaXQoXCI6XCIpWzBdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwb3N0RmlsZSgpIHtcclxuICAgIGxldCBwYXJhbWV0ZXJzOiBhbnkgPSB0aGlzLnBhcmFtZXRlcnM7XHJcblxyXG4gICAgdmFyIGhlYWRlclRlbXAgPSBbXTtcclxuICAgIHZhciBmb3JtRGF0YVRlbXAgPSBbXTtcclxuICAgIHZhciBmb3JtRmlsZVRlbXAgPSBbXTtcclxuICAgIGxldCBpbnM6IGFueSA9IHt9O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbWV0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBrID0gcGFyYW1ldGVyc1tpXS5pbjtcclxuICAgICAgaWYgKCFpbnNba10pIHtcclxuICAgICAgICBpbnNba10gPSBbXTtcclxuICAgICAgfVxyXG4gICAgICBpbnNba10ucHVzaChwYXJhbWV0ZXJzW2ldKTtcclxuICAgIH1cclxuXHJcbiAgICBoZWFkZXJUZW1wID0gdGhpcy5hZGRIZWFkZXJzKGlucywgdHJ1ZSk7XHJcbiAgICB2YXIgcGFyYW1zID0gaW5zW1wiZm9ybURhdGFcIl07XHJcbiAgICBpZiAodGhpcy5pbkJvZHlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgIHBhcmFtcyA9IHRoaXMuaW5Cb2R5UGFyYW1ldGVycztcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGFyYW1zKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHByID0gcGFyYW1zW2ldO1xyXG4gICAgICAgIHZhciBuYW1lID0gcHJbXCJuYW1lXCJdO1xyXG5cclxuICAgICAgICBpZiAocGFyYW1zW2ldW1widHlwZVwiXSA9PSBcImZpbGVcIikge1xyXG4gICAgICAgICAgdmFyIGZpbGVCeXRlcyA9XHJcbiAgICAgICAgICAgIFwiZmlsZVwiICtcclxuICAgICAgICAgICAgVXRpbHMuc3RyVG9NZXRob2QoVXRpbHMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZShuYW1lKSkgK1xyXG4gICAgICAgICAgICBcIkJ5dGVzXCI7XHJcbiAgICAgICAgICB2YXIgZmlsZU5hbWUgPVxyXG4gICAgICAgICAgICBcImZpbGVcIiArXHJcbiAgICAgICAgICAgIFV0aWxzLnN0clRvTWV0aG9kKFV0aWxzLmdlbmVyYXRlQ29udHJvbGxlck5hbWUobmFtZSkpICtcclxuICAgICAgICAgICAgXCJOYW1lXCI7XHJcbiAgICAgICAgICBmb3JtRmlsZVRlbXAucHVzaChcclxuICAgICAgICAgICAgYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihgICtcclxuICAgICAgICAgICAgICBmaWxlQnl0ZXMgK1xyXG4gICAgICAgICAgICAgIGAgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVkaWFUeXBlIG1pbWVUeXBlID0gVXRpbHMuZ2V0TWltZSggYCArXHJcbiAgICAgICAgICAgICAgZmlsZU5hbWUgK1xyXG4gICAgICAgICAgICAgIGAhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuZmlsZXMuYWRkKG5ldyBodHRwLk11bHRpcGFydEZpbGUuZnJvbUJ5dGVzKCdgICtcclxuICAgICAgICAgICAgICBuYW1lICtcclxuICAgICAgICAgICAgICBgJywgYCArXHJcbiAgICAgICAgICAgICAgZmlsZUJ5dGVzICtcclxuICAgICAgICAgICAgICBgIGFzIExpc3Q8aW50PiwgZmlsZW5hbWU6ICBgICtcclxuICAgICAgICAgICAgICBmaWxlTmFtZSArXHJcbiAgICAgICAgICAgICAgYCAsIGNvbnRlbnRUeXBlOm1pbWVUeXBlICkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvcm1EYXRhVGVtcC5wdXNoKFxyXG4gICAgICAgICAgICBcInJlcXVlc3QuZmllbGRzWydcIiArXHJcbiAgICAgICAgICAgICAgbmFtZSArXHJcbiAgICAgICAgICAgICAgXCInXSA9IFwiICtcclxuICAgICAgICAgICAgICB0aGlzLmdldFZhbHVlKG5hbWUsIFwiXCIsIHBhcmFtc1tpXVtcImRhdGFUeXBlXCJdKSArXHJcbiAgICAgICAgICAgICAgXCI7XCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoXHJcbiAgICAgIFwie2J1aWxkUmVxdWVzdH1cIixcclxuICAgICAgdGhpcy5tYWtlSHR0cFJlcXVlc3RGaWxlKGZvcm1GaWxlVGVtcClcclxuICAgICk7XHJcbiAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZShcclxuICAgICAgXCJ7cHJlcGFyZURhdGFGb3JVcGRhdGV9XCIsXHJcbiAgICAgIHRoaXMucHJlcGFyZURhdGFGb3JVcGRhdGUoZm9ybURhdGFUZW1wKVxyXG4gICAgKTtcclxuICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKFxyXG4gICAgICBcIntwcmVwYXJlSGVhZGVyRm9yVXBkYXRlfVwiLFxyXG4gICAgICB0aGlzLnByZXBhcmVIZWFkZXJGb3JVcGRhdGUoaGVhZGVyVGVtcClcclxuICAgICk7XHJcblxyXG4gICAgLy8gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoJ3tidWlsZFJlcXVlc3R9JywgdGhpcy5tYWtlSHR0cFJlcXVlc3RGaWxlKGhlYWRlclRlbXAsIGZvcm1EYXRhVGVtcCkpO1xyXG4gICAgLy8gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoJ3twcmVwYXJlRGF0YUZvclNhdmV9JywgdGhpcy5wYXJlcGFyZURhdGFGb3JVcGRhdGUoZm9ybURhdGFUZW1wKSk7XHJcblxyXG4gICAgLy8gICAgcmV0dXJuIHRoaXMubWFrZUh0dHBSZXF1ZXN0RmlsZShmb3JtRmlsZVRlbXAsIGhlYWRlclRlbXAsIGZvcm1EYXRhVGVtcCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG1ha2VIdHRwUmVxdWVzdEZpbGUoZm9ybUZpbGVUZW1wOiBhbnlbXSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgYFxyXG4gICAgICAgIFVyaSAgdXJpID0gVXJpLnBhcnNlKGdldFNhdmVVcmwoKSk7IFxyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IGh0dHAuTXVsdGlwYXJ0UmVxdWVzdChcImAgK1xyXG4gICAgICB0aGlzLm1ldGhvZCArXHJcbiAgICAgIGBcIiwgdXJpKTtcclxuICAgICAgICBgICtcclxuICAgICAgKGZvcm1GaWxlVGVtcC5sZW5ndGggPyBmb3JtRmlsZVRlbXAuam9pbihcIlxcblwiKSA6IFwiXCIpICtcclxuICAgICAgYFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICByZXF1ZXN0LnNlbmQoKS50aGVuKChyZXNwb25zZSkgYXN5bmMge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBib2R5ID0gYXdhaXQgcmVzcG9uc2Uuc3RyZWFtLmJ5dGVzVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBzYXZlQ2FsbGJhY2soanNvbkRlY29kZShib2R5KSwgcmVzcG9uc2Uuc3RhdHVzQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTmF2aWdhdG9yLnBvcChjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93U25hY2tUZXh0KGNvbnRleHQsIGJvZHkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBOYXZpZ2F0b3IucG9wKGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dTbmFja1RleHQoY29udGV4dCwgcmVzcG9uc2Uuc3RhdHVzQ29kZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuY2F0Y2hFcnJvcigob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgTmF2aWdhdG9yLnBvcChjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgVXRpbHMuc2hvd1NuYWNrVGV4dChjb250ZXh0LCBvbkVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBgXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcG9zdE5vcm1hbCgpIHtcclxuICAgIGxldCBwYXJhbWV0ZXJzOiBhbnkgPSB0aGlzLnBhcmFtZXRlcnM7XHJcbiAgICB2YXIgaGVhZGVyVGVtcCA9IFtdO1xyXG4gICAgdmFyIGZvcm1EYXRhVGVtcCA9IFtdO1xyXG4gICAgdmFyIGluczogYW55ID0ge307XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtZXRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGsgPSBwYXJhbWV0ZXJzW2ldLmluO1xyXG4gICAgICBpZiAoIWluc1trXSkge1xyXG4gICAgICAgIGluc1trXSA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIGluc1trXS5wdXNoKHBhcmFtZXRlcnNbaV0pO1xyXG4gICAgfVxyXG4gICAgaGVhZGVyVGVtcCA9IHRoaXMuYWRkSGVhZGVycyhpbnMsIGZhbHNlKTtcclxuXHJcbiAgICB2YXIgcGFyYW1zID0gdGhpcy5tZXRob2QgPT0gXCJnZXRcIiA/IGluc1tcInF1ZXJ5XCJdIDogaW5zW1wiZm9ybURhdGFcIl07XHJcblxyXG4gICAgaWYgKHRoaXMuaW5Cb2R5UGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHBhcmFtcyA9IHRoaXMuaW5Cb2R5UGFyYW1ldGVycztcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGFyYW1zKSB7XHJcbiAgICAgIHZhciBncm91cE5hbWVWYWx1ZXM6IGFueSA9IHt9O1xyXG4gICAgICBmb3JtRGF0YVRlbXAucHVzaChcInZhciBmb3JtRGF0YXMgPSA8U3RyaW5nLCBkeW5hbWljPnt9O1wiKTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgbmFtZSA9IHBhcmFtc1tpXVtcIm5hbWVcIl07XHJcbiAgICAgICAgdmFyIGdyb3VwTmFtZSA9IHBhcmFtc1tpXVtcImdyb3VwTmFtZVwiXTtcclxuICAgICAgICBpZiAoZ3JvdXBOYW1lKSB7XHJcbiAgICAgICAgICBpZiAoIWdyb3VwTmFtZVZhbHVlc1tncm91cE5hbWVdKSB7XHJcbiAgICAgICAgICAgIGdyb3VwTmFtZVZhbHVlc1tncm91cE5hbWVdID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBncm91cE5hbWVWYWx1ZXNbZ3JvdXBOYW1lXS5wdXNoKFxyXG4gICAgICAgICAgICAnXCInICtcclxuICAgICAgICAgICAgICBuYW1lICtcclxuICAgICAgICAgICAgICAnXCI6ICcgK1xyXG4gICAgICAgICAgICAgIHRoaXMuZ2V0VmFsdWUobmFtZSwgZ3JvdXBOYW1lLCBwYXJhbXNbaV1bXCJkYXRhVHlwZVwiXSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvcm1EYXRhVGVtcC5wdXNoKFxyXG4gICAgICAgICAgICBcImZvcm1EYXRhc1snXCIgK1xyXG4gICAgICAgICAgICAgIHBhcmFtc1tpXVtcIm5hbWVcIl0gK1xyXG4gICAgICAgICAgICAgIFwiJ10gPSBcIiArXHJcbiAgICAgICAgICAgICAgdGhpcy5nZXRWYWx1ZShuYW1lLCBcIlwiLCBwYXJhbXNbaV1bXCJkYXRhVHlwZVwiXSkgK1xyXG4gICAgICAgICAgICAgIFwiO1wiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmb3IgKHZhciBnck5hbWUgaW4gZ3JvdXBOYW1lVmFsdWVzKSB7XHJcbiAgICAgICAgZm9ybURhdGFUZW1wLnB1c2goXHJcbiAgICAgICAgICBcImZvcm1EYXRhc1snXCIgK1xyXG4gICAgICAgICAgICBnck5hbWUgK1xyXG4gICAgICAgICAgICBcIiddID0ge1wiICtcclxuICAgICAgICAgICAgZ3JvdXBOYW1lVmFsdWVzW2dyTmFtZV0uam9pbihcIixcIikgK1xyXG4gICAgICAgICAgICBcIn07XCJcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoXHJcbiAgICAgIFwie2J1aWxkUmVxdWVzdH1cIixcclxuICAgICAgdGhpcy5tYWtlSHR0cFJlcXVlc3QoaGVhZGVyVGVtcCwgZm9ybURhdGFUZW1wKVxyXG4gICAgKTtcclxuICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKFxyXG4gICAgICBcIntwcmVwYXJlRGF0YUZvclVwZGF0ZX1cIixcclxuICAgICAgdGhpcy5wcmVwYXJlRGF0YUZvclVwZGF0ZShmb3JtRGF0YVRlbXApXHJcbiAgICApO1xyXG4gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoXHJcbiAgICAgIFwie3ByZXBhcmVIZWFkZXJGb3JVcGRhdGV9XCIsXHJcbiAgICAgIHRoaXMucHJlcGFyZUhlYWRlckZvclVwZGF0ZShoZWFkZXJUZW1wKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbWFrZUh0dHBSZXF1ZXN0KGhlYWRlclRlbXA6IHN0cmluZ1tdLCBmb3JtRGF0YVRlbXA6IHN0cmluZ1tdKSB7XHJcbiAgICB2YXIgYm9keSA9IFwiZm9ybURhdGFzXCI7XHJcbiAgICBpZiAodGhpcy5pbkJvZHlQYXJhbWV0ZXJzKSB7XHJcbiAgICAgIGJvZHkgPSBcImpzb24uZW5jb2RlKGZvcm1EYXRhcylcIjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaHR0cFN0ciA9XHJcbiAgICAgIGBcclxuICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGh0dHAue21ldGhvZH0oXHJcbiAgICAgICAgICAgICAgICB1cmksXHJcbiAgICAgICAgICAgICAgICBgICtcclxuICAgICAgKGhlYWRlclRlbXAubGVuZ3RoID8gXCJoZWFkZXJzOiBoZWFkZXJzLFwiIDogXCJcIikgK1xyXG4gICAgICBgXHJcbiAgICAgICAgICAgICAgICBgICtcclxuICAgICAgKGZvcm1EYXRhVGVtcC5sZW5ndGggJiYgIVtcImdldFwiLCBcImRlbGV0ZVwiXS5pbmNsdWRlcyh0aGlzLm1ldGhvZClcclxuICAgICAgICA/IFwiYm9keTogXCIgKyBib2R5ICsgXCIsXCJcclxuICAgICAgICA6IFwiXCIpICtcclxuICAgICAgYFxyXG4gICAgICAgICAgICApO2A7XHJcblxyXG4gICAgdmFyIHR0ID1cclxuICAgICAgdGhpcy5tZXRob2QgPT0gXCJnZXRcIlxyXG4gICAgICAgID8gaHR0cFN0clxyXG4gICAgICAgICAgICAucmVwbGFjZShcInttZXRob2R9XCIsIFwiZ2V0XCIpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKFwiIGJvZHk6IGpzb24uZW5jb2RlKGZvcm1EYXRhcyksXCIsIFwiXCIpXHJcbiAgICAgICAgOiBgaWYgKGdldE1ldGhvZCgpID09ICdwdXQnKSB7XHJcbiAgICAgICAgICAgICAgICBgICtcclxuICAgICAgICAgIGh0dHBTdHIucmVwbGFjZShcInttZXRob2R9XCIsIFwicHV0XCIpICtcclxuICAgICAgICAgIGBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGAgK1xyXG4gICAgICAgICAgaHR0cFN0ci5yZXBsYWNlKFwie21ldGhvZH1cIiwgXCJwb3N0XCIpICtcclxuICAgICAgICAgIGBcclxuICAgICAgICAgICAgfWA7XHJcblxyXG4gICAgdmFyIHRlbXAgPVxyXG4gICAgICBgICAgICAgICBcclxuICAgICAgICBVcmkgIHVyaSA9IFVyaS5wYXJzZShnZXRTYXZlVXJsKCkpYCArXHJcbiAgICAgICh0aGlzLm1ldGhvZCA9PSBcImdldFwiID8gXCIucmVwbGFjZShxdWVyeVBhcmFtZXRlcnM6IGZvcm1EYXRhcylcIiA6IFwiXCIpICtcclxuICAgICAgYDsgXHJcbiAgICAgICAgaHR0cC5SZXNwb25zZSA/IHJlc3BvbnNlO1xyXG4gICAgICAgYCArXHJcbiAgICAgIHR0ICtcclxuICAgICAgYFxyXG4gICAgICAgIGlmKGdldE1ldGhvZCgpID09ICdwdXQnICkge1xyXG4gICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PSAyMDApXHJcbiAgICAgICAgICAgIE5hdmlnYXRvci5vZihjb250ZXh0KS5wb3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBOYXZpZ2F0b3Iub2YoY29udGV4dCkucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNhdmVDYWxsYmFjayhqc29uRGVjb2RlKHJlc3BvbnNlLmJvZHkpLCByZXNwb25zZS5zdGF0dXNDb2RlKTtcclxuICAgICAgICBcclxuICAgICAgICBVdGlscy5zaG93U25hY2tUZXh0KGNvbnRleHQsIHJlc3BvbnNlLmJvZHkpOyAgXHJcbiAgICAgICAgYDtcclxuICAgIHJldHVybiB0ZW1wO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwcmVwYXJlRGF0YUZvclVwZGF0ZShmb3JtRGF0YVRlbXA6IHN0cmluZ1tdKSB7XHJcbiAgICB2YXIgdGVtcCA9IFwidmFyIGZvcm1EYXRhcyA9IDxTdHJpbmcsIGR5bmFtaWM+e307XCI7XHJcbiAgICBpZiAoZm9ybURhdGFUZW1wLmxlbmd0aCkge1xyXG4gICAgICB0ZW1wID0gZm9ybURhdGFUZW1wLmpvaW4oXCJcXG5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdGVtcCArPSBcIlxcblwiO1xyXG4gICAgdGVtcCArPSBcInJldHVybiBmb3JtRGF0YXM7XCI7XHJcbiAgICByZXR1cm4gdGVtcDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJlcGFyZUhlYWRlckZvclVwZGF0ZShoZWFkZXJUZW1wOiBzdHJpbmdbXSkge1xyXG4gICAgdmFyIHRlbXAgPSBcInZhciBoZWFkZXJzID0gPFN0cmluZywgZHluYW1pYz57fTtcIjtcclxuICAgIGlmIChoZWFkZXJUZW1wLmxlbmd0aCkge1xyXG4gICAgICB0ZW1wID0gaGVhZGVyVGVtcC5qb2luKFwiXFxuXCIpO1xyXG4gICAgfVxyXG4gICAgdGVtcCArPSBcIlxcblwiO1xyXG4gICAgdGVtcCArPSBcInJldHVybiBoZWFkZXJzO1wiO1xyXG4gICAgcmV0dXJuIHRlbXA7XHJcbiAgfVxyXG5cclxuICBhZGRIZWFkZXJzKGluczogYW55LCBwb3N0RmlsZTogYm9vbGVhbikge1xyXG4gICAgdmFyIGhlYWRlclRlbXAgPSBbXTtcclxuICAgIGhlYWRlclRlbXAucHVzaChcInZhciBoZWFkZXJzID0gPFN0cmluZywgU3RyaW5nPnt9O1wiKTtcclxuICAgIGhlYWRlclRlbXAucHVzaChcclxuICAgICAgXCJoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdcIiArIHRoaXMuY29uc3VtZSArIFwiO2NoYXJzZXQ9dXRmLTgnO1wiXHJcbiAgICApO1xyXG4gICAgaWYgKGluc1tcImhlYWRlclwiXSkge1xyXG4gICAgICB2YXIgaGVhZGVycyA9IGluc1tcImhlYWRlclwiXTtcclxuXHJcbiAgICAgIGhlYWRlclRlbXAucHVzaChcImNvbnN0IHN0b3JhZ2UgPSBGbHV0dGVyU2VjdXJlU3RvcmFnZSgpO1wiKTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGhlYWRlclRlbXAucHVzaChcclxuICAgICAgICAgIFwiU3RyaW5nPyBcIiArXHJcbiAgICAgICAgICAgIGhlYWRlcnNbaV1bXCJuYW1lXCJdICtcclxuICAgICAgICAgICAgXCJTdHIgPSBhd2FpdCBzdG9yYWdlLnJlYWQoa2V5OiAnXCIgK1xyXG4gICAgICAgICAgICBoZWFkZXJzW2ldW1wibmFtZVwiXSArXHJcbiAgICAgICAgICAgIFwiJyk7XCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGhlYWRlclRlbXAucHVzaChcclxuICAgICAgICAgIChwb3N0RmlsZSA/IFwicmVxdWVzdC5cIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgXCJoZWFkZXJzWydcIiArXHJcbiAgICAgICAgICAgIGhlYWRlcnNbaV1bXCJuYW1lXCJdICtcclxuICAgICAgICAgICAgXCInXSA9IFwiICtcclxuICAgICAgICAgICAgaGVhZGVyc1tpXVtcIm5hbWVcIl0gK1xyXG4gICAgICAgICAgICBcIlN0ciA/PyAnJztcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoZWFkZXJUZW1wO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUobmFtZTogc3RyaW5nLCBncm91cE5hbWU/OiBzdHJpbmcsIGRhdGFUeXBlPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHZhciBpc0ludDogQm9vbGVhbiA9IGRhdGFUeXBlICYmIFtcImludGVnZXJcIiwgXCJudW1iZXJcIl0uaW5jbHVkZXMoZGF0YVR5cGUpO1xyXG4gICAgaWYgKCFkYXRhVHlwZSkge1xyXG4gICAgICBkYXRhVHlwZSA9IFwic3RyaW5nXCI7XHJcbiAgICB9XHJcbiAgICBsZXQgdHlwZXM6IGFueSA9IHRoaXMuZ2V0UGFyYW1UeXBlcygpO1xyXG4gICAgdmFyIGtleSA9IG5hbWU7XHJcbiAgICBpZiAoZ3JvdXBOYW1lKSB7XHJcbiAgICAgIGtleSArPSBcIl9cIiArIGdyb3VwTmFtZTtcclxuICAgIH1cclxuICAgIHZhciB0eXBlID0gdHlwZXNba2V5XTtcclxuICAgIHZhciBjb250cm9sbGVyTmFtZSA9IFV0aWxzLmdlbmVyYXRlQ29udHJvbGxlck5hbWUoXHJcbiAgICAgIGdyb3VwTmFtZSA/IGdyb3VwTmFtZSArIFwiX1wiICsgbmFtZSA6IG5hbWVcclxuICAgICk7XHJcblxyXG4gICAgdmFyIHN2YWwgPSBpc0ludFxyXG4gICAgICA/IFwiVXRpbHMuc3RyVG9JbnQoXCIgKyBjb250cm9sbGVyTmFtZSArIFwiKSA6IDBcIlxyXG4gICAgICA6IGNvbnRyb2xsZXJOYW1lICsgJyA6IFwiXCInO1xyXG4gICAgdmFyIHZhbCA9IGNvbnRyb2xsZXJOYW1lICsgXCIgIT0gbnVsbCA/IFwiICsgc3ZhbDtcclxuICAgIGlmICh0eXBlID09IFwibXVsdGlfZmlsZVwiKSB7XHJcbiAgICAgIHZhbCA9IGNvbnRyb2xsZXJOYW1lO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwibXVsdGlfc2VsZWN0XCIpIHtcclxuICAgICAgdmFsID0gY29udHJvbGxlck5hbWUgKyBcIiAhPSBudWxsID8gXCIgKyBjb250cm9sbGVyTmFtZSArIFwiIDogW11cIjtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcInNlbGVjdFwiKSB7XHJcbiAgICAgIHZhciBzdHJEZWYgPSBjb250cm9sbGVyTmFtZSArIFwiIVswXS50b1N0cmluZygpXCI7XHJcbiAgICAgIHN2YWwgPSBpc0ludCA/IFwiVXRpbHMuc3RyVG9JbnQoXCIgKyBzdHJEZWYgKyBcIikgOiAwXCIgOiBzdHJEZWYgKyAnIDogXCJcIic7XHJcbiAgICAgIHZhbCA9IGNvbnRyb2xsZXJOYW1lICsgXCIgIT0gbnVsbCA/IFwiICsgc3ZhbDtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcInJpY2h0ZXh0XCIpIHtcclxuICAgICAgdmFsID0gXCJhd2FpdCBcIiArIGNvbnRyb2xsZXJOYW1lICsgXCIuZ2V0VGV4dCgpXCI7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJpbnB1dFwiKSB7XHJcbiAgICAgIHZhbCA9IGlzSW50XHJcbiAgICAgICAgPyBcIlV0aWxzLnN0clRvSW50KFwiICsgY29udHJvbGxlck5hbWUgKyBcIi50ZXh0XCIgKyBcIilcIlxyXG4gICAgICAgIDogY29udHJvbGxlck5hbWUgKyBcIi50ZXh0XCI7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJ0ZXh0YXJlYVwiKSB7XHJcbiAgICAgIHZhbCA9IGNvbnRyb2xsZXJOYW1lICsgXCIudGV4dFwiO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwiY2hlY2tcIikge1xyXG4gICAgICB2YWwgPVxyXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lICtcclxuICAgICAgICBcIiAhPSBudWxsID8gKFwiICtcclxuICAgICAgICBjb250cm9sbGVyTmFtZSArXHJcbiAgICAgICAgXCIhID8gdHJ1ZSA6IGZhbHNlKSA6IGZhbHNlXCI7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJmaWxlXCIpIHtcclxuICAgICAgdmFsID0gY29udHJvbGxlck5hbWUgKyBcIlNyYyAhPSBudWxsID8gXCIgKyBjb250cm9sbGVyTmFtZSArICdTcmMgOiBcIlwiJztcclxuICAgIH1cclxuICAgIHJldHVybiB2YWw7XHJcbiAgfVxyXG5cclxuICBnZXRQYXJhbVR5cGVzKCk6IGFueSB7XHJcbiAgICB2YXIgaW5zOiBhbnkgPSB7fTtcclxuICAgIHZhciBwYXJhbXMgPVxyXG4gICAgICB0aGlzLmluQm9keVBhcmFtZXRlcnMubGVuZ3RoID4gMFxyXG4gICAgICAgID8gdGhpcy5pbkJvZHlQYXJhbWV0ZXJzXHJcbiAgICAgICAgOiB0aGlzLnBhcmFtZXRlcnM7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGtleSA9IHBhcmFtc1tpXS5uYW1lO1xyXG4gICAgICBpZiAocGFyYW1zW2ldLmdyb3VwTmFtZSkge1xyXG4gICAgICAgIGtleSArPSBcIl9cIiArIHBhcmFtc1tpXS5ncm91cE5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgaW5zW2tleV0gPSBwYXJhbXNbaV0udHlwZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5zO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgcHJlcGFyZVNlbGVjdERhdGEge1xyXG4gICAgcHJpdmF0ZSBkYXJ0IDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBtZXRob2QgOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHBwcCA6IGFueTsgXHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGRhcnQgOiBzdHJpbmcsIHBwcCA6IGFueSwgbWV0aG9kOiBzdHJpbmcpICB7XHJcbiAgICAgICAgdGhpcy5kYXJ0ID0gZGFydDsgXHJcbiAgICAgICAgdGhpcy5wcHAgPSBwcHA7ICBcclxuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZSggKSA6IHN0cmluZyB7XHJcbiAgICAgICAgdmFyIHBwcEtleXMgPSB0aGlzLnBwcCA/IE9iamVjdC5rZXlzKHRoaXMucHBwKSA6IFtdO1xyXG4gICAgICAgIHZhciB3aWRnZXRUZW1wID0gVXRpbHMuZ2V0UmF3V2lkZ2V0VGVtcCgncHJlcGFyZURhdGFGb3JTZWxlY3QnLCB0aGlzLmRhcnQpOyAgXHJcbiAgICAgICAgIFxyXG4gICAgICAgIHZhciB0YWJsZUZpZWxkcyA9IFtdO1xyXG4gICAgICAgIHZhciBjb25maWdGaWVsZHMgPSBbXTsgXHJcbiAgICAgICAgdmFyIGRhdGEgPSB3aWRnZXRUZW1wLmlubmVyOyBcclxuICAgICAgICB2YXIgbGlzdDogYW55W10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHBwcEtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IHBwcEtleXNbaV07IFxyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMucHBwW2ZpZWxkTmFtZV07XHJcbiAgICAgICAgICAgIGlmKHR5cGUuaW5kZXhPZignc2VsZWN0JykgIT0gLTEpIHsgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGhhc2NvbmZpZ0ZpZWxkcyA9IHR5cGUuc3BsaXQoJzonKS5sZW5ndGggPiAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvZHlOYW1lID0gXCJib2R5VGFibGVcIjtcclxuICAgICAgICAgICAgICAgIGlmKGhhc2NvbmZpZ0ZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlOYW1lID0gXCJib2R5Q29uZmlnXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnRmllbGRzLnB1c2goZmllbGROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlRmllbGRzLnB1c2goZmllbGROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaCh0aGlzLmFzc2lnbihmaWVsZE5hbWUsIGJvZHlOYW1lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYobGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ3thc3NpZ259JywgbGlzdC5qb2luKFwiXFxuXCIpKTsgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHdpZGdldFRlbXAub3V0dGVyLCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5kYXJ0ID0gVXRpbHMucmVwbGFjZUtleVZhbHVlUmVnZXgoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwie2NvbmZpZ0ZpZWxkc31cIjogY29uZmlnRmllbGRzLmxlbmd0aCA+IDAgPyAnXCInK2NvbmZpZ0ZpZWxkcy5qb2luKCdcIiwgXCInKSsnXCInIDogXCJcIiwgXHJcbiAgICAgICAgICAgICAgICBcInt0YWJsZUZpZWxkc31cIjogdGFibGVGaWVsZHMubGVuZ3RoID4gMCA/ICdcIicrdGFibGVGaWVsZHMuam9pbignXCIsIFwiJykrJ1wiJyA6IFwiXCIsIFxyXG4gICAgICAgICAgICB9LCB0aGlzLmRhcnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubWV0aG9kID09ICdwdXQnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCd7YXNzaWdufScsIFwiXCIpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHdpZGdldFRlbXAub3V0dGVyLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFydCA9IFV0aWxzLnJlcGxhY2VLZXlWYWx1ZVJlZ2V4KCB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ7Y29uZmlnRmllbGRzfVwiOiAgXCJcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ7dGFibGVGaWVsZHN9XCI6IFwiXCIsIFxyXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5kYXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHdpZGdldFRlbXAub3V0dGVyLCBcImJvb2wgbG9hZGVkU2VsZWN0RGF0YSA9IHRydWU7XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGFydDtcclxuICAgICAgICBcclxuICAgIH0gXHJcblxyXG4gICAgcHJpdmF0ZSBhc3NpZ24oa2V5OiBzdHJpbmcsIGJvZHlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICB2YXIgbGlzdCA9IFtdOyBcclxuICAgICAgICB2YXIgY29udHJvbGxlck5hbWUgPSBVdGlscy5nZW5lcmF0ZUNvbnRyb2xsZXJOYW1lKGtleSk7IFxyXG4gICAgICAgIGxpc3QucHVzaCgnbGlzdCcgKyBjb250cm9sbGVyTmFtZSArICcgPSBqc29uQXJyYXlUb0xpc3QoJytib2R5TmFtZSsnW1wiZGF0YVwiXVtcIicgKyBrZXkgKyAnXCJdKTsnKTsgXHJcbiAgICAgICAgcmV0dXJuIGxpc3Quam9pbihcIlxcblwiKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcclxuaW1wb3J0IHsgV2lkZ2V0RmFjdG9yeSB9IGZyb20gXCIuL3dpZGdldC9XaWRnZXRGYWN0b3J5XCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVxdWVzdCB9IGZyb20gXCIuL0J1aWxkUmVxdWVzdFwiO1xyXG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuL3dpZGdldC9JbnB1dFwiO1xyXG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tIFwiLi93aWRnZXQvU2VsZWN0XCI7XHJcbmltcG9ydCB7IE11bHRpU2VsZWN0IH0gZnJvbSBcIi4vd2lkZ2V0L011bHRpU2VsZWN0XCI7XHJcbmltcG9ydCB7IERhdGUgfSBmcm9tIFwiLi93aWRnZXQvRGF0ZVwiO1xyXG5pbXBvcnQgeyBEYXRldGltZSB9IGZyb20gXCIuL3dpZGdldC9EYXRldGltZVwiO1xyXG5pbXBvcnQgeyBDaGVjayB9IGZyb20gXCIuL3dpZGdldC9DaGVja1wiO1xyXG5pbXBvcnQgeyBSaWNodGV4dCB9IGZyb20gXCIuL3dpZGdldC9SaWNodGV4dFwiO1xyXG5pbXBvcnQgeyBGaWxlIH0gZnJvbSBcIi4vd2lkZ2V0L0ZpbGVcIjtcclxuaW1wb3J0IHsgTXVsdGlGaWxlIH0gZnJvbSBcIi4vd2lkZ2V0L011bHRpRmlsZVwiO1xyXG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gXCIuL3dpZGdldC9UZXh0YXJlYVwiO1xyXG5pbXBvcnQgeyBwcmVwYXJlU2VsZWN0RGF0YSB9IGZyb20gXCIuL1ByZXBhcmVTZWxlY3REYXRhXCI7XHJcbmltcG9ydCB7IFRpbWVXaWRnZXQgfSBmcm9tIFwiLi93aWRnZXQvVGltZVwiO1xyXG5jb25zdCBkZWZUeXBlOiBzdHJpbmcgPSBcImlucHV0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VuRm9ybUNsYXp6IHtcclxuICBwcm90ZWN0ZWQgZGFydFRlbXA6IHN0cmluZztcclxuICBwcm90ZWN0ZWQgZGFydDogc3RyaW5nO1xyXG4gIHByb3RlY3RlZCBwYXRoOiBzdHJpbmc7XHJcbiAgcHJvdGVjdGVkIG1ldGhvZDogc3RyaW5nO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBhbnk7XHJcbiAgcHJvdGVjdGVkIHBwcDogYW55O1xyXG4gIHByb3RlY3RlZCBwYXJhbWV0ZXJzOiBhbnk7XHJcbiAgcHJvdGVjdGVkIGRlZmluaXRpb25zOiBhbnk7XHJcbiAgcHJvdGVjdGVkIHJhd0NvbnRyb2xsZXJXaWRnZXRUZW1wOiBhbnkgPSB7fTtcclxuICBwcm90ZWN0ZWQgYm9keVBhcmFtZXRlcnM6IGFueVtdID0gW107XHJcbiAgcHJvdGVjdGVkIHJlcXVpcmVkUGFyYW1zOiBhbnlbXTtcclxuICBwcm90ZWN0ZWQgZ3JvdXBOYW1lVGl0bGVzOiBhbnkgPSB7fTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXJ0VGVtcDogc3RyaW5nLFxyXG4gICAgcGF0aDogc3RyaW5nLFxyXG4gICAgbWV0aG9kOiBzdHJpbmcsXHJcbiAgICBkYXRhOiBhbnksXHJcbiAgICBkZWZpbml0aW9uczogYW55XHJcbiAgKSB7XHJcbiAgICB0aGlzLmRhcnRUZW1wID0gZGFydFRlbXA7XHJcbiAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnRUZW1wO1xyXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgIHRoaXMucGFyYW1ldGVycyA9IGRhdGEucGFyYW1ldGVycztcclxuICAgIHRoaXMuZGVmaW5pdGlvbnMgPSBkZWZpbml0aW9ucztcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlKCk6IHN0cmluZyB7XHJcbiAgICB0aGlzLmdlbmVyYXRlTWFpbigpO1xyXG4gICAgdGhpcy5wcm9jZXNzM3BQYXJhbXMoKTtcclxuICAgIHRoaXMuZ2VuZXJhdGVXaWRnZXRzKCk7XHJcbiAgICB0aGlzLnBhcnNlRm9ybUVsZW1lbnRNZXRob2RzKCk7XHJcblxyXG4gICAgdGhpcy5wcmVwYXJlRGF0YUZvclNlbGVjdCgpO1xyXG4gICAgdGhpcy5hc3NpZ25QdXRGb3JtKCk7XHJcblxyXG4gICAgdGhpcy5kYXJ0ID0gbmV3IEJ1aWxkUmVxdWVzdChcclxuICAgICAgdGhpcy5kYXJ0LFxyXG4gICAgICB0aGlzLnBhcmFtZXRlcnMsXHJcbiAgICAgIHRoaXMuYm9keVBhcmFtZXRlcnMsXHJcbiAgICAgIHRoaXMubWV0aG9kLFxyXG4gICAgICB0aGlzLmRhdGEuY29uc3VtZXMsXHJcbiAgICAgIHRoaXMucGF0aFxyXG4gICAgKS5wYXJzZSgpO1xyXG5cclxuICAgIHRoaXMucmVwbGFjZUJ1aWxkKCk7XHJcbiAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZShcIntzYXZlTGFiZWxUZXh0fVwiLCB0aGlzLmdldFNhdmVMYWJlbFRleHQoKSk7XHJcbiAgICByZXR1cm4gdGhpcy5kYXJ0O1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdlbmVyYXRlTWFpbigpIHtcclxuICAgIGxldCBjb25maWc6IGFueSA9IHtcclxuICAgICAgXCJ7Y2xhc3NOYW1lfVwiOlxyXG4gICAgICAgIFwiQmFzZVwiICsgVXRpbHMuc3RyVG9NZXRob2QodGhpcy5wYXRoICsgXCI6XCIgKyB0aGlzLm1ldGhvZCkgKyBcIlBhZ2VcIixcclxuICAgICAgXCJ7cm91dGVOYW1lfVwiOiB0aGlzLnBhdGgsXHJcbiAgICAgIFwie3BhZ2VUaXRsZX1cIjogdGhpcy5kYXRhLnN1bW1hcnksXHJcbiAgICAgIFwie21ldGhvZH1cIjogdGhpcy5tZXRob2QsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGFydCA9IFV0aWxzLnJlcGxhY2VLZXlWYWx1ZVJlZ2V4KGNvbmZpZywgdGhpcy5kYXJ0KTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCByZXBsYWNlQnVpbGQoKSB7XHJcbiAgICB2YXIgdGVtcCA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAoXCJidWlsZExpc3RUYWJsZVwiLCB0aGlzLmRhcnQpO1xyXG5cclxuICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHRlbXAub3V0dGVyLCBcIlwiKTtcclxuICAgIHZhciBrZXkgPVxyXG4gICAgICB0aGlzLm1ldGhvZCA9PSBcInBvc3RcIlxyXG4gICAgICAgID8gXCJidWlsZFBvc3RGb3JtXCJcclxuICAgICAgICA6IHRoaXMubWV0aG9kID09IFwicHV0XCJcclxuICAgICAgICA/IFwiYnVpbGRQdXRGb3JtXCJcclxuICAgICAgICA6IFwiXCI7XHJcbiAgICBpZiAoIVtcInBvc3RcIiwgXCJwdXRcIl0uaW5jbHVkZXModGhpcy5tZXRob2QpKSB7XHJcbiAgICAgIHZhciB0ZW1wRm9ybSA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAoXCJidWlsZFBvc3RGb3JtXCIsIHRoaXMuZGFydCk7XHJcbiAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHRlbXBGb3JtLm91dHRlciwgXCJcIik7XHJcbiAgICAgIHRlbXBGb3JtID0gVXRpbHMuZ2V0UmF3V2lkZ2V0VGVtcChcImJ1aWxkUHV0Rm9ybVwiLCB0aGlzLmRhcnQpO1xyXG4gICAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZSh0ZW1wRm9ybS5vdXR0ZXIsIFwiXCIpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLm1ldGhvZCA9PSBcInBvc3RcIikge1xyXG4gICAgICB2YXIgdGVtcEZvcm0gPSBVdGlscy5nZXRSYXdXaWRnZXRUZW1wKFwiYnVpbGRQb3N0Rm9ybVwiLCB0aGlzLmRhcnQpO1xyXG4gICAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZSh0ZW1wRm9ybS5vdXR0ZXIsIHRlbXBGb3JtLmlubmVyKTtcclxuICAgICAgdGVtcEZvcm0gPSBVdGlscy5nZXRSYXdXaWRnZXRUZW1wKFwiYnVpbGRQdXRGb3JtXCIsIHRoaXMuZGFydCk7XHJcbiAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHRlbXBGb3JtLm91dHRlciwgXCJcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgdGVtcEZvcm0gPSBVdGlscy5nZXRSYXdXaWRnZXRUZW1wKFwiYnVpbGRQdXRGb3JtXCIsIHRoaXMuZGFydCk7XHJcbiAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHRlbXBGb3JtLm91dHRlciwgdGVtcEZvcm0uaW5uZXIpO1xyXG4gICAgICB0ZW1wRm9ybSA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAoXCJidWlsZFBvc3RGb3JtXCIsIHRoaXMuZGFydCk7XHJcbiAgICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHRlbXBGb3JtLm91dHRlciwgXCJcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2VuZXJhdGVXaWRnZXRzKCkge1xyXG4gICAgbGV0IG5ld1BhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdQYXJhbWV0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBpbnggPSBuZXdQYXJhbWV0ZXJzW2ldLmluO1xyXG4gICAgICBjb25zdCBuYW1lID0gbmV3UGFyYW1ldGVyc1tpXS5uYW1lO1xyXG4gICAgICBpZiAoaW54ID09IFwiYm9keVwiICYmIG5hbWUgPT0gXCJib2R5XCIpIHtcclxuICAgICAgICB0aGlzLnByb2Nlc3NCb2R5SW5Cb2R5KG5ld1BhcmFtZXRlcnNbaV0uc2NoZW1hKTtcclxuICAgICAgICBuZXdQYXJhbWV0ZXJzID0gbmV3UGFyYW1ldGVycy5jb25jYXQodGhpcy5ib2R5UGFyYW1ldGVycyk7XHJcbiAgICAgICAgbmV3UGFyYW1ldGVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciB3aWRnZXRzOiBhbnkgPSB7fTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3UGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgaW54ID0gbmV3UGFyYW1ldGVyc1tpXS5pbjtcclxuICAgICAgY29uc3QgbmFtZSA9IG5ld1BhcmFtZXRlcnNbaV0ubmFtZTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGlueCA9PSBcImhlYWRlclwiIHx8XHJcbiAgICAgICAgaW54ID09IFwicGF0aFwiIHx8XHJcbiAgICAgICAgKG5hbWUgPT0gXCJib2R5XCIgJiYgaW54ID09IFwiYm9keVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucHBwKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMucHBwKS5pbmNsdWRlcyhuYW1lKSkge1xyXG4gICAgICAgICAgbmV3UGFyYW1ldGVyc1tpXS50eXBlID0gdGhpcy5wcHBbbmFtZV0uc3BsaXQoXCI6XCIpWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBwcHBOYW1lIGluIHRoaXMucHBwKSB7XHJcbiAgICAgICAgICAgIGlmIChwcHBOYW1lLmluZGV4T2YoXCIuXCIpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHBwcE5hbWVzID0gcHBwTmFtZS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgaWYgKHBwcE5hbWVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQcHBOYW1lID0gcHBwTmFtZXNbMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3UHBwR3JvdXBOYW1lID0gcHBwTmFtZXNbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgIG5hbWUgPT0gbmV3UHBwTmFtZSAmJlxyXG4gICAgICAgICAgICAgICAgICBuZXdQYXJhbWV0ZXJzW2ldLmdyb3VwTmFtZSA9PSBuZXdQcHBHcm91cE5hbWVcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICBuZXdQYXJhbWV0ZXJzW2ldLnR5cGUgPSB0aGlzLnBwcFtwcHBOYW1lXS5zcGxpdChcIjpcIilbMF07XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBuZXdQYXJhbWV0ZXJzW2ldLnR5cGUgPSBcImlucHV0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAobmV3UGFyYW1ldGVyc1tpXS50eXBlICE9IFwiZmlsZVwiKSB7XHJcbiAgICAgICAgbmV3UGFyYW1ldGVyc1tpXS50eXBlID0gZGVmVHlwZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHR5cGUgPSBuZXdQYXJhbWV0ZXJzW2ldLnR5cGU7XHJcblxyXG4gICAgICBpZiAoIXdpZGdldHNbdHlwZV0pIHtcclxuICAgICAgICB3aWRnZXRzW3R5cGVdID0gW107XHJcbiAgICAgIH1cclxuICAgICAgd2lkZ2V0c1t0eXBlXS5wdXNoKHRoaXMuZ2VuZXJhdGVXaWRnZXQobmV3UGFyYW1ldGVyc1tpXSwgdHlwZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGNvbnRyb2xsZXJUeXBlIGluIHdpZGdldHMpIHtcclxuICAgICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoXHJcbiAgICAgICAgdGhpcy5yYXdDb250cm9sbGVyV2lkZ2V0VGVtcFtjb250cm9sbGVyVHlwZV0ub3V0dGVyLFxyXG4gICAgICAgIHdpZGdldHNbY29udHJvbGxlclR5cGVdLmpvaW4oXCJcXG5cIilcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNsZWFyVW5Vc2VXaWRnZXQoKTtcclxuICB9XHJcblxyXG4gIGlzVGVzdCgpIHtcclxuICAgIHJldHVybiB0aGlzLm1ldGhvZCA9PSBcInB1dFwiICYmIHRoaXMucGF0aCA9PSBcIi9vd25lci1jb250cmFjdHMve2lkfVwiO1xyXG4gIH1cclxuICBwcm9jZXNzQm9keUluQm9keShzY2hlbWE6IGFueSkge1xyXG4gICAgaWYgKHNjaGVtYS5hbGxPZikge1xyXG4gICAgICB2YXIgYWxsID0gc2NoZW1hLmFsbE9mO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoYWxsW2ldW1wiJHJlZlwiXSkge1xyXG4gICAgICAgICAgdGhpcy5wcm9jZXNzRGVmaW5pdGlvbihhbGxbaV1bXCIkcmVmXCJdKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFsbFtpXS5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgdGhpcy5yZXF1aXJlZFBhcmFtcyA9IGFsbFtpXS5yZXF1aXJlZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoc2NoZW1hW1wiJHJlZlwiXSkge1xyXG4gICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uKHNjaGVtYVtcIiRyZWZcIl0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ib2R5UGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5yZXF1aXJlZFBhcmFtcyAmJlxyXG4gICAgICAgIHRoaXMucmVxdWlyZWRQYXJhbXMuaW5jbHVkZXModGhpcy5ib2R5UGFyYW1ldGVyc1tpXS5uYW1lKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmJvZHlQYXJhbWV0ZXJzW2ldLnJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc0RlZmluaXRpb24ocmVmOiBzdHJpbmcsIGdyb3VwTmFtZT86IHN0cmluZykge1xyXG4gICAgcmVmID0gcmVmLnJlcGxhY2UoXCIjL2RlZmluaXRpb25zL1wiLCBcIlwiKTtcclxuXHJcbiAgICB2YXIgZGVmaW5pdGlvbnMgPSB0aGlzLmRlZmluaXRpb25zW3JlZl07XHJcblxyXG4gICAgdmFyIGxpc3QgPSBkZWZpbml0aW9ucy5hbGxPZjtcclxuXHJcbiAgICBpZiAobGlzdCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAobGlzdFtpXVtcIiRyZWZcIl0pIHtcclxuICAgICAgICAgIHZhciByZWZmID0gbGlzdFtpXVtcIiRyZWZcIl07XHJcblxyXG4gICAgICAgICAgdGhpcy5wcm9jZXNzRGVmaW5pdGlvbihyZWZmKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRlZmluaXRpb25zLnByb3BlcnRpZXMpIHtcclxuICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gZGVmaW5pdGlvbnMucHJvcGVydGllcztcclxuICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcGVydGllcykge1xyXG4gICAgICAgICAgICB0aGlzLmJvZHlQYXJhbWV0ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgaW46IFwiYm9keVwiLFxyXG4gICAgICAgICAgICAgIGdyb3VwTmFtZTogZ3JvdXBOYW1lLFxyXG4gICAgICAgICAgICAgIHR5cGU6IHByb3BlcnRpZXNbbmFtZV0udHlwZSxcclxuICAgICAgICAgICAgICBkYXRhVHlwZTogcHJvcGVydGllc1tuYW1lXS50eXBlLFxyXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwcm9wZXJ0aWVzW25hbWVdLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbnMucHJvcGVydGllcykge1xyXG4gICAgICB2YXIgcHJvcGVydGllcyA9IGRlZmluaXRpb25zLnByb3BlcnRpZXM7XHJcblxyXG4gICAgICBmb3IgKHZhciBuYW1lIGluIHByb3BlcnRpZXMpIHtcclxuICAgICAgICBpZiAocHJvcGVydGllc1tuYW1lXVtcIiRyZWZcIl0pIHtcclxuICAgICAgICAgIHZhciByZWZmID0gcHJvcGVydGllc1tuYW1lXVtcIiRyZWZcIl07XHJcbiAgICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uKHJlZmYsIG5hbWUpO1xyXG4gICAgICAgICAgdGhpcy5ncm91cE5hbWVUaXRsZXNbbmFtZV0gPSBwcm9wZXJ0aWVzW25hbWVdLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgID8gcHJvcGVydGllc1tuYW1lXS5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICA6IG5hbWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW25hbWVdW1wicHJvcGVydGllc1wiXSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWJJdGVtcyA9IHByb3BlcnRpZXNbbmFtZV1bXCJwcm9wZXJ0aWVzXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwTmFtZVRpdGxlc1tuYW1lXSA9IHByb3BlcnRpZXNbbmFtZV0uZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICA/IHByb3BlcnRpZXNbbmFtZV0uZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICA6IG5hbWU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHN1Yk5hbWUgaW4gc3ViSXRlbXMpIHtcclxuICAgICAgICAgICAgICB0aGlzLmJvZHlQYXJhbWV0ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3ViTmFtZSxcclxuICAgICAgICAgICAgICAgIGluOiBcImJvZHlcIixcclxuICAgICAgICAgICAgICAgIGdyb3VwTmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHN1Ykl0ZW1zW3N1Yk5hbWVdLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogc3ViSXRlbXNbc3ViTmFtZV0udHlwZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdWJJdGVtc1tzdWJOYW1lXS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ib2R5UGFyYW1ldGVycy5wdXNoKHtcclxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgIGluOiBcImJvZHlcIixcclxuICAgICAgICAgICAgICBncm91cE5hbWU6IGdyb3VwTmFtZSxcclxuICAgICAgICAgICAgICB0eXBlOiBwcm9wZXJ0aWVzW25hbWVdLnR5cGUsXHJcbiAgICAgICAgICAgICAgZGF0YVR5cGU6IHByb3BlcnRpZXNbbmFtZV0udHlwZSxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcHJvcGVydGllc1tuYW1lXS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGVhclVuVXNlV2lkZ2V0KCkge1xyXG4gICAgdmFyIHdpZGdldEtleXMgPSBbXHJcbiAgICAgIElucHV0LndpZGdldEtleSxcclxuICAgICAgU2VsZWN0LndpZGdldEtleSxcclxuICAgICAgTXVsdGlTZWxlY3Qud2lkZ2V0S2V5LFxyXG4gICAgICBEYXRlLndpZGdldEtleSxcclxuICAgICAgRGF0ZXRpbWUud2lkZ2V0S2V5LFxyXG4gICAgICBDaGVjay53aWRnZXRLZXksXHJcbiAgICAgIFJpY2h0ZXh0LndpZGdldEtleSxcclxuICAgICAgRmlsZS53aWRnZXRLZXksXHJcbiAgICAgIE11bHRpRmlsZS53aWRnZXRLZXksXHJcbiAgICAgIFRleHRhcmVhLndpZGdldEtleSxcclxuICAgICAgVGltZVdpZGdldC53aWRnZXRLZXksXHJcbiAgICBdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWRnZXRLZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciB1blVzZSA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAod2lkZ2V0S2V5c1tpXSwgdGhpcy5kYXJ0KTtcclxuICAgICAgaWYgKHVuVXNlKSB7XHJcbiAgICAgICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UodW5Vc2Uub3V0dGVyLCBcIlwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvY2VzczNwUGFyYW1zKCk6IHZvaWQge1xyXG4gICAgbGV0IHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7XHJcbiAgICBsZXQgbmV3UGFyYW1ldGVyczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgZm9yICh2YXIgayBpbiBwYXJhbWV0ZXJzKSB7XHJcbiAgICAgIGxldCBwYXJhbWV0ZXIgPSBwYXJhbWV0ZXJzW2tdO1xyXG4gICAgICBpZiAocGFyYW1ldGVyLm5hbWUgPT0gXCIzcFwiKSB7XHJcbiAgICAgICAgdGhpcy5wcHAgPSBwYXJhbWV0ZXIuZGVmYXVsdDtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMucHBwKSB7XHJcbiAgICAgICAgICB0aGlzLnBwcFtuYW1lXSA9XHJcbiAgICAgICAgICAgIHRoaXMucHBwW25hbWVdID09IFwicmljaHRleHRcIiA/IFwidGV4dGFyZWFcIiA6IHRoaXMucHBwW25hbWVdO1xyXG4gICAgICAgICAgdGhpcy5wcHBbbmFtZV0gPSB0aGlzLnBwcFtuYW1lXSA9PSBcImltYWdlXCIgPyBcImZpbGVcIiA6IHRoaXMucHBwW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBuZXdQYXJhbWV0ZXJzLnB1c2gocGFyYW1ldGVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucGFyYW1ldGVycyA9IG5ld1BhcmFtZXRlcnM7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2VuZXJhdGVXaWRnZXQocGFyYW1ldGVyOiBhbnksIHR5cGU6IHN0cmluZykge1xyXG4gICAgbGV0IHdmOiBXaWRnZXRGYWN0b3J5ID0gbmV3IFdpZGdldEZhY3RvcnkocGFyYW1ldGVyLCB0aGlzLmRhcnRUZW1wKTtcclxuXHJcbiAgICB0aGlzLnJhd0NvbnRyb2xsZXJXaWRnZXRUZW1wW3R5cGVdID0gd2YuZ2V0V2lkZ2V0KCkuZ2V0UmF3VGVtcCh0aGlzLmRhcnQpO1xyXG4gICAgcmV0dXJuIHdmLmdlbmVyYXRlV2lkZ2V0KCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgcGFyc2VGb3JtRWxlbWVudE1ldGhvZHMoKSB7XHJcbiAgICBsZXQgaW52aXNpYmxlU2VhcmNoRmllbGRDb3VudCA9IDA7XHJcbiAgICBsZXQgcGFyYW1ldGVycyA9XHJcbiAgICAgIHRoaXMuYm9keVBhcmFtZXRlcnMubGVuZ3RoID4gMCA/IHRoaXMuYm9keVBhcmFtZXRlcnMgOiB0aGlzLnBhcmFtZXRlcnM7XHJcblxyXG4gICAgdmFyIG1ldGhvZHMgPSBbXTtcclxuICAgIHZhciBtZXRob2RzR3JvdXA6IGFueSA9IHt9O1xyXG4gICAgdmFyIGxhc3RHcm91cE5hbWUgPSBcIlwiO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIVtcImhlYWRlclwiLCBcInBhdGhcIl0uaW5jbHVkZXMocGFyYW1ldGVyc1tpXS5pbikpIHtcclxuICAgICAgICB2YXIgZ3JvdXBOYW1lID0gcGFyYW1ldGVyc1tpXS5ncm91cE5hbWU7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBwYXJhbWV0ZXJzW2ldLm5hbWU7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25EYXRhRm9yUHV0Rm9ybShwYXJhbWV0ZXJzW2ldKTtcclxuICAgICAgICBpZiAoZ3JvdXBOYW1lKSB7XHJcbiAgICAgICAgICBuYW1lID0gZ3JvdXBOYW1lICsgXCJfXCIgKyBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGdyb3VwTmFtZSkge1xyXG4gICAgICAgICAgaWYgKGxhc3RHcm91cE5hbWUgIT0gZ3JvdXBOYW1lKSB7XHJcbiAgICAgICAgICAgIG1ldGhvZHMucHVzaChcImdyb3VwOlwiICsgZ3JvdXBOYW1lKTtcclxuICAgICAgICAgICAgbGFzdEdyb3VwTmFtZSA9IGdyb3VwTmFtZTtcclxuICAgICAgICAgICAgbWV0aG9kc0dyb3VwW2dyb3VwTmFtZV0gPSBbXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG1ldGhvZHNHcm91cFtncm91cE5hbWVdLnB1c2goXHJcbiAgICAgICAgICAgIFwiZ2VuXCIgKyBVdGlscy5zdHJUb01ldGhvZChuYW1lKSArIFwiV2lkZ2V0KClcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHRoaXMubWV0aG9kID09IFwiZ2V0XCIpIHtcclxuICAgICAgICAgICAgdmFyIGludmlzaWJsZUZpZWxkcyA9IHRoaXMuZ2V0SW52aXNpYmxlRm9ybUZpZWxkcygpO1xyXG4gICAgICAgICAgICB2YXIgdmlzaWJsZSA9IFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICBpZiAoaW52aXNpYmxlRmllbGRzLmluY2x1ZGVzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgdmlzaWJsZSA9IFwiZmFsc2VcIjtcclxuICAgICAgICAgICAgICBpbnZpc2libGVTZWFyY2hGaWVsZENvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWV0aG9kcy5wdXNoKFxyXG4gICAgICAgICAgICAgIFwiVmlzaWJpbGl0eSggY2hpbGQ6IFNpemVkQm94KCB3aWR0aDogMjQwLCBjaGlsZDogZ2VuXCIgK1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuc3RyVG9NZXRob2QobmFtZSkgK1xyXG4gICAgICAgICAgICAgICAgXCJXaWRnZXQoKSksIHZpc2libGU6IFwiICtcclxuICAgICAgICAgICAgICAgIHZpc2libGUgK1xyXG4gICAgICAgICAgICAgICAgXCIpXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1ldGhvZHMucHVzaChcImdlblwiICsgVXRpbHMuc3RyVG9NZXRob2QobmFtZSkgKyBcIldpZGdldCgpXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChtZXRob2RzR3JvdXApIHtcclxuICAgICAgdmFyIHRlbXAgPSBgXHJcbiAgICAgIFRpdGxlZENvbnRhaW5lcihcclxuICAgICAgICB0aXRsZVRleHQ6ICd7dGl0bGV9JyxcclxuICAgICAgICBjaGlsZDogQ29sdW1uKFxyXG4gICAgICAgICAgY2hpbGRyZW46IFt7bGlzdH1dKSlcclxuICAgICAgYDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZHNbaV0uc3Vic3RyaW5nKDAsIFwiZ3JvdXA6XCIubGVuZ3RoKSA9PSBcImdyb3VwOlwiKSB7XHJcbiAgICAgICAgICB2YXIgZ05hbWU6IGFueSA9IG1ldGhvZHNbaV0uc3BsaXQoXCI6XCIpWzFdO1xyXG5cclxuICAgICAgICAgIG1ldGhvZHNbaV0gPSB0ZW1wLnJlcGxhY2UoXCJ7bGlzdH1cIiwgbWV0aG9kc0dyb3VwW2dOYW1lXS5qb2luKFwiLFwiKSk7XHJcbiAgICAgICAgICBtZXRob2RzW2ldID0gbWV0aG9kc1tpXS5yZXBsYWNlKFxyXG4gICAgICAgICAgICBcInt0aXRsZX1cIixcclxuICAgICAgICAgICAgdGhpcy5ncm91cE5hbWVUaXRsZXNbZ05hbWVdXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UoXHJcbiAgICAgIFwie2ludmlzaWJsZVNlYXJjaEZvcm1GaWVsZH1cIixcclxuICAgICAgaW52aXNpYmxlU2VhcmNoRmllbGRDb3VudCArIFwiXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZShcIntmb3JtRWxlbWVudE1ldGhvZHN9XCIsIG1ldGhvZHMuam9pbihcIiwgXCIpKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRJbnZpc2libGVGb3JtRmllbGRzKCk6IHN0cmluZ1tdIHtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbiAgcHJvdGVjdGVkIHByZXBhcmVEYXRhRm9yU2VsZWN0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kYXJ0ID0gbmV3IHByZXBhcmVTZWxlY3REYXRhKHRoaXMuZGFydCwgdGhpcy5wcHAsIHRoaXMubWV0aG9kKS5wYXJzZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGFzc2lnblB1dEZvcm0oKSB7XHJcbiAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZShcclxuICAgICAgXCJ7YXNzaWduRGF0YUZvclB1dEZvcm19XCIsXHJcbiAgICAgIHRoaXMuYXNzaWduUHV0Rm9ybURhdGEgPyB0aGlzLmFzc2lnblB1dEZvcm1EYXRhLmpvaW4oXCJcXG5cIikgOiBcIlwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3NpZ25QdXRGb3JtRGF0YTogQXJyYXk8YW55PiA9IFtdO1xyXG4gIHByb3RlY3RlZCBhc3NpZ25EYXRhRm9yUHV0Rm9ybShwYXJhbWV0ZXI6IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMubWV0aG9kID09IFwicHV0XCIpIHtcclxuICAgICAgdmFyIG5hbWUgPSBwYXJhbWV0ZXIubmFtZTtcclxuICAgICAgdmFyIGdyb3VwTmFtZSA9IHBhcmFtZXRlci5ncm91cE5hbWU7XHJcbiAgICAgIHRoaXMuYXNzaWduUHV0Rm9ybURhdGEucHVzaChcclxuICAgICAgICB0aGlzLnNldFZhbHVlKHBhcmFtZXRlcikucmVwbGFjZShcclxuICAgICAgICAgIC97dmFsdWV9L2csXHJcbiAgICAgICAgICAnanNvbltcImRhdGFcIl0nICtcclxuICAgICAgICAgICAgKGdyb3VwTmFtZSA/ICdbXCInICsgZ3JvdXBOYW1lICsgJ1wiXScgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICdbXCInICtcclxuICAgICAgICAgICAgbmFtZSArXHJcbiAgICAgICAgICAgICdcIl0nXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWUocGFyYW1ldGVyOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgdmFyIG5hbWUgPSBwYXJhbWV0ZXIubmFtZTtcclxuICAgIHZhciBncm91cE5hbWUgPSBwYXJhbWV0ZXIuZ3JvdXBOYW1lO1xyXG4gICAgdmFyIGRhdGFUeXBlID0gcGFyYW1ldGVyLmRhdGFUeXBlO1xyXG4gICAgdmFyIHdpZGdldFR5cGUgPSBwYXJhbWV0ZXIudHlwZTtcclxuICAgIHZhciBpc0ludDogQm9vbGVhbiA9IGRhdGFUeXBlICYmIFtcImludGVnZXJcIiwgXCJudW1iZXJcIl0uaW5jbHVkZXMoZGF0YVR5cGUpO1xyXG4gICAgaWYgKCFkYXRhVHlwZSkge1xyXG4gICAgICBkYXRhVHlwZSA9IFwic3RyaW5nXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNvbnRyb2xsZXJOYW1lID0gVXRpbHMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZShcclxuICAgICAgZ3JvdXBOYW1lID8gZ3JvdXBOYW1lICsgXCJfXCIgKyBuYW1lIDogbmFtZVxyXG4gICAgKTtcclxuXHJcbiAgICB2YXIgdmFsID0gaXNJbnRcclxuICAgICAgPyBjb250cm9sbGVyTmFtZSArIFwiID0gVXRpbHMuc3RyVG9JbnQoe3ZhbHVlfSlcIlxyXG4gICAgICA6IGNvbnRyb2xsZXJOYW1lICsgXCIgPSB7dmFsdWV9XCI7XHJcbiAgICBpZiAoW1wibXVsdGlfc2VsZWN0XCIsIFwic2VsZWN0XCJdLmluY2x1ZGVzKHdpZGdldFR5cGUpKSB7XHJcbiAgICAgIHZhbCA9XHJcbiAgICAgICAgY29udHJvbGxlck5hbWUgK1xyXG4gICAgICAgIFwiID0gXCIgK1xyXG4gICAgICAgICh3aWRnZXRUeXBlID09IFwibXVsdGlfc2VsZWN0XCJcclxuICAgICAgICAgID8gXCJ7dmFsdWV9XCJcclxuICAgICAgICAgIDogXCJ7dmFsdWV9ICE9IG51bGwgPyBbe3ZhbHVlfV0gOiB7dmFsdWV9XCIpO1xyXG4gICAgfSBlbHNlIGlmICh3aWRnZXRUeXBlID09IFwicmljaHRleHRcIikge1xyXG4gICAgICB2YWwgPSBjb250cm9sbGVyTmFtZSArIFwiLnNldFRleHQoe3ZhbHVlfSlcIjtcclxuICAgIH0gZWxzZSBpZiAod2lkZ2V0VHlwZSA9PSBcImlucHV0XCIgfHwgd2lkZ2V0VHlwZSA9PSBcInRleHRhcmVhXCIpIHtcclxuICAgICAgdmFsID1cclxuICAgICAgICBjb250cm9sbGVyTmFtZSArXHJcbiAgICAgICAgXCIudGV4dCA9IFwiICtcclxuICAgICAgICAoaXNJbnRcclxuICAgICAgICAgID8gXCJVdGlscy5mb3JtYXROdW1iZXJUZXh0KHt2YWx1ZX0pXCJcclxuICAgICAgICAgIDogXCJVdGlscy5zdHJOdWxsVG9FbXB0eSh7dmFsdWV9LnRvU3RyaW5nKCkpXCIpO1xyXG4gICAgfSBlbHNlIGlmICh3aWRnZXRUeXBlID09IFwiY2hlY2tcIikge1xyXG4gICAgICB2YWwgPSBjb250cm9sbGVyTmFtZSArIFwiID0ge3ZhbHVlfVwiO1xyXG4gICAgfSBlbHNlIGlmICh3aWRnZXRUeXBlID09IFwiZmlsZVwiKSB7XHJcbiAgICAgIHZhbCA9IFwiYXNzaWduXCIgKyBjb250cm9sbGVyTmFtZSArIFwiRm9yUHV0Rm9ybSh7dmFsdWV9KVwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbCArIFwiO1wiO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2F2ZUxhYmVsVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFwiU2F2ZVwiO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL1V0aWxzXCI7XHJcbmltcG9ydCB7IEdlbkZvcm1DbGF6eiB9IGZyb20gXCIuL0dlbkZvcm1DbGF6elwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlbkxpc3RDbGF6eiBleHRlbmRzIEdlbkZvcm1DbGF6eiB7XHJcblxyXG4gIHByb3RlY3RlZCByZXBsYWNlQnVpbGQoKSB7XHJcbiAgICB2YXIgdGVtcCA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAoJ2J1aWxkUG9zdEZvcm0nLCB0aGlzLmRhcnQpO1xyXG4gICAgdGhpcy5kYXJ0ID0gdGhpcy5kYXJ0LnJlcGxhY2UodGVtcC5vdXR0ZXIsICcnKTtcclxuICAgIHZhciB0ZW1wID0gVXRpbHMuZ2V0UmF3V2lkZ2V0VGVtcCgnYnVpbGRQdXRGb3JtJywgdGhpcy5kYXJ0KTtcclxuICAgIHRoaXMuZGFydCA9IHRoaXMuZGFydC5yZXBsYWNlKHRlbXAub3V0dGVyLCAnJyk7XHJcblxyXG4gICAgdGVtcCA9IFV0aWxzLmdldFJhd1dpZGdldFRlbXAoJ2J1aWxkTGlzdFRhYmxlJywgdGhpcy5kYXJ0KTtcclxuXHJcbiAgICB0aGlzLmRhcnQgPSB0aGlzLmRhcnQucmVwbGFjZSh0ZW1wLm91dHRlciwgdGVtcC5pbm5lcik7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2VuZXJhdGVNYWluKCkge1xyXG4gICAgIFxyXG4gICAgc3VwZXIuZ2VuZXJhdGVNYWluKCk7XHJcbiAgICB0aGlzLmFzc2lnbkNvbHVtbk5hbWVzKCk7IFxyXG4gICAgIFxyXG4gICAgbGV0IGNvbmZpZzogYW55ID0ge1xyXG4gICAgICAgXCJ7Z2VuQ29sTGlzdH1cIjogdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDAgPyAneycrdGhpcy5jb2x1bW5zLmpvaW4oXCIsXCIpKyd9JyA6IFwie31cIiwgLy9cIlsnSWQnLCAnTmFtZScsICdDb2RlJywgJ1Bvc2l0aW9uJ11cIixcclxuICAgICAgIFxyXG4gICAgICBcIntwYXRofVwiOiB0aGlzLnBhdGgsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGFydCA9IFV0aWxzLnJlcGxhY2VLZXlWYWx1ZVJlZ2V4KGNvbmZpZywgdGhpcy5kYXJ0KTtcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBjb2x1bW5zOiBhbnkgPSBbXTtcclxuICBhc3NpZ25Db2x1bW5OYW1lcygpIHtcclxuICAgIHRyeSB7IFxyXG4gICAgICBjb25zdCBwcm9wcyA9dGhpcy5nZXRSZXNwb25zZVByb3BzKClcclxuXHJcbiAgICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKChjb2xOYW1lLCBzcGVjcykgPT4ge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHZhciBkZXNjID0gcHJvcHNbY29sTmFtZV1bJ2Rlc2NyaXB0aW9uJ107XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXMucHJvcGVydGllc1tjb2xOYW1lXSk7XHJcbiAgICAgICAgdmFyIG9uU2VhcmNoID0gJyc7XHJcbiAgICAgICAgY29uc3QgbWV0aG9kID0gVXRpbHMuc3RyVG9NZXRob2QoY29sTmFtZSlcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gVXRpbHMuZ2VuZXJhdGVDb250cm9sbGVyTmFtZShjb2xOYW1lKVxyXG4gICAgICAgIGlmKHRoaXMuZ2V0Q29sdW1uc0hhc1NlYXJjaCgpLmluY2x1ZGVzKGNvbE5hbWUpKSB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICBvblNlYXJjaCA9IGAsc2VhcmNoV2lkZ2V0OiBnZW5gK21ldGhvZCtgV2lkZ2V0KCksXHJcbiAgICAgICAgICBzZWFyY2hDb250cm9sbGVyOiBgK2NvbnRyb2xsZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb2xUeXBlID0gJyc7XHJcbiAgICAgICAgY29uc3QgY29sVHlwZXMgPSB0aGlzLmdldEluUXVlcnlDb2xTcGVjcygpXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoY29sVHlwZXNbY29sTmFtZV0pIHtcclxuICAgICAgICAgIGNvbFR5cGUgPSAnLCBjb2xUeXBlOiBcIicrY29sVHlwZXNbY29sTmFtZV0rJ1wiJ1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbHVtbnMucHVzaChcclxuICAgICAgICAgIFwiJ1wiK2NvbE5hbWUrXCInOiBcIitcclxuICAgICAgICAgICAgICBcIkNvbFNwZWNzKG5hbWU6ICdcIisoZGVzYyA/IGRlc2MgOiBjb2xOYW1lKStcIidcIitcclxuICAgICAgICAgICAgICAgIChjb2xOYW1lID09ICdpZCcgPyAnLHdpZHRoOiAxMDAsIGFsaWdubWVudDogQWxpZ25tZW50LmNlbnRlcic6ICcnKStcclxuICAgICAgICAgICAgICAgIGNvbFR5cGUrXHJcbiAgICAgICAgICAgICAgICBvblNlYXJjaCtcclxuICAgICAgICAgIFwiKVwiKTtcclxuICAgICAgICAgXHJcbiAgICAgIH0pIDsgXHJcbiAgICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IFxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9IFxyXG5cclxuXHJcbiAgaW5RdWVyeUNvbFNwZWNzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gbnVsbDtcclxuICBnZXRJblF1ZXJ5Q29sU3BlY3MoKSB7XHJcbiAgICBpZighdGhpcy5pblF1ZXJ5Q29sU3BlY3MpeyBcclxuICAgICAgdGhpcy5pblF1ZXJ5Q29sU3BlY3MgPSB7fVxyXG4gICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYodGhpcy5wYXJhbWV0ZXJzW2ldLm5hbWUgPT0gJzNwJykgeyBcclxuICAgICAgICAgICAgdGhpcy5pblF1ZXJ5Q29sU3BlY3MgPSB0aGlzLnBhcmFtZXRlcnNbaV0uZGVmYXVsdFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuaW5RdWVyeUNvbFNwZWNzO1xyXG4gIH1cclxuXHJcbiAgY29sc0hhc1NlYXJjaDogYW55ID0gW11cclxuICBnZXRDb2x1bW5zSGFzU2VhcmNoKCkgOiBzdHJpbmcgW10ge1xyXG5cclxuICAgIGlmKHRoaXMuY29sc0hhc1NlYXJjaC5sZW5ndGggPT0gMCkgeyBcclxuXHJcbiAgICAgIGlmKHRoaXMucGFyYW1ldGVycykge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtZXRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmKHRoaXMucGFyYW1ldGVyc1tpXS5pbiA9PSAncXVlcnknKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sc0hhc1NlYXJjaC5wdXNoKHRoaXMucGFyYW1ldGVyc1tpXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAgIFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmKHRoaXMuY29sc0hhc1NlYXJjaC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbHNIYXNTZWFyY2gubWFwKChpdGVtOiB7IG5hbWU6IGFueTsgfSApID0+IGl0ZW0ubmFtZSk7IFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuICBcclxuICBwcm90ZWN0ZWQgZ2V0SW52aXNpYmxlRm9ybUZpZWxkcygpOiBzdHJpbmdbXSB7XHJcbiAgICBcclxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZ2V0UmVzcG9uc2VQcm9wcygpKSBcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRSZXNwb25zZVByb3BzKCkge1xyXG4gICAgaWYgKCF0aGlzLmRhdGEucmVzcG9uc2VzWzIwMF0uc2NoZW1hKSByZXR1cm4ge307XHJcbiAgICB2YXIgaXRlbXMgPSB0aGlzLmRhdGEucmVzcG9uc2VzWzIwMF0uc2NoZW1hLml0ZW1zO1xyXG4gICAgICAgIFxyXG4gICAgICBsZXQgcHJvcHMgPSB7fTtcclxuICAgICAgaWYgKGl0ZW1zICkgeyBcclxuICAgICAgIGlmKGl0ZW1zLnByb3BlcnRpZXMpIHtcclxuICAgICAgICAgIHByb3BzID0gaXRlbXMucHJvcGVydGllcztcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGl0ZW1zLiRyZWYpIHtcclxuICAgICAgICAgIGNvbnN0IHJlZiA9IGl0ZW1zLiRyZWYucmVwbGFjZSgnIy9kZWZpbml0aW9ucy8nLCAnJyk7XHJcbiAgICAgICAgICBwcm9wcyA9IHRoaXMuZGVmaW5pdGlvbnNbcmVmXS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSAgXHJcbiAgICAgIHJldHVybiBwcm9wcztcclxuICB9XHJcbiAgZ2V0U2F2ZUxhYmVsVGV4dCgpOiBzdHJpbmcgeyBcclxuICAgIHJldHVybiAnU2VhcmNoJ1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge0ZsdXR0ZXJ9IGZyb20gXCIuL2ZsdXR0ZXJcIjtcbiBcbmNvbnN0IGZsdXR0ZXIgPSBuZXcgRmx1dHRlcigpO1xuXG5mbHV0dGVyLmluaXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODgwMC9hcGktZG9jcycpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBmbHV0dGVyLmV4ZWN1dGUoKTsgXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsdXR0ZXJfd2lkZ2V0JykuaW5uZXJIVE1MID0gZmx1dHRlci5nZXRGbHV0dGVyV2lkZ2V0cygpLmpvaW4oXCJcXG5cIik7IFxufSk7ICIsImltcG9ydCB7Y2xhenpUZW1wLCBkYXJ0VGVtcCwgZ2V0SW1wb3J0fSBmcm9tIFwiLi9kYXJ0X3RlbXBsYXRlXCI7ICBcclxuaW1wb3J0IHsgR2VuRm9ybUNsYXp6IH0gZnJvbSBcIi4vR2VuRm9ybUNsYXp6XCI7XHJcbmltcG9ydCB7IEdlbkxpc3RDbGF6eiB9IGZyb20gXCIuL0dlbkxpc3RDbGF6elwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZsdXR0ZXIgeyBcclxuICAgIHByaXZhdGUgc3dhZ2dlckpzb24gOiBhbnk7XHJcbiAgICBwcml2YXRlIHN3YWdnZXJKc29uVXJsID8gOiBzdHJpbmc7IFxyXG4gICAgcHJpdmF0ZSBkYXJ0VGVtcCA/IDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBmbHV0dGVyV2lkZ2V0cyA6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIHByaXZhdGUgYmFzZUZpbGVuYW1lID0gJ3BhY2thZ2U6YmFja2VuZF9mbHV0dGVyL2JhY2tlbmRfZ2VuZXJhdG9yL2Jhc2VfYmFja2VuZC5kYXJ0JztcclxuICAgIHB1YmxpYyBhc3luYyBpbml0KHN3YWdnZXJKc29uVXJsIDogc3RyaW5nKSAgeyBcclxuICAgICAgICB0aGlzLnN3YWdnZXJKc29uVXJsID0gc3dhZ2dlckpzb25Vcmw7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoKHN3YWdnZXJKc29uVXJsKTtcclxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgZGF0YS5qc29uKCk7XHJcbiAgICAgICAgdGhpcy5zd2FnZ2VySnNvbiA9IGpzb247IFxyXG4gICAgICAgIHRoaXMuZGFydFRlbXAgPSBkYXJ0VGVtcCgpOyBcclxuICAgIH1cclxuXHJcbiAgICBleGVjdXRlKCkgOiB2b2lkIHtcclxuICAgICAgICB2YXIganNvbiA9IHRoaXMuc3dhZ2dlckpzb247XHJcbiAgICAgICAgdmFyIHBhdGhzID0ganNvbi5wYXRocztcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmZsdXR0ZXJXaWRnZXRzLnB1c2goJzxwPicgKyB0aGlzLmJhc2VGaWxlbmFtZSArICc8L3A+Jyk7XHJcbiAgICAgICAgdGhpcy5mbHV0dGVyV2lkZ2V0cy5wdXNoKCc8dGV4dGFyZWE+Jyk7XHJcbiAgICAgICAgdGhpcy5mbHV0dGVyV2lkZ2V0cy5wdXNoKGdldEltcG9ydCgpKTtcclxuICAgICAgICBmb3IodmFyIHBhdGggaW4gcGF0aHMpIHtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZFBhcmFtcyA9IHBhdGhzW3BhdGhdO1xyXG4gICAgICAgICAgICBmb3IodmFyIG1ldGhvZCBpbiBtZXRob2RQYXJhbXMgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJhc2VDbGFzcyhwYXRoLCBtZXRob2QsIG1ldGhvZFBhcmFtcyk7ICAgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZmx1dHRlcldpZGdldHMucHVzaCgnPC90ZXh0YXJlYT4nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBhZGRCYXNlQ2xhc3MocGF0aDogc3RyaW5nLCBtZXRob2Q6IHN0cmluZywgbWV0aG9kUGFyYW1zOiBhbnkpIHsgXHJcbiAgICAgICAgdmFyIGRhdGEgPSBtZXRob2RQYXJhbXNbbWV0aG9kXTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlRGFydENvZGUocGF0aCwgbWV0aG9kLCBkYXRhKTsgXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVEYXJ0Q29kZShwYXRoIDogc3RyaW5nLCBtZXRob2QgOiBzdHJpbmcsIGRhdGEgOiBhbnkpIDogdm9pZCB7XHJcbiAgICAgICAgIGlmKG1ldGhvZC50b0xvd2VyQ2FzZSgpICE9ICdkZWxldGUnKSB7XHJcbiAgICAgICAgICAgIGlmKG1ldGhvZCA9PSAnZ2V0Jykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNsYXp6ID0gbmV3IEdlbkxpc3RDbGF6eihcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhcnRUZW1wLCBcclxuICAgICAgICAgICAgICAgICAgICBwYXRoLCBcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QsIFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dhZ2dlckpzb24uZGVmaW5pdGlvbnNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXR0ZXJXaWRnZXRzLnB1c2goY2xhenouZ2VuZXJhdGUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZihtZXRob2QgPT0gJ3B1dCcpIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsYXp6ID0gbmV3IEdlbkZvcm1DbGF6eihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXJ0VGVtcCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2FnZ2VySnNvbi5kZWZpbml0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHV0dGVyV2lkZ2V0cy5wdXNoKGNsYXp6LmdlbmVyYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICB9IFxyXG4gICAgfSBcclxuXHJcbiAgICBnZXRGbHV0dGVyV2lkZ2V0cyAoKSA6IEFycmF5PHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsdXR0ZXJXaWRnZXRzO1xyXG4gICAgfSBcclxufVxyXG4gIiwiZXhwb3J0IGZ1bmN0aW9uIGdldEltcG9ydCgpIHtcclxuICByZXR1cm4gKFxyXG4gICAgXCJcIiArXHJcbiAgICBgaW1wb3J0ICdkYXJ0OmNvbnZlcnQnO1xyXG5pbXBvcnQgJ2RhcnQ6YXN5bmMnO1xyXG5pbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlci9tYXRlcmlhbC5kYXJ0JztcclxuaW1wb3J0ICdwYWNrYWdlOmJhY2tlbmRfZmx1dHRlci92aWV3cy9sYXlvdXQvbGF5b3V0LmRhcnQnO1xyXG5pbXBvcnQgJ3BhY2thZ2U6aHR0cC9odHRwLmRhcnQnIGFzIGh0dHA7XHJcbmltcG9ydCAncGFja2FnZTpiYWNrZW5kX2ZsdXR0ZXIvdXRpbHMvVGVtcGxhdGUuZGFydCc7XHJcbmltcG9ydCAncGFja2FnZTpiYWNrZW5kX2ZsdXR0ZXIvdmlld3Mvd2lkZ2V0cy9FQnV0dG9uLmRhcnQnO1xyXG5pbXBvcnQgJ3BhY2thZ2U6YmFja2VuZF9mbHV0dGVyL3V0aWxzL1V0aWxzLmRhcnQnO1xyXG5pbXBvcnQgJ3BhY2thZ2U6YmFja2VuZF9mbHV0dGVyL2NvbnN0cy9jb25zdHMuZGFydCc7XHJcbmltcG9ydCAncGFja2FnZTpiYWNrZW5kX2ZsdXR0ZXIvdmlld3Mvd2lkZ2V0cy9CdXR0b25TZWxlY3REaWFsb2cuZGFydCc7XHJcbmltcG9ydCAncGFja2FnZTpiYWNrZW5kX2ZsdXR0ZXIvdmlld3Mvd2lkZ2V0cy9DaGVjay5kYXJ0JztcclxuaW1wb3J0ICdwYWNrYWdlOmJhY2tlbmRfZmx1dHRlci92aWV3cy93aWRnZXRzL1RpdGxlQ29udGFpbmVyLmRhcnQnO1xyXG5pbXBvcnQgJ3BhY2thZ2U6YmFja2VuZF9mbHV0dGVyL3ZpZXdzL3dpZGdldHMvVGltZS5kYXJ0JztcclxuaW1wb3J0ICdwYWNrYWdlOmJhY2tlbmRfZmx1dHRlci92aWV3cy93aWRnZXRzL0RhdGUuZGFydCc7XHJcbmltcG9ydCAncGFja2FnZTpiYWNrZW5kX2ZsdXR0ZXIvdmlld3Mvd2lkZ2V0cy9JbWFnZVVwbG9hZEZpbGUuZGFydCc7XHJcbmltcG9ydCAnLi4vdmlld3Mvd2lkZ2V0cy9UYWJsZUdyaWQuZGFydCc7XHJcbmltcG9ydCAnLi4vdmlld3Mvd2lkZ2V0cy9NdWx0aXBsZVVwbG9hZC5kYXJ0JztcclxuYFxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkYXJ0VGVtcCgpOiBzdHJpbmcge1xyXG4gIHJldHVybiAoXHJcbiAgICBcIlwiICtcclxuICAgIGBcclxuY2xhc3Mge2NsYXNzTmFtZX0gZXh0ZW5kcyBTdGF0ZWZ1bFdpZGdldCB7XHJcbiAgICBzdGF0aWMgY29uc3QgU3RyaW5nIHJvdXRlTmFtZSA9ICd7cm91dGVOYW1lfSc7XHJcbiAgICBjb25zdCB7Y2xhc3NOYW1lfSh7S2V5PyBrZXl9KSA6IHN1cGVyKGtleToga2V5KTtcclxuICAgIEBvdmVycmlkZVxyXG4gICAgU3RhdGU8e2NsYXNzTmFtZX0+IGNyZWF0ZVN0YXRlKCkgPT4ge2NsYXNzTmFtZX1TdGF0ZSgpO1xyXG59XHJcblxyXG5jbGFzcyB7Y2xhc3NOYW1lfVN0YXRlIGV4dGVuZHMgU3RhdGU8e2NsYXNzTmFtZX0+IHtcclxuICAgIGZpbmFsIF9mb3JtS2V5ID0gR2xvYmFsS2V5PEZvcm1TdGF0ZT4oKTtcclxuICAgIFN0cmluZyBnZXRNZXRob2QoKSB7XHJcbiAgICAgICAgcmV0dXJuICd7bWV0aG9kfSc7XHJcbiAgICB9XHJcbiAgICB7YnVpbGRQb3N0Rm9ybX0gXHJcbiAgICBAb3ZlcnJpZGVcclxuICAgIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybiBMYXlvdXQoXHJcbiAgICAgICAgICAgIHRpdGxlOiAne3BhZ2VUaXRsZX0nLFxyXG4gICAgICAgICAgICBwYWdlOiBTaW5nbGVDaGlsZFNjcm9sbFZpZXcoXHJcbiAgICAgICAgICAgICAgICBjaGlsZDogUm93KGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICBjb2xMZWZ0UmlnaHQoKSxcclxuICAgICAgICAgICAgICAgIEV4cGFuZGVkKGZsZXg6IDMsIGNoaWxkOiAgZ2VuRm9ybSgpICksXHJcbiAgICAgICAgICAgICAgICBjb2xMZWZ0UmlnaHQoKSxcclxuICAgICAgICAgICAgXSkpKTtcclxuICAgIH1cclxuICAgIFdpZGdldCBjb2xMZWZ0UmlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEV4cGFuZGVkKFxyXG4gICAgICAgICAgICBmbGV4OiBVdGlscy5pc1NtYWxsU2NyZWVuKGNvbnRleHQpID8gMCA6IDEsXHJcbiAgICAgICAgICAgIGNoaWxkOiBjb25zdCBTaXplZEJveCgpLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHsvYnVpbGRQb3N0Rm9ybX1cclxuXHJcbiAgICB7YnVpbGRQdXRGb3JtfSBcclxuICAgIFxyXG4gICAgQG92ZXJyaWRlXHJcbiAgICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsgXHJcbiAgICAgICAgaWYoZ2V0TWV0aG9kKCkgPT0gJ3B1dCcpIHsgXHJcbiAgICAgICAgICAgIHJldHVybiBGdXR1cmVCdWlsZGVyPGR5bmFtaWM+KFxyXG4gICAgICAgICAgICAgICAgZnV0dXJlOiBhc3NpZ25EYXRhRm9yUHV0Rm9ybSgpLFxyXG4gICAgICAgICAgICAgICAgYnVpbGRlcjogKGNvbnRleHQsIHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuaGFzRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmludChzbmFwc2hvdC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRleHQoJ1RoZXJlIHdhcyBhbiBlcnJvciA6KCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzbmFwc2hvdC5oYXNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbkZvcm0oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbHVtbihjaGlsZHJlbjogW1NpemVkQm94KGNoaWxkOiBDaXJjdWxhclByb2dyZXNzSW5kaWNhdG9yKCksIHdpZHRoOiA1MCwgaGVpZ2h0OiA1MCldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICByZXR1cm4gTGF5b3V0KFxyXG4gICAgICAgICAgICB0aXRsZTogJ3twYWdlVGl0bGV9JyxcclxuICAgICAgICAgICAgcGFnZTogICBTaW5nbGVDaGlsZFNjcm9sbFZpZXcoXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IFJvdyhjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbExlZnRSaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIEV4cGFuZGVkKGZsZXg6IDUsIGNoaWxkOiBnZW5Gb3JtKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbExlZnRSaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgXSkpXHJcbiAgICAgICAgICAgICk7IFxyXG4gICAgfVxyXG5cclxuICAgIFdpZGdldCBjb2xMZWZ0UmlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEV4cGFuZGVkKFxyXG4gICAgICAgICAgICBmbGV4OiBVdGlscy5pc1NtYWxsU2NyZWVuKGNvbnRleHQpID8gMCA6IDEsXHJcbiAgICAgICAgICAgIGNoaWxkOiBjb25zdCBTaXplZEJveCgpLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICB2b2lkIHNhdmUgKCkgYXN5bmMge1xyXG4gICAgICAgIFRlbXBsYXRlLnNob3dMb2FkaW5nKGNvbnRleHQpO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YXMgPSBwcmVwYXJlRGF0YUZvclVwZGF0ZSgpO1xyXG4gICAgICAgIHZhciBoZWFkZXJzID0gcHJlcGFyZUhlYWRlckZvclVwZGF0ZSgpO1xyXG4gICAgICAgIHtidWlsZFJlcXVlc3R9IFxyXG4gICAgfVxyXG4gICAgV2lkZ2V0IGdlbkZvcm0oKSB7XHJcbiAgICAgICAgTGlzdDxXaWRnZXQ+IGVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZWxlbWVudHMuYWRkQWxsKGZvcm1FbGVtZW50cygpKTtcclxuICAgICAgICBlbGVtZW50cy5hZGQoZm9ybUJ1dHRvbigpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIEZvcm0oXHJcbiAgICAgICAgICAgIGtleTogX2Zvcm1LZXksXHJcbiAgICAgICAgICAgIGNoaWxkOiBQYWRkaW5nKFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogY29uc3QgRWRnZUluc2V0cy5hbGwoMTYpLFxyXG4gICAgICAgICAgICAgICAgY2hpbGQ6ICBDb2x1bW4oXHJcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NBeGlzQWxpZ25tZW50OiBDcm9zc0F4aXNBbGlnbm1lbnQuc3RhcnQsIFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBlbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgV2lkZ2V0IGZvcm1CdXR0b24oKSB7XHJcbiAgICAgICAgcmV0dXJuIENlbnRlcihcclxuICAgICAgICAgICAgY2hpbGQ6IEVCdXR0b24oXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIntzYXZlTGFiZWxUZXh0fVwiLFxyXG4gICAgICAgICAgICAgICAgb25QcmVzczogKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZm9ybUtleS5jdXJyZW50U3RhdGUhLnZhbGlkYXRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZSgpOyBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHsvYnVpbGRQdXRGb3JtfVxyXG4gICAgXHJcbiAgICB7YnVpbGRMaXN0VGFibGV9XHJcbiAgICBAb3ZlcnJpZGVcclxuICAgIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybiBMYXlvdXQoXHJcbiAgICAgICAgICAgIHRpdGxlOiAne3BhZ2VUaXRsZX0nLFxyXG4gICAgICAgICAgICBoYXNTZWFyY2g6IGZvcm1FbGVtZW50cygpLmlzTm90RW1wdHkgJiYgaW52aXNpYmxlU2VhcmNoRm9ybUZpZWxkICE9IGZvcm1FbGVtZW50cygpLmxlbmd0aCxcclxuICAgICAgICAgICAgc2VhcmNoRm9ybTogIGdlbkZvcm0oKSxcclxuICAgICAgICAgICAgZXhwb3J0V2lkZ2V0OiBleHBvcnRXaWRnZXQoKSxcclxuICAgICAgICAgICAgaGFzQ3JlYXRlQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICBjcmVhdGVSb3V0ZU5hbWU6IGdldENyZWF0ZVBhZ2VSb3V0ZU5hbWUoKSxcclxuICAgICAgICAgICAgcGFnZTogIGdldFRhYmxlR3JpZCgpXHJcbiAgICAgICAgKTtcclxuICAgIH0gIFxyXG4gICAgZXhwb3J0V2lkZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgV2lkZ2V0IGdldFRhYmxlR3JpZCgpIHtcclxuICAgICAgICByZXR1cm4gbG9hZGVkU2VsZWN0RGF0YVxyXG4gICAgICAgID8gVGFibGVHcmlkKFxyXG4gICAgICAgICAgICBsaXN0Q29sOiBnZXRMaXN0Q29sKCksXHJcbiAgICAgICAgICAgIGxpc3RVcmw6ICckYXBpQmFzZVBhdGh7cGF0aH0nLFxyXG4gICAgICAgICAgICBkZWxldGVVcmw6ICckYXBpQmFzZVBhdGh7cGF0aH0nLFxyXG4gICAgICAgICAgICBvbkRlbGV0ZTogKGlkKSB7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5zaG93U25hY2tUZXh0KGNvbnRleHQsICdEZWxldGVkIGlkICRpZCcpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkVkaXQ6IChpZCkge1xyXG4gICAgICAgICAgICAgICAgb25FZGl0Um93KGlkKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiBwcmVwYXJlRGF0YUZvclVwZGF0ZSgpLFxyXG4gICAgICAgICAgICByZWZlc2g6ICgpID0+IHJlZnJlc2goKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICApXHJcbiAgICAgICAgOiBTaXplZEJveCgpO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgTWFwPFN0cmluZywgQ29sU3BlY3M+IGdldExpc3RDb2woKSB7XHJcbiAgICAgICAgcmV0dXJuIHtnZW5Db2xMaXN0fTtcclxuICAgIH1cclxuICAgIHZvaWQgb25FZGl0Um93KGR5bmFtaWMgaWQpIHt9XHJcbiAgIFxyXG4gICAgcmVmcmVzaCgpIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgc2V0U3RhdGUoKCkge30pO1xyXG4gICAgfSBcclxuICAgIFN0cmluZyA/IGdldENyZWF0ZVBhZ2VSb3V0ZU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdm9pZCBzYXZlICgpIGFzeW5jIHtcclxuICAgICAgICByZWZyZXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgV2lkZ2V0IGdlbkZvcm0oKSB7XHJcbiAgICAgICAgTGlzdDxXaWRnZXQ+IGVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZWxlbWVudHMuYWRkQWxsKGZvcm1FbGVtZW50cygpKTsgXHJcbiAgICAgICAgcmV0dXJuIEZvcm0oa2V5OiBfZm9ybUtleSwgY2hpbGQ6IFJvdyhjaGlsZHJlbjogZWxlbWVudHMpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgV2lkZ2V0IGZvcm1CdXR0b24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFNpemVkQm94KFxyXG4gICAgICAgICAgICB3aWR0aDogMTIwLFxyXG4gICAgICAgICAgICBjaGlsZDogRUJ1dHRvbihcclxuICAgICAgICAgICAgICAgIGljb246IGNvbnN0IEljb24oSWNvbnMuc2VhcmNoKSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiU2VhcmNoXCIsXHJcbiAgICAgICAgICAgICAgICBvblByZXNzOiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9mb3JtS2V5LmN1cnJlbnRTdGF0ZSEudmFsaWRhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICB7L2J1aWxkTGlzdFRhYmxlfVxyXG5cclxuICAgXHJcbiAgICB7cHJlcGFyZURhdGFGb3JTZWxlY3R9IFxyXG4gICAgYm9vbCBsb2FkZWRTZWxlY3REYXRhID0gZmFsc2U7XHJcbiAgICBAb3ZlcnJpZGVcclxuICAgIHZvaWQgaW5pdFN0YXRlKCkge1xyXG4gICAgICAgIHN1cGVyLmluaXRTdGF0ZSgpOyAgXHJcbiAgICAgICAgRnV0dXJlIHByb2Nlc3MgPSBwcmVwYXJlRGF0YUZvclNlbGVjdCgpO1xyXG4gICAgICAgICBcclxuICAgICAgICBVdGlscy5jYWxsYmFja0FmZnRlckJ1aWxkZWQoKCkge1xyXG4gICAgICAgICAgICBwcm9jZXNzLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkZWRTZWxlY3REYXRhID0gdHJ1ZTsgXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoKCkge30pOyBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgTWFwPFN0cmluZywgZHluYW1pYz4/IGpzb25Gb3JtRGF0YTtcclxuICAgIEZ1dHVyZSBhc3NpZ25EYXRhRm9yUHV0Rm9ybSgpIGFzeW5jIHtcclxuICAgICAgIFxyXG4gICAgICAgIGlmIChqc29uRm9ybURhdGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkZvcm1EYXRhO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIFN0cmluZyB0b2tlbiA9IGF3YWl0IFV0aWxzLmdldFRva2VuKCk7XHJcbiAgICAgICAgU3RyaW5nIHJlcyA9IGF3YWl0IFV0aWxzLmh0dHBHZXQoXHJcbiAgICAgICAgdXJsOiBnZXRTYXZlVXJsKCksXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcInRva2VuXCI6IHRva2VufSxcclxuICAgICAgICApO1xyXG4gICAgICAgIE1hcDxTdHJpbmcsIGR5bmFtaWM+IGpzb24gPSBqc29uRGVjb2RlKHJlcyk7XHJcbiAgICAgICAge2Fzc2lnbkRhdGFGb3JQdXRGb3JtfVxyXG4gICAgICAgIGpzb25Gb3JtRGF0YSA9IGpzb247XHJcbiAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICB9XHJcblxyXG4gICAgbGF0ZSBNYXA8U3RyaW5nLCBkeW5hbWljPiBib2R5Q29uZmlnO1xyXG4gICAgbGF0ZSBNYXA8U3RyaW5nLCBkeW5hbWljPiBib2R5VGFibGU7XHJcblxyXG4gICAgRnV0dXJlIHByZXBhcmVEYXRhRm9yU2VsZWN0ICgpIGFzeW5jIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBTdHJpbmcgdG9rZW4gPSBhd2FpdCBVdGlscy5nZXRUb2tlbigpO1xyXG4gXHJcbiAgICAgICAgICAgIExpc3QgY29uZmlnRmllbGRzID0gW3tjb25maWdGaWVsZHN9XTsvL1tcInBob25lXCIsIFwiZW1haWxcIl07XHJcbiAgICAgICAgICAgIExpc3QgdGFibGVGaWVsZHMgPSBbe3RhYmxlRmllbGRzfV07XHJcbiAgICAgICAgICAgIGlmIChjb25maWdGaWVsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgU3RyaW5nIHJlc0NvbmZpZ0RhdGEgPSBhd2FpdCBVdGlscy5odHRwR2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogYXBpU3lzdGVtQ29uZmlnUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XCJ0b2tlblwiOiB0b2tlbn0sXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XCJmaWVsZHNcIjogY29uZmlnRmllbGRzLmpvaW4oXCIsXCIpfSk7XHJcbiAgICAgICAgICAgICAgICBib2R5Q29uZmlnID0ganNvbkRlY29kZShyZXNDb25maWdEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0YWJsZUZpZWxkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBTdHJpbmcgcmVzVGFibGVEYXRhID0gYXdhaXQgVXRpbHMuaHR0cEdldChcclxuICAgICAgICAgICAgICAgIHVybDogYXBpVGFibGVEYXRhUGF0aCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcInRva2VuXCI6IHRva2VufSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczoge1wiZmllbGRzXCI6IHRhYmxlRmllbGRzLmpvaW4oXCIsXCIpfSk7XHJcbiAgICAgICAgICAgICAgICBib2R5VGFibGUgPSBqc29uRGVjb2RlKHJlc1RhYmxlRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge2Fzc2lnbn1cclxuICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBMaXN0PEJ1dHRvblNlbGVjdERpYWxvZ0l0ZW0+IGpzb25BcnJheVRvTGlzdChqYXMpIHtcclxuICAgICAgICBMaXN0PEJ1dHRvblNlbGVjdERpYWxvZ0l0ZW0+IGxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKGphcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgamFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoamFzW2ldWydkaXNhYmxlZCddICE9IHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5hZGQoQnV0dG9uU2VsZWN0RGlhbG9nSXRlbShcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICBqYXNbaV1bJ2lkJ10gIT0gbnVsbCA/IGphc1tpXVsnaWQnXSA6IGphc1tpXVsnY29kZSddICwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGphc1tpXVsnbmFtZSddICE9IG51bGwgPyBqYXNbaV1bJ25hbWUnXSA6IChqYXNbaV1bJ2Z1bGxuYW1lJ10gPz8gamFzW2ldWyd1c2VybmFtZSddID8/ICcnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogamFzW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgfVxyXG4gICAgey9wcmVwYXJlRGF0YUZvclNlbGVjdH1cclxuICBcclxuICAgIHByZXBhcmVEYXRhRm9yVXBkYXRlKCkgIHtcclxuICAgICAgICB7cHJlcGFyZURhdGFGb3JVcGRhdGV9IFxyXG4gICAgfVxyXG5cclxuICAgIHByZXBhcmVIZWFkZXJGb3JVcGRhdGUoKSB7XHJcbiAgICAgICAge3ByZXBhcmVIZWFkZXJGb3JVcGRhdGV9IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzYXZlQ2FsbGJhY2soYm9keSwgc3RhdHVzQ29kZSkge31cclxuXHJcbiAgICBTdHJpbmcgZ2V0U2F2ZVVybCgpIHtcclxuICAgICAgICByZXR1cm4gJyRhcGlCYXNlUGF0aHtyb3V0ZU5hbWV9JztcclxuICAgIH1cclxuXHJcbiAgICBpbnQgaW52aXNpYmxlU2VhcmNoRm9ybUZpZWxkID0ge2ludmlzaWJsZVNlYXJjaEZvcm1GaWVsZH07XHJcbiAgICBMaXN0PFdpZGdldD4gZm9ybUVsZW1lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiBbe2Zvcm1FbGVtZW50TWV0aG9kc31dO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAge2Zvcm1JbnB1dH1cclxuICAgIGZpbmFsIFRleHRFZGl0aW5nQ29udHJvbGxlciB7Zm9ybUVsQ29udHJvbGxlck5hbWV9ID0gVGV4dEVkaXRpbmdDb250cm9sbGVyKCk7XHJcbiAgICBTdHJpbmcge2Zvcm1FbENvbnRyb2xsZXJOYW1lfVZhbHVlID0gJyc7XHJcbiAgICBcclxuICAgIFdpZGdldCB7Zm9ybUVsV2lkZ2V0TmFtZX0oKSB7XHJcbiAgICAgICAgcmV0dXJuIFRlbXBsYXRlLmdlblRleHRGb3JtRmllbGRXaWRnZXQoXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHtmb3JtRWxDb250cm9sbGVyTmFtZX0sXHJcbiAgICAgICAgICAgIGxhYmVsOiAne2Zvcm1FbENhcHRpb259JyxcclxuICAgICAgICAgICAgb25DaGFuZ2U6ICAoKSA9PiBvbldpZGdldENoYW5nZSh3aWRnZXRNZXRob2Q6ICd7Zm9ybUVsV2lkZ2V0TmFtZX0nLCB3aWRnZXRDb250cm9sbGVyOiB7Zm9ybUVsQ29udHJvbGxlck5hbWV9KSxcclxuICAgICAgICAgICAgb25DbGVhcjogICgpID0+IG9uV2lkZ2V0Q2hhbmdlKGRlbGF5OiBmYWxzZSksXHJcbiAgICAgICAgICAgIHtmb3JtRWxOdW1iZXJPbmx5fVxyXG4gICAgICAgICAgICBrZXlib2FyZFR5cGU6IFRleHRJbnB1dFR5cGUubnVtYmVyLFxyXG4gICAgICAgICAgICB7L2Zvcm1FbE51bWJlck9ubHl9XHJcbiAgICAgICAgICAgIHtmb3JtRWxWYWxpZGF0b3J9XHJcbiAgICAgICAgICAgIHZhbGlkYXRvcjogKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZS5pc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd7Zm9ybUVsQ2FwdGlvbn0ga2jDtG5nIMSRxrDhu6NjIGLhu48gdHLhu5FuZyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB7L2Zvcm1FbFZhbGlkYXRvcn1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHsvZm9ybUlucHV0fVxyXG4gICAgXHJcbiAgICBUaW1lcj8gZGVib3VuY2U7XHJcbiAgICBvbldpZGdldENoYW5nZSh7ZGVsYXkgPSB0cnVlLCBTdHJpbmcgd2lkZ2V0TWV0aG9kID0gJycsIHdpZGdldENvbnRyb2xsZXJ9KSB7XHJcbiAgICAgICAgaWYgKGdldE1ldGhvZCgpID09ICdnZXQnKSB7XHJcbiAgICAgICAgICBpZiAoIWRlbGF5KSB7XHJcbiAgICAgICAgICAgIHNhdmUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChkZWJvdW5jZT8uaXNBY3RpdmUgPz8gZmFsc2UpIGRlYm91bmNlIS5jYW5jZWwoKTtcclxuICAgICAgICAgICAgZGVib3VuY2UgPSBUaW1lcihjb25zdCBEdXJhdGlvbihtaWxsaXNlY29uZHM6IDUwMCksICgpIHtcclxuICAgICAgICAgICAgICBzYXZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZXRTdGF0ZSgoKSB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSAgICBcclxuXHJcblxyXG4gICAge2Zvcm1UZXh0YXJlYX1cclxuICAgIGZpbmFsIFRleHRFZGl0aW5nQ29udHJvbGxlciB7Zm9ybUVsQ29udHJvbGxlck5hbWV9ID0gVGV4dEVkaXRpbmdDb250cm9sbGVyKCk7XHJcbiAgICBXaWRnZXQge2Zvcm1FbFdpZGdldE5hbWV9KCkge1xyXG4gICAgICAgIHJldHVybiBUZW1wbGF0ZS5nZW5UZXh0Rm9ybUZpZWxkV2lkZ2V0KFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiB7Zm9ybUVsQ29udHJvbGxlck5hbWV9LFxyXG4gICAgICAgICAgICBtYXhMaW5lczogMyxcclxuICAgICAgICAgICAgbGFiZWw6ICd7Zm9ybUVsQ2FwdGlvbn0nLFxyXG4gICAgICAgICAgICBvbkNoYW5nZTogICgpID0+IG9uV2lkZ2V0Q2hhbmdlKHdpZGdldE1ldGhvZDogJ3tmb3JtRWxXaWRnZXROYW1lfScsIHdpZGdldENvbnRyb2xsZXI6IHtmb3JtRWxDb250cm9sbGVyTmFtZX0pLFxyXG4gICAgICAgICAgICBvbkNsZWFyOiAgKCkgPT4gb25XaWRnZXRDaGFuZ2UoZGVsYXk6IGZhbHNlKSxcclxuICAgICAgICAgICAge2Zvcm1FbE51bWJlck9ubHl9XHJcbiAgICAgICAgICAgIGtleWJvYXJkVHlwZTogVGV4dElucHV0VHlwZS5udW1iZXIsXHJcbiAgICAgICAgICAgIHsvZm9ybUVsTnVtYmVyT25seX1cclxuICAgICAgICAgICAge2Zvcm1FbFZhbGlkYXRvcn1cclxuICAgICAgICAgICAgdmFsaWRhdG9yOiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlLmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3tmb3JtRWxDYXB0aW9ufSBraMO0bmcgxJHGsOG7o2MgYuG7jyB0cuG7kW5nJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHsvZm9ybUVsVmFsaWRhdG9yfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICB7L2Zvcm1UZXh0YXJlYX1cclxuXHJcbiAgICB7Zm9ybUNoZWNrfVxyXG4gICAgYm9vbCA/IHtmb3JtRWxDb250cm9sbGVyTmFtZX07XHJcbiAgICBXaWRnZXQge2Zvcm1FbFdpZGdldE5hbWV9KCkge1xyXG4gICAgICAgIHJldHVybiBQYWRkaW5nKFxyXG4gICAgICAgICAgICBwYWRkaW5nOiBnZXRXaWRnZXRQYWRkaW5nKCksXHJcbiAgICAgICAgICAgIGNoaWxkOiBDaGVja1dpZGdldChcclxuICAgICAgICAgICAgICAgIHRleHQ6ICd7Zm9ybUVsQ2FwdGlvbn0nLFxyXG4gICAgICAgICAgICAgICAgY2hlY2tlZDoge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSxcclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfUNoYW5nZSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfUNoYW5nZShib29sID8gdmFsKSB7XHJcbiAgICAgICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSA9IHZhbDtcclxuICAgIH1cclxuXHJcbiAgICB7L2Zvcm1DaGVja31cclxuXHJcbiAgICB7Zm9ybURhdGV9XHJcbiAgICBTdHJpbmcgPyAgIHtmb3JtRWxDb250cm9sbGVyTmFtZX07XHJcbiAgICBXaWRnZXQge2Zvcm1FbFdpZGdldE5hbWV9KCkge1xyXG4gICAgICAgIHJldHVybiBQYWRkaW5nKFxyXG4gICAgICAgICAgICBwYWRkaW5nOiBnZXRXaWRnZXRQYWRkaW5nKCksXHJcbiAgICAgICAgICAgIGNoaWxkOiBEYXRlV2lkZ2V0KFxyXG4gICAgICAgICAgICAgICAgaGludFRleHQ6ICd7aGludFRleHR9JyxcclxuICAgICAgICAgICAgICAgIHdpdGhUaW1lOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGluaXRWYWx1ZToge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSxcclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB7Zm9ybUVsQ29udHJvbGxlck5hbWV9Q2hhbmdlKHZhbHVlKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldE1ldGhvZCgpID09ICdnZXQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB7Zm9ybUVsQ29udHJvbGxlck5hbWV9Q2hhbmdlKFN0cmluZyA/IHZhbHVlKSB7XHJcbiAgICAgICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSA9IHZhbHVlO1xyXG4gICAgICAgIHByaW50KHZhbHVlKTtcclxuICAgIH1cclxuICAgIHsvZm9ybURhdGV9XHJcblxyXG4gICAge2Zvcm1EYXRldGltZX1cclxuICAgIFN0cmluZyA/ICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfTtcclxuICAgIFdpZGdldCB7Zm9ybUVsV2lkZ2V0TmFtZX0oKSB7XHJcbiAgICAgICAgcmV0dXJuIFBhZGRpbmcoXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IGdldFdpZGdldFBhZGRpbmcoKSxcclxuICAgICAgICAgICAgY2hpbGQ6IERhdGVXaWRnZXQoXHJcbiAgICAgICAgICAgICAgICBoaW50VGV4dDogJ3toaW50VGV4dH0nLFxyXG4gICAgICAgICAgICAgICAgd2l0aFRpbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbml0VmFsdWU6IHtmb3JtRWxDb250cm9sbGVyTmFtZX0sXHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfUNoYW5nZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldE1ldGhvZCgpID09ICdnZXQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIHtmb3JtRWxDb250cm9sbGVyTmFtZX1DaGFuZ2UoU3RyaW5nID8gdmFsdWUpIHtcclxuICAgICAgICB7Zm9ybUVsQ29udHJvbGxlck5hbWV9ID0gdmFsdWU7XHJcbiAgICAgICAgcHJpbnQodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgey9mb3JtRGF0ZXRpbWV9XHJcblxyXG4gICAge2Zvcm1UaW1lfVxyXG4gICAgU3RyaW5nID8gICB7Zm9ybUVsQ29udHJvbGxlck5hbWV9O1xyXG4gICAgV2lkZ2V0IHtmb3JtRWxXaWRnZXROYW1lfSgpIHtcclxuICAgICAgICByZXR1cm4gUGFkZGluZyhcclxuICAgICAgICAgICAgcGFkZGluZzogZ2V0V2lkZ2V0UGFkZGluZygpLFxyXG4gICAgICAgICAgICBjaGlsZDogVGltZVdpZGdldChcclxuICAgICAgICAgICAgICAgIGhpbnRUZXh0OiAne2hpbnRUZXh0fScsIFxyXG4gICAgICAgICAgICAgICAgaW5pdFZhbHVlOiB7Zm9ybUVsQ29udHJvbGxlck5hbWV9LFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6ICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHtmb3JtRWxDb250cm9sbGVyTmFtZX1DaGFuZ2UodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRNZXRob2QoKSA9PSAnZ2V0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICB7Zm9ybUVsQ29udHJvbGxlck5hbWV9Q2hhbmdlKFN0cmluZyA/IHZhbHVlKSB7XHJcbiAgICAgICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSA9IHZhbHVlO1xyXG4gICAgICAgIHByaW50KHZhbHVlKTtcclxuICAgIH1cclxuICAgIHsvZm9ybVRpbWV9XHJcblxyXG4gICAge2Zvcm1SaWNodGV4dH1cclxuICAgIGZpbmFsIEh0bWxFZGl0b3JDb250cm9sbGVyIHtmb3JtRWxDb250cm9sbGVyTmFtZX0gPSBIdG1sRWRpdG9yQ29udHJvbGxlcigpO1xyXG4gICAgV2lkZ2V0IHtmb3JtRWxXaWRnZXROYW1lfSgpIHtcclxuICAgICAgICByZXR1cm4gUGFkZGluZyhcclxuICAgICAgICAgICAgcGFkZGluZzogZ2V0V2lkZ2V0UGFkZGluZygpLFxyXG4gICAgICAgICAgICBjaGlsZDogQ29udGFpbmVyKFxyXG4gICAgICAgICAgICBkZWNvcmF0aW9uOiBCb3hEZWNvcmF0aW9uKFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiBCb3JkZXIuYWxsKFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogYm9yZGVyQ29sb3IsXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiBCb3JkZXJSYWRpdXMuY2lyY3VsYXIoNSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGNoaWxkOiBIdG1sRWRpdG9yKFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjoge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSxcclxuICAgICAgICAgICAgICAgIGh0bWxFZGl0b3JPcHRpb25zOiBjb25zdCBIdG1sRWRpdG9yT3B0aW9ucyhcclxuICAgICAgICAgICAgICAgICAgICBoaW50OiAnTmjhuq1wIHtmb3JtRWxDYXB0aW9ufSAuLi4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZEVuc3VyZVZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRleHQ6IFwie2luaXRpYWxUZXh0fVwiLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIG90aGVyT3B0aW9uczpcclxuICAgICAgICAgICAgICAgICAgICBPdGhlck9wdGlvbnMoaGVpZ2h0OiAyNTApLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApKTtcclxuICAgIH1cclxuICAgIHsvZm9ybVJpY2h0ZXh0fVxyXG5cclxuICAgIFxyXG4gICAge2Zvcm1FbEZpbGV9XHJcbiAgICBTdHJpbmcgPyB7ZmlsZU5hbWV9O1xyXG4gICAgU3RyaW5nID8ge2ZpbGVOYW1lfVNyYztcclxuICAgIEtleSB7ZmlsZU5hbWV9S2V5ID0gS2V5KCd7ZmlsZU5hbWV9Jyk7XHJcbiAgICBXaWRnZXQge2Zvcm1FbFdpZGdldE5hbWV9KCkge1xyXG4gICAgICAgIHJldHVybiBQYWRkaW5nKFxyXG4gICAgICAgICAgICBwYWRkaW5nOiBnZXRXaWRnZXRQYWRkaW5nKCksXHJcbiAgICAgICAgICAgIGNoaWxkOiBJbWFnZVVwbG9hZEZpbGUoXHJcbiAgICAgICAgICAgICAgICBrZXk6IHtmaWxlTmFtZX1LZXksXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ3tmaWxlRGVzY30nLFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlOiB7ZmlsZU5hbWV9U3JjLFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IChzcmMpID0+IHtmaWxlTmFtZX1TcmMgPSBzcmMudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCd1bmRlZmluZWQnLCAnJylcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhc3NpZ257ZmlsZU5hbWV9Rm9yUHV0Rm9ybShkeW5hbWljIHZhbCkge1xyXG4gICAgICAgIGlmKHZhbCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHtmaWxlTmFtZX1TcmMgPSB2YWw7XHJcbiAgICAgICAgICAgIHtmaWxlTmFtZX0gPSB2YWwudG9TdHJpbmcoKS5zcGxpdChcIi9cIikubGFzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHtmaWxlTmFtZX1TcmMgPSBudWxsO1xyXG4gICAgICAgICAgICB7ZmlsZU5hbWV9ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB7L2Zvcm1FbEZpbGV9IFxyXG5cclxuICAgIHtmb3JtRWxNdWx0aUZpbGV9XHJcbiAgICBMaXN0PGR5bmFtaWM+ID8ge2Zvcm1FbENvbnRyb2xsZXJOYW1lfTtcclxuICAgIFdpZGdldCB7Zm9ybUVsV2lkZ2V0TmFtZX0oKSB7XHJcbiAgICAgICAgcmV0dXJuIE11bHRpcGxlVXBsb2FkKFxyXG4gICAgICAgICAgICBpbml0aWFsVmFsdWU6IHtmb3JtRWxDb250cm9sbGVyTmFtZX0gIT0gbnVsbFxyXG4gICAgICAgICAgICA/ICh7Zm9ybUVsQ29udHJvbGxlck5hbWV9IGFzIExpc3QpXHJcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtIGFzIFN0cmluZylcclxuICAgICAgICAgICAgICAgIC50b0xpc3QoKVxyXG4gICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIGxhYmVsOiAne2Zvcm1FbENhcHRpb259JyxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHtmb3JtRWxSZXF1aXJlZH0sXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoc3Jjcykge1xyXG4gICAgICAgICAgICAgICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfSA9IHNyY3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH0gXHJcbiAgICB7L2Zvcm1FbE11bHRpRmlsZX0gXHJcbiBcclxuICAgIHtmb3JtRWxTZWxlY3R9XHJcbiAgICBMaXN0PGR5bmFtaWM+ID8ge2Zvcm1FbENvbnRyb2xsZXJOYW1lfTtcclxuICAgIExpc3Q8QnV0dG9uU2VsZWN0RGlhbG9nSXRlbT4gID8gbGlzdHtmb3JtRWxDb250cm9sbGVyTmFtZX07XHJcbiAgICBXaWRnZXQge2Zvcm1FbFdpZGdldE5hbWV9KCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gUGFkZGluZyhcclxuICAgICAgICAgICAgcGFkZGluZzogZ2V0V2lkZ2V0UGFkZGluZygpLFxyXG4gICAgICAgICAgICBjaGlsZDogQnV0dG9uU2VsZWN0RGlhbG9nKFxyXG4gICAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGhpbnRUZXh0OiAne2Zvcm1FbENhcHRpb259JyxcclxuICAgICAgICAgICAgZGlhbG9nVGl0bGU6ICd7Zm9ybUVsQ2FwdGlvbn0nLFxyXG4gICAgICAgICAgICBzZWxlY3RlZElkczoge3NlbGVjdGVkSWRzfSxcclxuICAgICAgICAgICAgZGF0YTogbGlzdHtmb3JtRWxDb250cm9sbGVyTmFtZX0gIT0gbnVsbCA/IGxpc3R7Zm9ybUVsQ29udHJvbGxlck5hbWV9ISA6IFtdLFxyXG4gICAgICAgICAgICBvbkNoYW5nZTogKExpc3Q8ZHluYW1pYz4/IHNlbGVjdGVkSWRzKSB7XHJcbiAgICAgICAgICAgICAgICB7Zm9ybUVsQ29udHJvbGxlck5hbWV9Q2hhbmdlKHNlbGVjdGVkSWRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChnZXRNZXRob2QoKSA9PSAnZ2V0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNhdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKSk7IFxyXG4gICAgfVxyXG4gICAge2Zvcm1FbENvbnRyb2xsZXJOYW1lfUNoYW5nZShMaXN0PGR5bmFtaWM+PyBzZWxlY3RlZElkcykge1xyXG4gICAgICAgIHRoaXMue2Zvcm1FbENvbnRyb2xsZXJOYW1lfSA9IHNlbGVjdGVkSWRzO1xyXG4gICAgICAgIHByaW50KHNlbGVjdGVkSWRzLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gICAgey9mb3JtRWxTZWxlY3R9XHJcblxyXG4gICAge2Zvcm1FbE11bHRpU2VsZWN0fVxyXG4gICAgTGlzdDxkeW5hbWljPiA/IHtmb3JtRWxDb250cm9sbGVyTmFtZX07XHJcbiAgICBMaXN0PEJ1dHRvblNlbGVjdERpYWxvZ0l0ZW0+ICA/IGxpc3R7Zm9ybUVsQ29udHJvbGxlck5hbWV9O1xyXG4gICAgV2lkZ2V0IHtmb3JtRWxXaWRnZXROYW1lfSgpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIFBhZGRpbmcoXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IGdldFdpZGdldFBhZGRpbmcoKSxcclxuICAgICAgICAgICAgY2hpbGQ6IEJ1dHRvblNlbGVjdERpYWxvZyhcclxuICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXHJcbiAgICAgICAgICAgIGhpbnRUZXh0OiAne2Zvcm1FbENhcHRpb259JyxcclxuICAgICAgICAgICAgZGlhbG9nVGl0bGU6ICdEYW5oIHPDoWNoIHtmb3JtRWxDYXB0aW9ufScsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkSWRzOiB7c2VsZWN0ZWRJZHN9LFxyXG4gICAgICAgICAgICBkYXRhOiBsaXN0e2Zvcm1FbENvbnRyb2xsZXJOYW1lfSAhPSBudWxsID8gbGlzdHtmb3JtRWxDb250cm9sbGVyTmFtZX0hIDogW10sXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoTGlzdDxkeW5hbWljPj8gc2VsZWN0ZWRJZHMpIHtcclxuICAgICAgICAgICAgICAgIHtmb3JtRWxDb250cm9sbGVyTmFtZX1DaGFuZ2Uoc2VsZWN0ZWRJZHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdldE1ldGhvZCgpID09ICdnZXQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApKTsgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHtmb3JtRWxDb250cm9sbGVyTmFtZX1DaGFuZ2UoTGlzdDxkeW5hbWljPj8gc2VsZWN0ZWRJZHMpIHtcclxuICAgICAgICB0aGlzLntmb3JtRWxDb250cm9sbGVyTmFtZX0gPSBzZWxlY3RlZElkcztcclxuICAgICAgICBwcmludChzZWxlY3RlZElkcy50b1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICB7L2Zvcm1FbE11bHRpU2VsZWN0fSBcclxuXHJcbiAgICBnZXRXaWRnZXRQYWRkaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBjb25zdCBFZGdlSW5zZXRzLmFsbCgxMCk7XHJcbiAgICB9XHJcbn1gXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsYXp6VGVtcCgpIHtcclxuICByZXR1cm4gKFxyXG4gICAgXCJcIiArXHJcbiAgICBgaW1wb3J0ICdwYWNrYWdlOmJhY2tlbmRfZmx1dHRlci9iYWNrZW5kX2dlbmVyYXRvci97ZmlsZU5hbWV9JztcclxuICAgICAgICBpbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlci9tYXRlcmlhbC5kYXJ0JztcclxuXHJcbiAgICAgICAgY2xhc3Mge2NsYXNzTmFtZX0gZXh0ZW5kcyBCYXNle2NsYXNzTmFtZX0ge1xyXG4gICAgICAgIHN0YXRpYyBjb25zdCBTdHJpbmcgcm91dGVOYW1lID0gJ3twYXRofSc7XHJcbiAgICAgICAgQG92ZXJyaWRlXHJcbiAgICAgICAgU3RhdGU8QmFzZXtjbGFzc05hbWV9PiBjcmVhdGVTdGF0ZSgpID0+IHtjbGFzc05hbWV9U3RhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIHtjbGFzc05hbWV9U3RhdGUgZXh0ZW5kcyBCYXNle2NsYXNzTmFtZX1TdGF0ZSB7fWBcclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzdHJUb01ldGhvZCIsInN0ciIsInNwZXJhdG9yIiwic3MiLCJtYXRjaCIsImkiLCJsZW5ndGgiLCJ0aGlzIiwidWNmaXJzdCIsImpvaW4iLCJzdHJpbmciLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwicmVwbGFjZUtleVZhbHVlUmVnZXgiLCJrdiIsInMiLCJrIiwiZmluZCIsIlJlZ0V4cCIsInJlcGxhY2UiLCJnZW5lcmF0ZUNvbnRyb2xsZXJOYW1lIiwibmFtZSIsImdyb3VwTmFtZSIsImluZGV4T2YiLCJnZXRSYXdXaWRnZXRUZW1wIiwidGFnTmFtZSIsImRhcnRUZW1wIiwiZXhlYyIsIm91dHRlciIsImlubmVyIiwiZ2V0UmF3VGVtcCIsImdldFJhd1RlbXBLZXkiLCJVdGlscyIsInBhcmFtZXRlciIsIndpZGV0TmFtZSIsImdlbmVyYXRlV2lkZ2V0TmFtZSIsImdlbmVyYXRlIiwiY29uZmlnIiwiZGVzY3JpcHRpb24iLCJwYXJzZVZhbGlkYXRvciIsInBhcnNlTnVtYmVyT25seSIsIm91dHRlclZhbGlkIiwiaW5uZXJWYWxpZCIsInJlcXVpcmVkIiwiZGF0YVR5cGUiLCJJbnB1dCIsIndpZGdldEtleSIsIldpZGdldCIsImNvbnRyb2xsZXJOYW1lIiwiRmlsZSIsIk11bHRpRmlsZSIsImN0cmxOYW1lIiwiU2VsZWN0IiwiTXVsdGlTZWxlY3QiLCJEYXRlIiwiRGF0ZXRpbWUiLCJSaWNodGV4dCIsIkNoZWNrIiwiVGV4dGFyZWEiLCJUaW1lV2lkZ2V0IiwiZ2VuZXJhdGVXaWRnZXQiLCJnZXRXaWRnZXQiLCJ0eXBlIiwiZ2VuZXJhdGVTZWxlY3QiLCJnZW5lcmF0ZU11dGlTZWxlY3QiLCJnZW5lcmF0ZUNoZWNrIiwiZ2VuZXJhdGVSaWNodGV4dCIsImdlbmVyYXRlRGF0ZSIsImdlbmVyYXRlRGF0ZXRpbWUiLCJnZW5lcmF0ZVRpbWUiLCJnZW5lcmF0ZUZpbGUiLCJnZW5lcmF0ZU11bHRpRmlsZSIsImdlbmVyYXRlVGV4dGFyZWEiLCJnZW5lcmF0ZUlucHV0IiwiZGFydCIsInBhcmFtZXRlcnMiLCJpbkJvZHlQYXJhbWV0ZXJzIiwibWV0aG9kIiwiY29uc3VtZXMiLCJwYXRoIiwiY29uc3VtZSIsInBhcnNlIiwicHJlcGFyZVBhcmFtZXRlclR5cGUiLCJwb3N0RmlsZSIsInBvc3ROb3JtYWwiLCJzcGxpdCIsImhlYWRlclRlbXAiLCJmb3JtRGF0YVRlbXAiLCJmb3JtRmlsZVRlbXAiLCJpbnMiLCJpbiIsInB1c2giLCJhZGRIZWFkZXJzIiwicGFyYW1zIiwiZmlsZUJ5dGVzIiwiZmlsZU5hbWUiLCJnZXRWYWx1ZSIsIm1ha2VIdHRwUmVxdWVzdEZpbGUiLCJwcmVwYXJlRGF0YUZvclVwZGF0ZSIsInByZXBhcmVIZWFkZXJGb3JVcGRhdGUiLCJncm91cE5hbWVWYWx1ZXMiLCJnck5hbWUiLCJtYWtlSHR0cFJlcXVlc3QiLCJib2R5IiwiaHR0cFN0ciIsImluY2x1ZGVzIiwidHQiLCJ0ZW1wIiwiaGVhZGVycyIsImlzSW50Iiwia2V5IiwiZ2V0UGFyYW1UeXBlcyIsInN2YWwiLCJ2YWwiLCJzdHJEZWYiLCJwcHAiLCJwcHBLZXlzIiwiT2JqZWN0Iiwia2V5cyIsIndpZGdldFRlbXAiLCJ0YWJsZUZpZWxkcyIsImNvbmZpZ0ZpZWxkcyIsImRhdGEiLCJsaXN0IiwiZmllbGROYW1lIiwiYm9keU5hbWUiLCJhc3NpZ24iLCJkZWZpbml0aW9ucyIsInJhd0NvbnRyb2xsZXJXaWRnZXRUZW1wIiwiYm9keVBhcmFtZXRlcnMiLCJncm91cE5hbWVUaXRsZXMiLCJhc3NpZ25QdXRGb3JtRGF0YSIsImdlbmVyYXRlTWFpbiIsInByb2Nlc3MzcFBhcmFtcyIsImdlbmVyYXRlV2lkZ2V0cyIsInBhcnNlRm9ybUVsZW1lbnRNZXRob2RzIiwicHJlcGFyZURhdGFGb3JTZWxlY3QiLCJhc3NpZ25QdXRGb3JtIiwiQnVpbGRSZXF1ZXN0IiwicmVwbGFjZUJ1aWxkIiwiZ2V0U2F2ZUxhYmVsVGV4dCIsInN1bW1hcnkiLCJ0ZW1wRm9ybSIsIm5ld1BhcmFtZXRlcnMiLCJpbngiLCJwcm9jZXNzQm9keUluQm9keSIsInNjaGVtYSIsImNvbmNhdCIsInNwbGljZSIsIndpZGdldHMiLCJwcHBOYW1lIiwicHBwTmFtZXMiLCJuZXdQcHBOYW1lIiwibmV3UHBwR3JvdXBOYW1lIiwiY29udHJvbGxlclR5cGUiLCJjbGVhclVuVXNlV2lkZ2V0IiwiaXNUZXN0IiwiYWxsT2YiLCJhbGwiLCJwcm9jZXNzRGVmaW5pdGlvbiIsInJlcXVpcmVkUGFyYW1zIiwicmVmIiwicmVmZiIsInByb3BlcnRpZXMiLCJzdWJJdGVtcyIsInN1Yk5hbWUiLCJ3aWRnZXRLZXlzIiwidW5Vc2UiLCJkZWZhdWx0Iiwid2YiLCJXaWRnZXRGYWN0b3J5IiwiaW52aXNpYmxlU2VhcmNoRmllbGRDb3VudCIsIm1ldGhvZHMiLCJtZXRob2RzR3JvdXAiLCJsYXN0R3JvdXBOYW1lIiwiYXNzaWduRGF0YUZvclB1dEZvcm0iLCJ2aXNpYmxlIiwiZ2V0SW52aXNpYmxlRm9ybUZpZWxkcyIsInN1YnN0cmluZyIsImdOYW1lIiwicHJlcGFyZVNlbGVjdERhdGEiLCJzZXRWYWx1ZSIsIndpZGdldFR5cGUiLCJjb2x1bW5zIiwiaW5RdWVyeUNvbFNwZWNzIiwiY29sc0hhc1NlYXJjaCIsImFzc2lnbkNvbHVtbk5hbWVzIiwiZ2V0UmVzcG9uc2VQcm9wcyIsImZvckVhY2giLCJjb2xOYW1lIiwic3BlY3MiLCJkZXNjIiwib25TZWFyY2giLCJjb250cm9sbGVyIiwiZ2V0Q29sdW1uc0hhc1NlYXJjaCIsImNvbFR5cGUiLCJjb2xUeXBlcyIsImdldEluUXVlcnlDb2xTcGVjcyIsImVycm9yIiwiY29uc29sZSIsIm1hcCIsIml0ZW0iLCJyZXNwb25zZXMiLCJpdGVtcyIsInByb3BzIiwiJHJlZiIsIkdlbkZvcm1DbGF6eiIsImZsdXR0ZXIiLCJmbHV0dGVyV2lkZ2V0cyIsImJhc2VGaWxlbmFtZSIsImluaXQiLCJzd2FnZ2VySnNvblVybCIsImZldGNoIiwianNvbiIsInN3YWdnZXJKc29uIiwiZXhlY3V0ZSIsInBhdGhzIiwibWV0aG9kUGFyYW1zIiwiYWRkQmFzZUNsYXNzIiwiZ2VuZXJhdGVEYXJ0Q29kZSIsInRvTG93ZXJDYXNlIiwiY2xhenoiLCJHZW5MaXN0Q2xhenoiLCJnZXRGbHV0dGVyV2lkZ2V0cyIsInRoZW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIl0sInNvdXJjZVJvb3QiOiIifQ==